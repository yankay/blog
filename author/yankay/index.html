<!DOCTYPE html>
<!--[if lt IE 7]>
<html class="ie ie6 lte9 lte8 lte7" lang="zh-CN">
<![endif]--><!--[if IE 7]>
<html class="ie ie7 lte9 lte8 lte7" lang="zh-CN">
<![endif]--><!--[if IE 8]>
<html class="ie ie8 lte9 lte8" lang="zh-CN">
<![endif]--><!--[if IE 9]>
<html class="ie ie9" lang="zh-CN">
<![endif]--><!--[if gt IE 9]>
<html lang="zh-CN"> <![endif]--><!--[if !IE]><!--><html lang="zh-CN">
<!--<![endif]-->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="initial-scale=1.0,maximum-scale=3.0,width=device-width">

	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="./../../xmlrpc.php">

	<!-- IE6-8 support of HTML5 elements -->
	<!--[if lt IE 9]>
	<script src="http://yankay.com/wp-content/themes/neuro/inc/js/html5.js" type="text/javascript"></script>
	<![endif]-->

	<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">

	<!-- This site is optimized with the Yoast SEO plugin v16.4 - https://yoast.com/wordpress/plugins/seo/ -->
	<title>yankayï¼Œä½œè€…æˆ‘è‡ªç„¶</title>
	<link rel="canonical" href="./index.html">
	<link rel="next" href="./page/2/index.html">
	<meta property="og:locale" content="zh_CN">
	<meta property="og:type" content="profile">
	<meta property="og:title" content="yankayï¼Œä½œè€…æˆ‘è‡ªç„¶">
	<meta property="og:url" content="./index.html">
	<meta property="og:site_name" content="æˆ‘è‡ªç„¶">
	<meta property="og:image" content="https://cdn.v2ex.com/gravatar/426bb830224c1471011d92a830a6ed4f?s=500&#038;d=wavatar&#038;r=g">
	<meta name="twitter:card" content="summary_large_image">
	<script type="application/ld+json" class="yoast-schema-graph">{"@context":"https://schema.org","@graph":[{"@type":"WebSite","@id":".//#website","url":".//","name":"æˆ‘è‡ªç„¶","description":"é¢œå¼€çš„åšå®¢","potentialAction":[{"@type":"SearchAction","target":".//?s={search_term_string}","query-input":"required name=search_term_string"}],"inLanguage":"zh-CN"},{"@type":"ProfilePage","@id":".//author/yankay/#webpage","url":".//author/yankay/","name":"yankayï¼Œä½œè€…æˆ‘è‡ªç„¶","isPartOf":{"@id":".//#website"},"breadcrumb":{"@id":".//author/yankay/#breadcrumb"},"inLanguage":"zh-CN","potentialAction":[{"@type":"ReadAction","target":[".//author/yankay/"]}]},{"@type":"BreadcrumbList","@id":".//author/yankay/#breadcrumb","itemListElement":[{"@type":"ListItem","position":1,"item":{"@type":"WebPage","@id":".//","url":".//","name":"é¦–é¡µ"}},{"@type":"ListItem","position":2,"item":{"@id":".//author/yankay/#webpage"}}]},{"@type":"Person","@id":".//#/schema/person/f52d918e9bfa51c4454172c2caa7704f","name":"yankay","image":{"@type":"ImageObject","@id":".//#personlogo","inLanguage":"zh-CN","url":"http://1.gravatar.com/avatar/426bb830224c1471011d92a830a6ed4f?s=96&d=wavatar&r=g","contentUrl":"http://1.gravatar.com/avatar/426bb830224c1471011d92a830a6ed4f?s=96&d=wavatar&r=g","caption":"yankay"},"sameAs":["http://47.100.65.109"],"mainEntityOfPage":{"@id":".//author/yankay/#webpage"}}]}</script>
	<!-- / Yoast SEO plugin. -->


<link rel="alternate" type="application/rss+xml" title="æˆ‘è‡ªç„¶ &raquo; Feed" href="./../../feed/index.html">
<link rel="alternate" type="application/rss+xml" title="æˆ‘è‡ªç„¶ &raquo; è¯„è®ºFeed" href="./../../comments/feed/index.html">
			<link rel="shortcut icon" href="http://47.100.65.109/wp-content/uploads/2021/03/favicon.png" type="image/x-icon">
		<link rel="alternate" type="application/rss+xml" title="æˆ‘è‡ªç„¶ &raquo; ç”±yankayå‘è¡¨çš„æ–‡ç« Feed" href="./feed/index.html">
<script type="text/javascript">
/* <![CDATA[ */
window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/14.0.0\/svg\/","svgExt":".svg","source":{"concatemoji":".\/\/wp-includes\/js\/wp-emoji-release.min.js?ver=6.4.2"}};
/*! This file is auto-generated */
!function(i,n){var o,s,e;function c(e){try{var t={supportTests:e,timestamp:(new Date).valueOf()};sessionStorage.setItem(o,JSON.stringify(t))}catch(e){}}function p(e,t,n){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(t,0,0);var t=new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data),r=(e.clearRect(0,0,e.canvas.width,e.canvas.height),e.fillText(n,0,0),new Uint32Array(e.getImageData(0,0,e.canvas.width,e.canvas.height).data));return t.every(function(e,t){return e===r[t]})}function u(e,t,n){switch(t){case"flag":return n(e,"ğŸ³ï¸â€âš§ï¸","ğŸ³ï¸â€‹âš§ï¸")?!1:!n(e,"ğŸ‡ºğŸ‡³","ğŸ‡ºâ€‹ğŸ‡³")&&!n(e,"ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿","ğŸ´â€‹ó §â€‹ó ¢â€‹ó ¥â€‹ó ®â€‹ó §â€‹ó ¿");case"emoji":return!n(e,"ğŸ«±ğŸ»â€ğŸ«²ğŸ¿","ğŸ«±ğŸ»â€‹ğŸ«²ğŸ¿")}return!1}function f(e,t,n){var r="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?new OffscreenCanvas(300,150):i.createElement("canvas"),a=r.getContext("2d",{willReadFrequently:!0}),o=(a.textBaseline="top",a.font="600 32px Arial",{});return e.forEach(function(e){o[e]=t(a,e,n)}),o}function t(e){var t=i.createElement("script");t.src=e,t.defer=!0,i.head.appendChild(t)}"undefined"!=typeof Promise&&(o="wpEmojiSettingsSupports",s=["flag","emoji"],n.supports={everything:!0,everythingExceptFlag:!0},e=new Promise(function(e){i.addEventListener("DOMContentLoaded",e,{once:!0})}),new Promise(function(t){var n=function(){try{var e=JSON.parse(sessionStorage.getItem(o));if("object"==typeof e&&"number"==typeof e.timestamp&&(new Date).valueOf()<e.timestamp+604800&&"object"==typeof e.supportTests)return e.supportTests}catch(e){}return null}();if(!n){if("undefined"!=typeof Worker&&"undefined"!=typeof OffscreenCanvas&&"undefined"!=typeof URL&&URL.createObjectURL&&"undefined"!=typeof Blob)try{var e="postMessage("+f.toString()+"("+[JSON.stringify(s),u.toString(),p.toString()].join(",")+"));",r=new Blob([e],{type:"text/javascript"}),a=new Worker(URL.createObjectURL(r),{name:"wpTestEmojiSupports"});return void(a.onmessage=function(e){c(n=e.data),a.terminate(),t(n)})}catch(e){}c(n=f(s,u,p))}t(n)}).then(function(e){for(var t in e)n.supports[t]=e[t],n.supports.everything=n.supports.everything&&n.supports[t],"flag"!==t&&(n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&n.supports[t]);n.supports.everythingExceptFlag=n.supports.everythingExceptFlag&&!n.supports.flag,n.DOMReady=!1,n.readyCallback=function(){n.DOMReady=!0}}).then(function(){return e}).then(function(){var e;n.supports.everything||(n.readyCallback(),(e=n.source||{}).concatemoji?t(e.concatemoji):e.wpemoji&&e.twemoji&&(t(e.twemoji),t(e.wpemoji)))}))}((window,document),window._wpemojiSettings);
/* ]]> */
</script>
<style id="wp-emoji-styles-inline-css" type="text/css">img.wp-smiley, img.emoji {
		display: inline !important;
		border: none !important;
		box-shadow: none !important;
		height: 1em !important;
		width: 1em !important;
		margin: 0 0.07em !important;
		vertical-align: -0.1em !important;
		background: none !important;
		padding: 0 !important;
	}</style>
<link rel="stylesheet" id="wp-block-library-css" href="./../../wp-includes/css/dist/block-library/style.min.css?ver=6.4.2" type="text/css" media="all">
<style id="classic-theme-styles-inline-css" type="text/css">/*! This file is auto-generated */
.wp-block-button__link{color:#fff;background-color:#32373c;border-radius:9999px;box-shadow:none;text-decoration:none;padding:calc(.667em + 2px) calc(1.333em + 2px);font-size:1.125em}.wp-block-file__button{background:#32373c;color:#fff;text-decoration:none}</style>
<style id="global-styles-inline-css" type="text/css">body{--wp--preset--color--black: #000000;--wp--preset--color--cyan-bluish-gray: #abb8c3;--wp--preset--color--white: #ffffff;--wp--preset--color--pale-pink: #f78da7;--wp--preset--color--vivid-red: #cf2e2e;--wp--preset--color--luminous-vivid-orange: #ff6900;--wp--preset--color--luminous-vivid-amber: #fcb900;--wp--preset--color--light-green-cyan: #7bdcb5;--wp--preset--color--vivid-green-cyan: #00d084;--wp--preset--color--pale-cyan-blue: #8ed1fc;--wp--preset--color--vivid-cyan-blue: #0693e3;--wp--preset--color--vivid-purple: #9b51e0;--wp--preset--color--gray: #777;--wp--preset--color--light-gray: #f5f5f5;--wp--preset--color--blue: #0286cf;--wp--preset--color--legacy: #b6b6b6;--wp--preset--color--red: #c80a00;--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple: linear-gradient(135deg,rgba(6,147,227,1) 0%,rgb(155,81,224) 100%);--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan: linear-gradient(135deg,rgb(122,220,180) 0%,rgb(0,208,130) 100%);--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange: linear-gradient(135deg,rgba(252,185,0,1) 0%,rgba(255,105,0,1) 100%);--wp--preset--gradient--luminous-vivid-orange-to-vivid-red: linear-gradient(135deg,rgba(255,105,0,1) 0%,rgb(207,46,46) 100%);--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray: linear-gradient(135deg,rgb(238,238,238) 0%,rgb(169,184,195) 100%);--wp--preset--gradient--cool-to-warm-spectrum: linear-gradient(135deg,rgb(74,234,220) 0%,rgb(151,120,209) 20%,rgb(207,42,186) 40%,rgb(238,44,130) 60%,rgb(251,105,98) 80%,rgb(254,248,76) 100%);--wp--preset--gradient--blush-light-purple: linear-gradient(135deg,rgb(255,206,236) 0%,rgb(152,150,240) 100%);--wp--preset--gradient--blush-bordeaux: linear-gradient(135deg,rgb(254,205,165) 0%,rgb(254,45,45) 50%,rgb(107,0,62) 100%);--wp--preset--gradient--luminous-dusk: linear-gradient(135deg,rgb(255,203,112) 0%,rgb(199,81,192) 50%,rgb(65,88,208) 100%);--wp--preset--gradient--pale-ocean: linear-gradient(135deg,rgb(255,245,203) 0%,rgb(182,227,212) 50%,rgb(51,167,181) 100%);--wp--preset--gradient--electric-grass: linear-gradient(135deg,rgb(202,248,128) 0%,rgb(113,206,126) 100%);--wp--preset--gradient--midnight: linear-gradient(135deg,rgb(2,3,129) 0%,rgb(40,116,252) 100%);--wp--preset--font-size--small: 13px;--wp--preset--font-size--medium: 20px;--wp--preset--font-size--large: 36px;--wp--preset--font-size--x-large: 42px;--wp--preset--spacing--20: 0.44rem;--wp--preset--spacing--30: 0.67rem;--wp--preset--spacing--40: 1rem;--wp--preset--spacing--50: 1.5rem;--wp--preset--spacing--60: 2.25rem;--wp--preset--spacing--70: 3.38rem;--wp--preset--spacing--80: 5.06rem;--wp--preset--shadow--natural: 6px 6px 9px rgba(0, 0, 0, 0.2);--wp--preset--shadow--deep: 12px 12px 50px rgba(0, 0, 0, 0.4);--wp--preset--shadow--sharp: 6px 6px 0px rgba(0, 0, 0, 0.2);--wp--preset--shadow--outlined: 6px 6px 0px -3px rgba(255, 255, 255, 1), 6px 6px rgba(0, 0, 0, 1);--wp--preset--shadow--crisp: 6px 6px 0px rgba(0, 0, 0, 1);}:where(.is-layout-flex){gap: 0.5em;}:where(.is-layout-grid){gap: 0.5em;}body .is-layout-flow > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-flow > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-flow > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignleft{float: left;margin-inline-start: 0;margin-inline-end: 2em;}body .is-layout-constrained > .alignright{float: right;margin-inline-start: 2em;margin-inline-end: 0;}body .is-layout-constrained > .aligncenter{margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > :where(:not(.alignleft):not(.alignright):not(.alignfull)){max-width: var(--wp--style--global--content-size);margin-left: auto !important;margin-right: auto !important;}body .is-layout-constrained > .alignwide{max-width: var(--wp--style--global--wide-size);}body .is-layout-flex{display: flex;}body .is-layout-flex{flex-wrap: wrap;align-items: center;}body .is-layout-flex > *{margin: 0;}body .is-layout-grid{display: grid;}body .is-layout-grid > *{margin: 0;}:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}.has-black-color{color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-color{color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-color{color: var(--wp--preset--color--white) !important;}.has-pale-pink-color{color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-color{color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-color{color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-color{color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-color{color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-color{color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-color{color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-color{color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-color{color: var(--wp--preset--color--vivid-purple) !important;}.has-black-background-color{background-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-background-color{background-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-background-color{background-color: var(--wp--preset--color--white) !important;}.has-pale-pink-background-color{background-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-background-color{background-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-background-color{background-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-background-color{background-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-background-color{background-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-background-color{background-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-background-color{background-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-background-color{background-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-background-color{background-color: var(--wp--preset--color--vivid-purple) !important;}.has-black-border-color{border-color: var(--wp--preset--color--black) !important;}.has-cyan-bluish-gray-border-color{border-color: var(--wp--preset--color--cyan-bluish-gray) !important;}.has-white-border-color{border-color: var(--wp--preset--color--white) !important;}.has-pale-pink-border-color{border-color: var(--wp--preset--color--pale-pink) !important;}.has-vivid-red-border-color{border-color: var(--wp--preset--color--vivid-red) !important;}.has-luminous-vivid-orange-border-color{border-color: var(--wp--preset--color--luminous-vivid-orange) !important;}.has-luminous-vivid-amber-border-color{border-color: var(--wp--preset--color--luminous-vivid-amber) !important;}.has-light-green-cyan-border-color{border-color: var(--wp--preset--color--light-green-cyan) !important;}.has-vivid-green-cyan-border-color{border-color: var(--wp--preset--color--vivid-green-cyan) !important;}.has-pale-cyan-blue-border-color{border-color: var(--wp--preset--color--pale-cyan-blue) !important;}.has-vivid-cyan-blue-border-color{border-color: var(--wp--preset--color--vivid-cyan-blue) !important;}.has-vivid-purple-border-color{border-color: var(--wp--preset--color--vivid-purple) !important;}.has-vivid-cyan-blue-to-vivid-purple-gradient-background{background: var(--wp--preset--gradient--vivid-cyan-blue-to-vivid-purple) !important;}.has-light-green-cyan-to-vivid-green-cyan-gradient-background{background: var(--wp--preset--gradient--light-green-cyan-to-vivid-green-cyan) !important;}.has-luminous-vivid-amber-to-luminous-vivid-orange-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-amber-to-luminous-vivid-orange) !important;}.has-luminous-vivid-orange-to-vivid-red-gradient-background{background: var(--wp--preset--gradient--luminous-vivid-orange-to-vivid-red) !important;}.has-very-light-gray-to-cyan-bluish-gray-gradient-background{background: var(--wp--preset--gradient--very-light-gray-to-cyan-bluish-gray) !important;}.has-cool-to-warm-spectrum-gradient-background{background: var(--wp--preset--gradient--cool-to-warm-spectrum) !important;}.has-blush-light-purple-gradient-background{background: var(--wp--preset--gradient--blush-light-purple) !important;}.has-blush-bordeaux-gradient-background{background: var(--wp--preset--gradient--blush-bordeaux) !important;}.has-luminous-dusk-gradient-background{background: var(--wp--preset--gradient--luminous-dusk) !important;}.has-pale-ocean-gradient-background{background: var(--wp--preset--gradient--pale-ocean) !important;}.has-electric-grass-gradient-background{background: var(--wp--preset--gradient--electric-grass) !important;}.has-midnight-gradient-background{background: var(--wp--preset--gradient--midnight) !important;}.has-small-font-size{font-size: var(--wp--preset--font-size--small) !important;}.has-medium-font-size{font-size: var(--wp--preset--font-size--medium) !important;}.has-large-font-size{font-size: var(--wp--preset--font-size--large) !important;}.has-x-large-font-size{font-size: var(--wp--preset--font-size--x-large) !important;}
.wp-block-navigation a:where(:not(.wp-element-button)){color: inherit;}
:where(.wp-block-post-template.is-layout-flex){gap: 1.25em;}:where(.wp-block-post-template.is-layout-grid){gap: 1.25em;}
:where(.wp-block-columns.is-layout-flex){gap: 2em;}:where(.wp-block-columns.is-layout-grid){gap: 2em;}
.wp-block-pullquote{font-size: 1.5em;line-height: 1.6;}</style>
<link rel="stylesheet" id="bootstrap-style-css" href="./../../wp-content/themes/neuro/cyberchimps/lib/bootstrap/css/bootstrap.min.css?ver=2.0.4" type="text/css" media="all">
<link rel="stylesheet" id="bootstrap-responsive-style-css" href="./../../wp-content/themes/neuro/cyberchimps/lib/bootstrap/css/bootstrap-responsive.min.css?ver=2.0.4" type="text/css" media="all">
<link rel="stylesheet" id="font-awesome-css" href="./../../wp-content/themes/neuro/cyberchimps/lib/css/font-awesome.min.css?ver=6.4.2" type="text/css" media="all">
<link rel="stylesheet" id="cyberchimps_responsive-css" href="./../../wp-content/themes/neuro/cyberchimps/lib/bootstrap/css/cyberchimps-responsive.min.css?ver=1.0" type="text/css" media="all">
<link rel="stylesheet" id="core-style-css" href="./../../wp-content/themes/neuro/cyberchimps/lib/css/core.css?ver=1.0" type="text/css" media="all">
<link rel="stylesheet" id="style-css" href="./../../wp-content/themes/neuro/style.css?ver=1.0" type="text/css" media="all">
<link rel="stylesheet" id="elements_style-css" href="./../../wp-content/themes/neuro/elements/lib/css/elements.css?ver=6.4.2" type="text/css" media="all">
        <script>
            /* <![CDATA[ */
            var rcewpp = {
                "ajax_url":"http://yankay.com/wp-admin/admin-ajax.php",
                "nonce": "aa462ebe7f",
                "home_url": "http://yankay.com/",
                "settings_icon": 'http://yankay.com/wp-content/plugins/export-wp-page-to-static-html/admin/images/settings.png',
                "settings_hover_icon": 'http://yankay.com/wp-content/plugins/export-wp-page-to-static-html/admin/images/settings_hover.png'
            };
            /* ]]\> */
        </script>
        <script type="text/javascript" src="./../../wp-includes/js/jquery/jquery.min.js?ver=3.7.1" id="jquery-core-js"></script>
<script type="text/javascript" src="./../../wp-includes/js/jquery/jquery-migrate.min.js?ver=3.4.1" id="jquery-migrate-js"></script>
<script type="text/javascript" src="./../../wp-content/themes/neuro/cyberchimps/lib/js/jquery.slimbox.min.js?ver=1.0" id="slimbox-js"></script>
<script type="text/javascript" src="./../../wp-content/themes/neuro/cyberchimps/lib/js/jquery.jcarousel.min.js?ver=1.0" id="jcarousel-js"></script>
<script type="text/javascript" src="./../../wp-content/themes/neuro/cyberchimps/lib/js/jquery.mobile.custom.min.js?ver=6.4.2" id="jquery-mobile-touch-js"></script>
<script type="text/javascript" src="./../../wp-content/themes/neuro/cyberchimps/lib/js/swipe-call.min.js?ver=6.4.2" id="slider-call-js"></script>
<script type="text/javascript" src="./../../wp-content/themes/neuro/cyberchimps/lib/js/core.min.js?ver=6.4.2" id="core-js-js"></script>
<script type="text/javascript" src="./../../wp-content/themes/neuro/elements/lib/js/elements.min.js?ver=6.4.2" id="elements_js-js"></script>
<link rel="https://api.w.org/" href="./../../wp-json/index.html">
<link rel="alternate" type="application/json" href="./../../wp-json/wp/v2/users/1/index.html">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="./../../xmlrpc.php?rsd">
<meta name="generator" content="WordPress 6.4.2">
<style type="text/css">.ie8 .container {max-width: 1020px;width:auto;}</style>
<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>
	<style type="text/css" media="all">body {
		 font-size : 16px;
		 font-family : "Open Sans", Helvetica, Arial, "Lucida Grande", sans-serif;
		 font-weight : normal;
		 color : #333333;
				}

										.container {
		 max-width : 1020px;
				}

		
				h1, h2, h3, h4, h5, h6 {
		font-family : Arial, Helvetica, sans-serif;
				}</style>
	<link rel="icon" href="./../../wp-content/uploads/2021/03/cropped-favicon-32x32.png" sizes="32x32">
<link rel="icon" href="./../../wp-content/uploads/2021/03/cropped-favicon-192x192.png" sizes="192x192">
<link rel="apple-touch-icon" href="./../../wp-content/uploads/2021/03/cropped-favicon-180x180.png">
<meta name="msapplication-TileImage" content="./../../wp-content/uploads/2021/03/cropped-favicon-270x270.png">
	
	<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-10148377-3"></script>
<script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-10148377-3');</script>

</head>
<body class="archive author author-yankay author-1 cc-responsive">


<!-- ---------------- Menu --------------------- -->
<div class="container-full-width" id="navigation_menu">
	<div class="container">
		<div class="container-fluid">
			<nav id="navigation" role="navigation">
				<div class="main-navigation navbar">
					<div class="navbar-inner">
						<div class="container">

														<div class="nav-collapse collapse">
								
								<div class="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95-container"><ul id="menu-%e4%b8%bb%e8%8f%9c%e5%8d%95" class="nav">
<li id="menu-item-27229" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-27229"><a href="./../../index.html">é¦–é¡µ</a></li>
<li id="menu-item-26815" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-26815"><a href="./../../about/index.html">å…³äº</a></li>
</ul></div>
								
															</div>
						<!-- collapse -->

						<!-- .btn-navbar is used as the toggle for collapsed navbar content -->
							<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</a>
												</div>
						<!-- container -->
					</div>
					<!-- .navbar-inner .row-fluid -->
				</div>
				<!-- main-navigation navbar -->
			</nav>
			<!-- #navigation -->
		</div>
		<!-- .container-fluid-->
	</div>
	<!-- .container -->
</div>
<!-- #navigation_menu -->


<!-- --------------- Sub Body -------------------- -->

<div class="container-full-width" id="sub_body">

	<!-- ---------------- Header --------------------- -->
	<div class="container-full-width" id="header_section">
		<div class="container">
						<div class="container-fluid">
					<header id="cc-header" class="row-fluid">
		<div class="span7">
				<div class="hgroup">
		<h2 class="site-title"><a href="./../../index.html" title="æˆ‘è‡ªç„¶" rel="home">æˆ‘è‡ªç„¶</a></h2>
	</div>
		</div>

		<div id="register" class="span5">
				<div id="social">
		<div class="legacy-icons">
					</div>
	</div>

		</div>
	</header>
			</div>
			<!-- .container-fluid-->
		</div>
		<!-- .container -->
	</div>
	<!-- #header_section -->

	<div id="archive_page" class="container-full-width">

		<div class="container">

			<div class="container-fluid">

				
				<div id="container" class="row-fluid">

					
					<div id="content" class=" span9 content-sidebar-right">

						
						
							<header class="page-header">
								<h1 class="page-title">
									ä½œè€…å­˜æ¡£ï¼š<span class="vcard"><a class="url fn n" href="./index.html" title="yankay" rel="me">yankay</a></span>								</h1>
															</header>

							
														
								
<article id="post-27289" class="post-27289 post type-post status-publish format-standard hentry category-5 tag-containerd">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../containerd-will-replace-docker/index.html" title="è¿ç»“åˆ°å¬è¯´ Docker è¢« kubenetes æŠ›å¼ƒäº†ï¼Œæ€ä¹ˆåŠï¼Ÿcontainerd" rel="bookmark">å¬è¯´ Docker è¢« kubenetes æŠ›å¼ƒäº†ï¼Œæ€ä¹ˆåŠï¼Ÿcontainerd</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../containerd-will-replace-docker/index.html" title="ä¸‹åˆ7:29" rel="bookmark">
							<time class="entry-date updated" datetime="2021-06-12T19:29:52+08:00">2021å¹´6æœˆ12æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								
<p>åŸæ–‡åœ°å€ï¼š<a rel="noreferrer noopener" href="http://blog.daocloud.io/containerd-1-5-%e9%9c%87%e6%92%bc%e5%8f%91%e5%b8%83-%e6%94%af%e6%8c%81%e9%95%9c%e5%83%8f%e5%8a%a0%e5%af%86%e7%9a%84%e5%ae%b9%e5%99%a8%e5%bc%95%e6%93%8e/" target="_blank">åŸæ–‡é“¾æ¥</a>ï¼Œä½œè€…ï¼š <a href="https://github.com/wzshiming">å¼ ä¸–æ˜</a></p>



<p>Containerd æ˜¯ Kubernetes é»˜è®¤çš„æ ‡å‡† CRI è¿è¡Œæ—¶ç¯å¢ƒï¼Œè¢« Kubernetes, Docker ç­‰å„ç§é¡¹ç›®ä½¿ç”¨ã€‚ä¹Ÿæ˜¯ CNCF å”¯ä¸€çš„å®¹å™¨è¿è¡Œæ—¶ã€‚Docker åœ¨æœ€è¿‘è¿™äº›å¹´ ï¼Œæ²¡æœ‰å¤ªå¤šæ–°ç‰¹æ€§å¼•å…¥ï¼Œè€Œæ›´è½»é‡çš„ containerd æ­£åœ¨è“¬å‹ƒå‘å±•ã€‚ <a href="https://www.infoq.cn/article/x14tvb7izidjpjheoeuj">Dockerå…¬å¸ æ­£åœ¨è¡°è½</a>ï¼Œ<strong>Containerd å°†ç»§æ‰¿è¡£é’µï¼Œæˆä¸ºæœªæ¥å®¹å™¨å¼•æ“çš„å®æ–½æ ‡å‡†ã€‚</strong></p>



<figure class="wp-block-image size-large"><img fetchpriority="high" decoding="async" width="1024" height="621" src="./../../wp-content/uploads/2021/06/containerd-architecture-1024x621.png" alt="" class="wp-image-27292" srcset="./../../wp-content/uploads/2021/06/containerd-architecture-1024x621.png 1024w, ./../../wp-content/uploads/2021/06/containerd-architecture-300x182.png 300w, ./../../wp-content/uploads/2021/06/containerd-architecture-768x465.png 768w, ./../../wp-content/uploads/2021/06/containerd-architecture-1536x931.png 1536w, ./../../wp-content/uploads/2021/06/containerd-architecture.png 1782w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<h2 class="wp-block-heading">Containerd çš„ä½¿ç”¨æƒ…å†µ</h2>



<p>Containerd å¹¶éä¸€ä¸ª å…¨æ–°æŠ€æœ¯ï¼Œå®ƒæ˜¯ç”± Docker å…¬å¸å¼€æºï¼Œä½œä¸º docker çš„æ ¸å¿ƒç»„ä»¶å­˜åœ¨ã€‚æ ¹æ®ç¤¾åŒºä¸­çš„å‡ ä¸ªæ‰˜ç®¡æœåŠ¡å’Œå¼€æºé¡¹ç›®ä½¿ç”¨çš„ç»Ÿè®¡ï¼Œåˆ° 2020 å¹´æ­¢ Containerd çš„ä½¿ç”¨ (åŒ…å«åœ¨ Docker ä¸­ä½¿ç”¨) å å®¹å™¨ä½¿ç”¨çš„ 83%ã€‚</p>



<figure class="wp-block-image size-large"><img decoding="async" width="1024" height="413" src="./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234983158073-1024x413.png" alt="" class="wp-image-27302" srcset="./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234983158073-1024x413.png 1024w, ./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234983158073-300x121.png 300w, ./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234983158073-768x310.png 768w, ./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234983158073-1536x619.png 1536w, ./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234983158073.png 1954w" sizes="(max-width: 1024px) 100vw, 1024px"><figcaption>continerd å¯ä»¥ä½œä¸º kubelet å’Œ docker çš„ å®¹å™¨å¼•æ“ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨</figcaption></figure>



<p> æ ¹æ® Sysdig çš„ç»Ÿè®¡æ•°æ®ï¼Œä» 2019 å¹´ åˆ° 2020 å¹´ï¼Œconatinerd çš„ç‹¬ç«‹ä½¿ç”¨ç‡ï¼Œä¸Šå‡äº† 2å€ã€‚ä¸Šå‡è¶‹åŠ¿æ˜æ˜¾ã€‚</p>



<figure class="wp-block-image size-large"><img decoding="async" width="1024" height="370" src="./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234985914716-1024x370.png" alt="" class="wp-image-27303" srcset="./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234985914716-1024x370.png 1024w, ./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234985914716-300x108.png 300w, ./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234985914716-768x278.png 768w, ./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234985914716-1536x555.png 1536w, ./../../wp-content/uploads/2021/06/ä¼ä¸šå¾®ä¿¡æˆªå›¾_16234985914716.png 1914w" sizes="(max-width: 1024px) 100vw, 1024px"></figure>



<h2 class="wp-block-heading">Containerd 1.5 çš„ä¸€äº›æ–°ç‰¹æ€§</h2>



<p>æœ€è¿‘çš„<a rel="noreferrer noopener" href="https://github.com/containerd/containerd/releases" target="_blank">Containerd 1.5</a>&nbsp;ä»¥äº2021å¹´5æœˆ4æ—¥å‘å¸ƒã€‚è¿™æ˜¯ Containerdçš„ç¬¬6ä¸ªä¸»è¦ç‰ˆæœ¬åŒ…æ‹¬è®¸å¤šç¨³å®šæ€§æ”¹è¿›, ä»¥åŠä»£ç ç»„ç»‡ç»“æ„çš„å˜åŒ–ä½¿åç»­å¼€å‘æ›´æ–¹ä¾¿ã€‚è¯¥ç‰ˆæœ¬é»˜è®¤å¯ç”¨æ”¯æŒ&nbsp;OCI crypt&nbsp;è§£å¯†ï¼Œå¹¶å¼•å…¥äº†å¯¹zstdã€NRI å’Œ FreeBSD çš„å®éªŒæ€§æ”¯æŒï¼Œè¿˜åŒ…æ‹¬CRIæ’ä»¶çº³å…¥ä¸»å®¹å™¨åº“å’Œåˆ‡æ¢åˆ°Go&nbsp;modulesã€‚</p>



<h3 class="wp-block-heading" id="id-éœ‡æƒŠ-Containerd1.5å‘å¸ƒ-æ”¯æŒé•œåƒåŠ å¯†çš„å®¹å™¨å¼•æ“-æ›´å¥½çš„å‹ç¼©ç®—æ³•æ”¯æŒ">æ›´å¥½çš„å‹ç¼©ç®—æ³•æ”¯æŒ</h3>



<p>ç°åœ¨é™¤äº† gzip ä¹‹å¤–ï¼Œè¿˜æ”¯æŒ zstd ä½œä¸ºé•œåƒå‹ç¼©ç®—æ³•ã€‚zstd æ˜¯ Facebook åœ¨2016å¹´å¼€æºçš„æ–°æ— æŸå‹ç¼©ç®—æ³•ï¼Œä¼˜ç‚¹æ˜¯å‹ç¼©ç‡å’Œå‹ç¼©/è§£å‹ç¼©æ€§èƒ½éƒ½å¾ˆçªå‡ºã€‚</p>



<p>zstd çš„è®¾è®¡ç›®çš„æ˜¯è¾¾åˆ°ä¸&nbsp;deflate&nbsp;ç®—æ³•(å¼€å‘äº1991å¹´ï¼Œç”¨äºgzip) ç›¸å½“çš„å‹ç¼©æ¯”ï¼Œ å¹¶ä¸”æ›´å¿«ï¼Œå°¤å…¶æ˜¯è§£å‹çš„æ—¶å€™ã€‚</p>



<p>zstd åœ¨å…¶æœ€å¤§å‹ç¼©çº§åˆ«çš„å‹ç¼©æ¯”æ¥è¿‘ lzmaã€lzham å’Œ ppmxï¼Œå¹¶ä¸”æ¯” lza å’Œ bzip2 æ€§èƒ½æ›´å¥½ã€‚å®ƒçš„è§£å‹é€Ÿåº¦æ¯”ä»»ä½•å½“å‰å¯ç”¨çš„ç®—æ³•éƒ½å¿«ï¼Œå¹¶ä¸”å‹ç¼©æ¯”æ›´å¥½ã€‚</p>



<p><code><a rel="noreferrer noopener" href="https://github.com/klauspost/compress/tree/master/zstd" target="_blank">zstd</a>&nbsp;çš„</code><a rel="noreferrer noopener" href="https://github.com/klauspost/compress/blob/master/zstd/README.md" target="_blank">åŸºå‡†æµ‹è¯•ç»“æœ</a>&nbsp;åœ¨é€Ÿåº¦æ–¹é¢ï¼Œåœ¨æœ€å¿«æ¨¡å¼ä¸‹ï¼Œå®ƒçš„é€Ÿåº¦é€šå¸¸æ˜¯ stdlib deflate/gzip 2å€ã€‚</p>



<figure class="wp-block-image size-large"><img loading="lazy" decoding="async" width="736" height="241" src="./../../wp-content/uploads/2021/06/GJQ_1wCBa0G6DvoDACqDn0MAAAAAbj0JAAAB.jpg" alt="" class="wp-image-27295" srcset="./../../wp-content/uploads/2021/06/GJQ_1wCBa0G6DvoDACqDn0MAAAAAbj0JAAAB.jpg 736w, ./../../wp-content/uploads/2021/06/GJQ_1wCBa0G6DvoDACqDn0MAAAAAbj0JAAAB-300x98.jpg 300w" sizes="(max-width: 736px) 100vw, 736px"></figure>



<h3 class="wp-block-heading">æ”¯æŒåŠ å¯†é•œåƒ</h3>



<p>å¯ä»¥æŠŠé•œåƒåŠ å¯†åä¸Šä¼ åˆ°é•œåƒä»“åº“, Containerd åªéœ€è¦é…ç½®è§£ç çš„ key å°±å¯ä»¥è¿è¡Œè¿™åŠ å¯†çš„é•œåƒ, å¯¹äºä¸€äº›å¯¹äºå®‰å…¨æ€§æœ‰éœ€æ±‚çš„é•œåƒå¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚</p>



<p>è‡ªä» Containerd 1.3 åŠ å…¥è¯¥åŠŸèƒ½åï¼Œå·²æ”¯æŒå®¹å™¨ä½¿ç”¨&nbsp;<a href="https://github.com/containers/ocicrypt">åŠ å¯†é•œåƒ (OCI crypt)</a>&nbsp;ä½†æ˜¯ä¸€ç›´å¹¶æ²¡æœ‰å¯ç”¨è¯¥åŠŸèƒ½ã€‚</p>



<p>è¯¥ç‰¹æ€§å°†åœ¨ 1.5 ä¸­å·²ç»é»˜è®¤å¯ç”¨ï¼Œä½¿ç”¨æ–¹æ³•è¯·å‚è§<a href="https://github.com/containerd/containerd/blob/v1.5.0/docs/cri/decryption.md">æ–‡æ¡£</a>&nbsp;ï¼ˆä¾èµ–çš„äºŒè¿›åˆ¶æ–‡ä»¶åŒ…å«åœ¨&nbsp;<a href="https://github.com/containerd/containerd/releases">cri-containerd-cni-1.5.0-linux-amd64.tar.gz</a>&nbsp;ï¼‰</p>



<p>æ³¨æ„ï¼šå½“å‰ Docker æ˜¯ä¸æ”¯æŒ OCI crypt çš„ï¼Œå› ä¸º Docker ç›®å‰è¿˜æ²¡æœ‰ä½¿ç”¨ Containerd ç®¡ç†é•œåƒã€‚</p>



<h3 class="wp-block-heading">èŠ‚ç‚¹èµ„æºæ¥å£</h3>



<p>èŠ‚ç‚¹èµ„æºæ¥å£(<a href="https://github.com/containerd/nri">NRI</a>) ç”¨äº CPU è°ƒåº¦çº¦æŸå’Œå†…å­˜é…é¢çš„æ ‡å‡†æ¥å£ã€‚</p>



<p>å…¶ç±»ä¼¼å®¹å™¨ç½‘ç»œæ¥å£(<a href="https://www.cni.dev/">CNI</a>)çš„åŸºæœ¬æ¥å£ã€æ¦‚å¿µå’Œæ’ä»¶è®¾è®¡æ˜¯ä¸€ç§å¤„ç†å®¹å™¨ç½‘ç»œå †æ ˆçš„å¤šç§å®ç°çš„ä¼˜é›…æ–¹å¼ã€‚æ­¤æ¦‚å¿µå¯ç”¨äºå…¶ä»–æ¥å£ï¼Œä»¥å®šåˆ¶å®¹å™¨çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚èŠ‚ç‚¹èµ„æºæ¥å£(<a href="https://github.com/containerd/nri">NRI</a>)æ˜¯ä¸€ä¸ªæ–°çš„æ¥å£ï¼Œå…¶å®å¸¦æœ‰ç»“æ„åŒ–APIå’Œå®¹å™¨æ’ä»¶è®¾è®¡ï¼Œç”¨å¯¹èŠ‚ç‚¹ä¸Šçš„èµ„æºè¿›è¡Œç®¡ç†ã€‚ä¸ CNI ç›¸åŒ NRI æ’ä»¶å°†åœ¨å®¹å™¨åˆ›å»ºå®Œæ¯•, ä½†æ˜¯è¿˜æ²¡æœ‰çœŸæ­£å¯åŠ¨ä¹‹å‰çš„åˆå§‹åŒ–æ—¶è¢«è°ƒç”¨ã€‚</p>



<p>å¯ä»¥çœ‹<a href="https://github.com/containerd/nri#sample-plugin">ç¤ºä¾‹ä»£ç </a>äº†è§£ NRI çš„ä½¿ç”¨ã€‚</p>



<h3 class="wp-block-heading">æ”¯æŒ FreeBSD</h3>



<p>ç°åœ¨æ”¯æŒåœ¨ FreeBSD è¿è¡Œ Containerdï¼Œå®¹å™¨è¿è¡Œæ—¶ OCI æ˜¯ä½¿ç”¨&nbsp;<a href="https://en.wikipedia.org/wiki/FreeBSD_jail">FreeBSD jails</a>&nbsp;(Samuel Karp çš„&nbsp;<code><a href="https://github.com/samuelkarp/runj">runj</a></code>)ã€‚æ–‡ä»¶ç³»ç»Ÿç›®å‰ä»…æ”¯æŒ ZFS, åç»­è®¡åˆ’æ”¯æŒ&nbsp;<code><a href="https://www.freebsd.org/cgi/man.cgi?query=unionfs&amp;sektion=8&amp;manpath=freebsd-release-ports">unionfs</a></code>ã€‚</p>



<figure class="wp-block-image size-large"><img loading="lazy" decoding="async" width="977" height="416" src="./../../wp-content/uploads/2021/06/1_Wu1CiRsPaGoiqNaeLJrWVg.png" alt="" class="wp-image-27296" srcset="./../../wp-content/uploads/2021/06/1_Wu1CiRsPaGoiqNaeLJrWVg.png 977w, ./../../wp-content/uploads/2021/06/1_Wu1CiRsPaGoiqNaeLJrWVg-300x128.png 300w, ./../../wp-content/uploads/2021/06/1_Wu1CiRsPaGoiqNaeLJrWVg-768x327.png 768w" sizes="(max-width: 977px) 100vw, 977px"></figure>



<h2 class="wp-block-heading">ç»“å°¾</h2>



<p>åŸæ–‡ä½œè€…â€œå¼ ä¸–æ˜â€æ˜¯ ä»»èŒ DaoCloud ç ”å‘å›¢é˜Ÿçš„ å¤©æ‰é’å¹´ï¼Œåœ¨è¿‡å»çš„ åŠå¹´ï¼Œåœ¨ containerd ç¤¾åŒº <strong>æ’åç¬¬å…«</strong>çš„è´¡çŒ®è€…ã€‚</p>



<p>æ„Ÿè°¢â€œ<a href="https://www.yuque.com/alipayko5m44vl0y">èƒ–æ©˜</a>â€œå¯¹æœ¬æ–‡çš„æ¶¦è‰²åŠ å·¥ã€‚</p>



<p><strong>å„ä½è§‚ä¼—è€çˆ·ï¼Œæ‚¨æ˜¯å¦çœ‹å¥½ containerd å‘¢ï¼Ÿ</strong></p>
							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e6%8a%80%e6%9c%af/index.html" rel="category tag">è½¯ä»¶æŠ€æœ¯</a>			</span>
				<span class="sep"> | </span>
			
							<span class="taglinks">
				æ ‡ç­¾ï¼š <a href="./../../tag/containerd/index.html" rel="tag">containerd</a>			</span>
				<span class="sep"> | </span>
			
		
						<span class="comments-link"><a href="./../../containerd-will-replace-docker/index.html#respond">å‘è¡¨è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-27289 -->

							
								
<article id="post-27267" class="post-27267 post type-post status-publish format-standard hentry category-3">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../%e5%85%ac%e5%91%8a-%e5%8d%9a%e5%ae%a2%e9%87%8d%e5%bc%80%e4%ba%86/index.html" title="è¿ç»“åˆ°å…¬å‘Š &#8211; åšå®¢é‡å¼€äº†" rel="bookmark">å…¬å‘Š &#8211; åšå®¢é‡å¼€äº†</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../%e5%85%ac%e5%91%8a-%e5%8d%9a%e5%ae%a2%e9%87%8d%e5%bc%80%e4%ba%86/index.html" title="ä¸‹åˆ10:15" rel="bookmark">
							<time class="entry-date updated" datetime="2021-03-28T22:15:29+08:00">2021å¹´3æœˆ28æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								
<p>å°Šæ•¬çš„è¯»è€…ï¼Œåšå®¢é‡å¼€äº†ã€‚</p>



<p>â€œæˆ‘è‡ªç„¶â€œè¿™ä¸ªåšå®¢ï¼Œä»2008å¹´å¼€å§‹å†™ï¼Œåˆ°ç°åœ¨å·²ç»13å¹´äº†ã€‚æœŸé—´è®°å½•äº†ä¸å°‘ç‚¹ç‚¹æ»´æ»´ã€‚ä¸­é—´ä¸ä½†æ–­æ›´ï¼Œè€Œä¸”åšå®¢å›¾åºŠæ•°æ®ä¹Ÿè¢«åˆ é™¤äº†ã€‚ä¸è¿‡å¥½åœ¨ç»ˆäºæˆåŠŸæ¢å¤ã€‚æœªæ¥ä¼šæœ‰æ›´å¤šçš„ç²¾å½©å†…å®¹ã€‚</p>



<p>æœ€è¿‘è¿™ 6å¹´é—´ï¼Œç¬”è€…æ˜¯å»åˆ›ä¸š(<a href="http://www.daocloud.io/" data-type="URL" data-id="www.daocloud.io">DaoCloud</a>)å»äº†ï¼Œä¹‹æ‰€ä»¥æ–­æ›´ ä¸»è¦æ˜¯å› ä¸º â€œç‰¹åˆ«å¿™â€œ &#8211; çœŸçš„ç‰¹åˆ«å¿™ï¼Œåšå®¢åäº†3å¹´ï¼Œå´æ²¡æœ‰3ä¸ªå°æ—¶å»ä¿®ç†ï¼Œæ›´åˆ«ææ›´æ–°ä»€ä¹ˆæ–‡ç« äº†ã€‚ ä¸è¿‡å¯¹äºå·¥ä½œæ¥è¯´ï¼Œè¿™æ ·çš„å¿™æ³•æ˜¯ç—…æ€çš„ï¼Œè€Œä¸”ä¹Ÿä¸çŸ¥é“è¿˜è¦å¿™åˆ°ä»€ä¹ˆæ—¶å€™ã€‚æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£è¿˜æ˜¯æŠŠåšå®¢æ¡èµ·æ¥å§ã€‚</p>



<p>æ¥ä¸‹æ¥è¿™ä¸ªåšå®¢ï¼Œæˆ‘è¿˜æ˜¯ä¼šå¤šè°¢å†™ä¸€äº›æŠ€æœ¯å¹²è´§ï¼Œç©¿æ’ä¸€ç‚¹ç‚¹ç”Ÿæ´»æ•…äº‹ã€‚æœ‰äººä¼šé—® â€œæˆ‘è‡ªç„¶â€ è¿™ä¸ªåšå®¢æ ‡é¢˜æ˜¯ä»€ä¹ˆæ„æ€ã€‚â€œæˆ‘è‡ªç„¶â€œï¼Œæ˜¯ä¸€ç§è‡ªç„¶è€Œç„¶ï¼Œ æ€¡ç„¶å¿«ä¹çš„æ„Ÿè§‰ã€‚åœ¨ç°ä»£ç¤¾ä¼šæ¯ä¸ªäººéƒ½è¢«èµ„æœ¬æˆ–æ”¿æ²»å¼‚åŒ–ï¼Œå˜æˆäº†â€œäººåŠ›èµ„æºâ€ï¼Œâ€œèµ„æœ¬å®¶â€ è¿™äº›éè‡ªç„¶çš„å½¢è±¡ã€‚ é€šè¿‡è¯»ä¸€è¯»è¿™ä¸ªåšå®¢ï¼Œä¹Ÿå¸Œæœ›èƒ½å¤Ÿç»™è¯»è€…å›åˆ°æ›´è‡ªç„¶å¿«ä¹çš„æ„Ÿè§‰ã€‚</p>



<div class="wp-block-image"><figure class="alignleft size-large"><img loading="lazy" decoding="async" width="640" height="426" src="http://47.100.65.109/wp-content/uploads/2021/03/hailan.jpeg" alt="" class="wp-image-27271" srcset="./../../wp-content/uploads/2021/03/hailan.jpeg 640w, ./../../wp-content/uploads/2021/03/hailan-300x200.jpeg 300w" sizes="(max-width: 640px) 100vw, 640px"></figure></div>
							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e5%ae%b6%e5%ba%ad%e7%94%9f%e6%b4%bb/index.html" rel="category tag">å®¶åº­ç”Ÿæ´»</a>			</span>
				<span class="sep"> | </span>
			
			
		
						<span class="comments-link"><a href="./../../%e5%85%ac%e5%91%8a-%e5%8d%9a%e5%ae%a2%e9%87%8d%e5%bc%80%e4%ba%86/index.html#comments">1 æ¡è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-27267 -->

							
								
<article id="post-27189" class="post-27189 post type-post status-publish format-standard hentry category-5 tag-cloudfoundry tag-micro-cloudfoundry">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../cloudfoundry-v2-with-microcf/index.html" title="è¿ç»“åˆ°CloudFoundry v2é¢é¢è°ˆï¼Œå†…èµ MicroCFv2ç¦åˆ©" rel="bookmark">CloudFoundry v2é¢é¢è°ˆï¼Œå†…èµ MicroCFv2ç¦åˆ©</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../cloudfoundry-v2-with-microcf/index.html" title="ä¸‹åˆ7:39" rel="bookmark">
							<time class="entry-date updated" datetime="2014-02-06T19:39:32+08:00">2014å¹´2æœˆ6æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								
<p></p>


<p>CloudFoundry æ˜¯ä¸šç•Œé¢†å…ˆçš„PaaSäº‘å¹³å°ï¼Œå¯ä»¥ä¸ºåº”ç”¨æä¾›è¿è¡Œå¹³å°ï¼Œç±»ä¼¼äºè¿è¡Œç€æ— æ•°åº”ç”¨çš„ç‚™æ‰‹å¯çƒ­çš„HeroKuã€‚æœ€è¿‘å‘å¸ƒçš„ç¬¬äºŒä»£ï¼ŒåŠŸèƒ½ä¸Šæœ‰äº†æå¤§çš„æ‰©å……ï¼Œå¦‚BuildPack, Service Broker v2, loggregatorï¼Œå¹¶ä¸”ç”¨GoLangé‡å†™äº†å¤§éƒ¨åˆ†ç»„ä»¶æå‡æ€§èƒ½ï¼Œå¦‚GoRouter,CLI,HM9000ã€‚æœ¬æ–‡å¸¦æ‚¨èµ°è¿›è¿™ä¸ªå¤§è§‚å›­ã€‚è¿˜æä¾›ä¸€ä¸ªMicroCFv2ä¸‹è½½ï¼Œæ»¡è¶³æ‚¨è¯•ä¸€è¯•çš„æ„¿æœ›ï¼Œåªæ­¤ä¸€å®¶å“¦ã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27234" src="http://47.100.65.109/wp-content/uploads/2014/02/run-your-java-code-on-cloud-foundry-andy-piper-pivotal-16-638-300x225.jpeg" alt="" width="300" height="225" srcset="./../../wp-content/uploads/2014/02/run-your-java-code-on-cloud-foundry-andy-piper-pivotal-16-638-300x225.jpeg 300w, ./../../wp-content/uploads/2014/02/run-your-java-code-on-cloud-foundry-andy-piper-pivotal-16-638.jpeg 638w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>CloudFoundry v1å·²ç»å‡ºç°è¾ƒé•¿æ—¶é—´ï¼Œåœ¨ä¸‰å¹´å‰EMCä¸­å›½ç ”ç©¶é™¢å°±å‚ä¸å…¶ç ”ç©¶ã€‚å¯¹CloudFoundry v1çš„ç ”ç©¶å¯ä»¥å‚è§å½­éºŸã€Š<a href="http://qing.blog.sina.com.cn/tj/88ca09aa330004r8.html">æ·±å…¥ Cloud Foundry</a>ã€‹ã€‚åœ¨CloudFoundry v2è¯ç”Ÿå‰çš„ä¸‰å¹´é‡Œï¼Œä¸€äº›äº‹æƒ…å‘ç”Ÿäº†å·¨å˜ã€‚å¤–éƒ¨ç¯å¢ƒæ–¹é¢ï¼ŒAWSèµ°å‘æˆç†Ÿï¼ŒHerokué€æ¸æˆåŠŸï¼Œæ‘¸ç´¢åˆ°äº†PaaSæˆåŠŸçš„é“è·¯ã€‚OpenStacké£èµ·äº‘æ¶Œï¼ŒDockerå¸¦ç€å°ä¼™ä¼´ä»¬å¼‚å†›çªèµ·ã€‚é¢å¯¹è¿™äº›ï¼ŒCloudFoundryé¢ä¸´çš„ç«äº‰åŠ å‰§ï¼Œä½†åŒæ—¶ä¹Ÿæœ‰äº†å¯ä»¥é…åˆçš„ä¼™ä¼´ã€‚è€ŒCloudFoundryå†…éƒ¨ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ï¼ŒåŸå…ˆéš¶å±äºä¸“æ”»è™šæ‹ŸåŒ–çš„VmWareï¼Œç°åœ¨ä¸æ—¶ä¿±è¿›ï¼Œæˆä¸ºäº†ä¸“æ”»å¤§æ•°æ®çš„Pivotalçš„ä¸€éƒ¨åˆ†ã€‚è€ŒCloudFoundry v2æ˜¯CloudFoundryå½’äºPivotalçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œæˆä¸ºè¿™å®¶å…´æ–°å¤§æ•°æ®å…¬å¸çš„æˆ˜ç•¥ä¸€éƒ¨åˆ†ã€‚</p>
<p>å¦‚æœæƒ³è¯•è¯•CloudFoundryå…¬æœ‰äº‘ï¼Œå¯ä»¥åœ¨<a href="http://www.cloudfoundry.com/use">å®˜ç½‘</a>ä¸Šç”³è¯·è´¦æˆ·ã€‚ä¸‹æ–‡ä¸»è¦é’ˆå¯¹è‡ªå»ºCloudFoundryã€‚</p>
<h2>æ–°æ¶æ„</h2>
<p>æ˜¯éª¡å­æ˜¯é©¬ï¼Œçœ‹çœ‹æ¶æ„å°±æ‡‚äº†ã€‚åœ¨çœ‹ç¬¬äºŒä»£çš„æ¶æ„ä¹‹å‰ï¼Œæˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¹‹å‰çš„æ¶æ„ã€‚</p>
<p>ç”¨æˆ·é€šè¿‡VMC Clientå°†åº”ç”¨ä¸Šä¼ åˆ°Cloud Controller ä¸Šï¼ŒCloud Controllerå°†åº”ç”¨éƒ¨ç½²åˆ°DEA Poolä¸Šé¢ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡Routerè®¿é—®åˆ°å„è‡ªçš„åº”ç”¨ï¼ŒHealth ManageræŸ¥çœ‹å„ä¸ªAPPçŠ¶æ€ï¼Œä¿è¯å¯ä»¥è‡ªåŠ¨é‡å¯ã€‚åŒæ—¶Cloud Controllerè¿˜æä¾›äº†å„ç§Servicesï¼Œå¦‚MySQLï¼ŒRedisç­‰ç­‰ã€‚</p>
<p>åœ¨ä¸Šä¸€ä»£æ¶æ„ä¸­ï¼ŒCloudFoundryå‘ˆç°å‡ºå¤§åŒ…å¤§æ½çš„æ–¹å¼ï¼ŒAPPçš„éƒ¨ç½²ä¹Ÿå¥½ï¼ŒServiceçš„æä¾›ä¹Ÿå¥½ï¼Œéƒ½è‡ªå·±åšã€‚è™½ç„¶æ‰©å±•Runtimeå’ŒServiceå¹¶ä¸éº»çƒ¦ï¼Œä½†æ˜¯è¿™éœ€è¦â€œCloudFoundryâ€ç®¡ç†å‘˜çš„ä»‹å…¥ï¼Œç§Ÿæˆ·æ˜¯æ²¡æœ‰åŠæ³•åšè¿™äº›çš„ã€‚å¦å¤–ç§æœ‰äº‘çš„ç©å®¶å¾€å¾€éƒ½æœ‰ç€å®šåˆ¶Runtimeå’ŒServiceçš„éœ€æ±‚ï¼Œå†…ç½®çš„Serviceå¾ˆéš¾æ»¡è¶³éœ€è¦ã€‚å½“ç„¶è¿˜æœ‰ä¸€äº›é—®é¢˜ï¼Œå¦‚Routeræ€§èƒ½ä¸ä½³ï¼Œåè®®åŒ®ä¹ã€‚Health Managerå•ç‚¹ã€‚</p>
<p>åœ¨æ–°çš„æ¶æ„ä¸­ï¼ŒCloudFoundryæœ‰ç€æ›´åŠ å¼€æ”¾çš„ç©æ³•ã€‚</p>
<p>ç¬¬äºŒä»£CloudFoundryå‡ ä¹å°†V1æ—¶ä»£ç»„ä»¶å…¨éƒ¨é‡å†™ï¼Œæ»¡è¶³æ–°çš„éœ€è¦ã€‚</p>
<p>APPæ–¹é¢ï¼Œåœ¨ä¸Šä¼ åº”ç”¨çš„æ—¶å€™ï¼Œç”¨æˆ·å¯ä»¥åŒæ—¶ä¸Šä¼ ä¸€ä¸ªBuildPackï¼Œè¿™æ ·ç§Ÿæˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦æ¥éƒ¨ç½²åº”ç”¨ï¼Œæ— éœ€é€šçŸ¥äº‘ç®¡ç†å‘˜ã€‚BuildPackæ˜¯Herokuçš„éƒ¨ç½²æœºåˆ¶ï¼Œåœ¨ç¤¾åŒºæœ‰ç€ä¸°å¯Œçš„èµ„æºã€‚å› æ­¤CloudFoundryå’ŒHerokuæ˜¯å…¼å®¹çš„ã€‚å¯ä»¥éƒ¨ç½²åœ¨Herokuä¸Šçš„åº”ç”¨ï¼Œä¹Ÿå¯ä»¥éƒ¨ç½²åœ¨CloudFoundryä¸Šã€‚è¿˜æœ‰å¾ˆå¤šå…¶ä»–PaaSä¹Ÿä½¿ç”¨BuildPackï¼ŒBuildPackå·²ç»æˆä¸ºPaaSåº”ç”¨éƒ¨ç½²çš„äº‹å®æ ‡å‡†ã€‚</p>
<p>Serivceæ–¹é¢ï¼Œä¸å†å†…å»ºServiceï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€ä¸ªæ›´åŠ ç®€æ´çš„Service Brokerå’ŒUser Provided Serviceè®¾è®¡ã€‚ç”¨æˆ·å¯ä»¥å°†Service Brokerä½¿ç”¨ç°æœ‰çš„XaaSä¸Šé¢ï¼Œå¦‚æœOpenStack Trove, AWS RDSã€‚Heroku æœ‰å¾ˆå¤š<a href="https://addons.heroku.com/">å°ä¼™ä¼´ä»¬</a>Â å¯ä»¥æä¾›å„ç§å„æ ·çš„Serviceï¼Œæ¯”å¦‚ç›‘æ§æœåŠ¡Relic,å›½å†…ä¹Ÿæœ‰å¾ˆå¤šï¼Œå¦‚ç›‘æ§å®ã€‚GAEå¼çš„PaaSè¯æ˜å…³é—¨ç©Serviceæ˜¯ä¸è¡Œçš„ï¼ŒCloudFoundryèµ°å‘äº†å¼€æ”¾çš„é“è·¯ã€‚å¦å¤–User Provided Serviceå¯ä»¥è®©æ¥ä¸Šç”¨æˆ·ç°æœ‰æœåŠ¡ï¼Œå¦‚Oracleï¼Œä¿æŠ¤ç°æœ‰èµ„äº§ã€‚</p>
<p>å¤§æ•°æ®æ·±å…¥äººå¿ƒï¼ŒCloudFoundryç°åœ¨çš„loggregatorå¯ä»¥è®©åº”ç”¨çš„æ—¥å­æµè¿›Serviceä¸­ã€‚å®æ—¶æ•°æ®åˆ†ææˆä¸ºå¯èƒ½ã€‚</p>
<p>æ–°çš„çš„CloudFoundryå¯¹è¿è¡Œåœ¨IaaSæœ‰ç€å¤©ç”Ÿçš„äº²å’ŒåŠ›ã€‚BOSHå¯ä»¥éå¸¸æ–¹ä¾¿çš„éƒ¨ç½²CFã€‚Routerçš„æ€§èƒ½ç“¶é¢ˆå¾—åˆ°è§£å†³ã€‚UAAå¯ä»¥æä¾›ç¬¬ä¸‰æ–¹è®¤è¯ã€‚Health Managerä¹Ÿä¸å†æ˜¯å•ç‚¹ã€‚</p>
<h2>å¼€æ”¾çš„App Runtime</h2>
<p>å¼€æ”¾çš„App Runtimeçš„åŠ›é‡æ¥è‡ªå¦‚Build Packã€‚æˆ‘ä»¬å¯ä»¥æµè§ˆå…ˆApp éƒ¨ç½²çš„å…¨è¿‡ç¨‹ã€‚</p>
<p>Â </p>
<ol>
<li>ç”¨æˆ·ä½¿ç”¨ä½¿ç”¨CF PUSHå‘½ä»¤ä¸Šä¼ åº”ç”¨</li>
<li>CLIå‘ŠçŸ¥CCNGåˆ›å»ºä¸€ä¸ªåº”ç”¨</li>
<li>CCNGåœ¨æ•°æ®åº“ä¸­åŠ å…¥è¯¥åº”ç”¨çš„è®°å½•ä¾‹å¦‚åº”ç”¨åç§°ï¼ŒBuildPacké€‰æ‹©</li>
<li>CLIä¸Šä¼ ç¨‹åº</li>
<li>CCNGå°†ç¨‹åºå­˜èµ·æ¥</li>
<li>CLIå¯åŠ¨åº”ç”¨</li>
<li>ç”±äºåº”ç”¨å°šæœªéƒ¨ç½²ï¼Œæ‰€ä»¥CCNGæ‰¾ä¸€å°DEAï¼Œåœ¨è¯¥DEAå†…æ‰§è¡ŒBuildPackæ¥éƒ¨ç½²åº”ç”¨</li>
<li>DEAè¾“å‡ºè¿è¡ŒBuildPackçš„ä¿¡æ¯</li>
<li>BuildPackæ‰§è¡Œå®Œæ¯•ï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªDropLetæ–‡ä»¶(ç¼–è¯‘æ‰“åŒ…çš„ç»“æœ)ï¼ŒDEAå°†è¯¥æ–‡ä»¶å­˜èµ·æ¥</li>
<li>DEAå°†æ‰“åŒ…æƒ…å†µæ±‡æŠ¥ç»™CCNG</li>
<li>CCNGé€‰æ‹©ä¸€ä¸ªDEAæ¥éƒ¨ç½²åº”ç”¨</li>
<li>åº”ç”¨åœ¨DEAä¸­è¿è¡Œï¼Œè¿è¡Œç»“æœè¾“å‡ºåˆ°CCNG</li>
</ol>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒBuildPackå’ŒAPPä¸€æ ·éƒ½æ˜¯åœ¨ä¸€æ ·çš„ç¯å¢ƒ(DEA)ä¸­æ‰§è¡Œçš„ã€‚BuildPackéå¸¸ç®€æ´ï¼Œåªéœ€è¦ä¸‰ä¸ªè„šæœ¬ã€‚</p>
<ul>
<li>bin/detect ç”¨æ¥åˆ¤æ–­è¯¥BuildPackæ˜¯å¦æ”¯æŒè¯¥ç¨‹åº</li>
<li>bin/compile ç”¨æ¥ç¼–è¯‘ï¼Œç±»ä¼¼Mavençš„mvn compile</li>
<li>bin/release ç”¨æ¥æ‰“åŒ…ï¼Œç±»å‹Mavençš„mvn package</li>
</ul>
<p>ç°åœ¨CloudFoundryå†…å»ºäº†ä¸‰ä¸ªä¸»è¦BuildPackï¼ŒJava BuildPackæ˜¯è‡ªåˆ¶ï¼ŒRubyå’ŒNodeJséƒ½æ˜¯æ²¿ç”¨Herokuçš„</p>
<ul>
<li>
<a href="https://github.com/cloudfoundry/java-buildpack">Java BuildPack</a>Â æ”¯æŒéå¸¸å¤šæ¡†æ¶å’ŒJVMè¯­è¨€ã€‚ç”šè‡³åŒ…æ‹¬new_relicï¼Œè¿™ç»™æˆ‘ä»¬ç›‘æ§CloudFoundryä¸ŠAPPæä¾›æ€è·¯ã€‚</li>
<li><a href="https://github.com/cloudfoundry/heroku-buildpack-ruby">Ruby BuildPack</a></li>
<li><a href="https://github.com/cloudfoundry/heroku-buildpack-nodejs">NodeJs BuildPack</a></li>
</ul>
<p>å¾—ç›ŠäºHerokuçš„æµè¡Œï¼Œç¬¬ä¸‰æ–¹çš„BuildPackå°±æ•°ä¸èƒœæ•°äº†ã€‚å¯ä»¥åœ¨<a href="https://devcenter.heroku.com/articles/third-party-buildpacks">HerokuÂ buildpacks</a>Â å’Œ<a href="https://github.com/cloudfoundry-community/cf-docs-contrib/wiki/Buildpacks"> CloudFoundryÂ CommmunityÂ </a>ä¸­æ‰¾åˆ°å¾ˆå¤šã€‚</p>
<p>Build Packæœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ¯æ¬¡ç¼–è¯‘éƒ½éœ€è¦ä»å¤–ç½‘ä¸‹è½½ä¾èµ–ï¼Œå·¨å¤§JREæ–‡ä»¶å’Œä¸ç¨³å®šçš„ç½‘ç»œä¼šä½¿éƒ¨ç½²å¤±è´¥ã€‚ä¸è¿‡æœ€è¿‘çš„å‘å¸ƒä¸­æä¾›äº†Build Pack CacheåŠŸèƒ½ï¼Œå¯ä»¥æœ‰æ•ˆè§£å†³è¿™ä¸ªé—®é¢˜ã€‚åœ¨å†…ç½‘ä¸­æ­å»ºä¸€ä¸ªCached Proxyä¹Ÿæ˜¯ä¸é”™çš„åŠæ³•ã€‚</p>
<h2>å¼€æ”¾çš„Service</h2>
<p>CF-Relaseæ˜¯CloudFoundryçš„å‘å¸ƒåŒ…ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸‹V1å’Œæœ€è¿‘çš„å‘å¸ƒåŒ…ã€‚</p>
<table>
<tbody>
<tr>
<th>Â </th>
<th><a href="https://github.com/cloudfoundry/cf-release/tree/v1/jobs">v1</a></th>
<th><a href="https://github.com/cloudfoundry/cf-release/tree/v155/jobs">v2(ä¾æ®v155)</a></th>
</tr>
<tr>
<td>CloudFoundry Coreç»„ä»¶æ•°é‡</td>
<td>29</td>
<td>21</td>
</tr>
<tr>
<td>Serviceæ•°é‡</td>
<td>24</td>
<td>Â 0</td>
</tr>
</tbody>
</table>
<p>å¯è§åœ¨v1ç‰ˆæœ¬ä¸­æœ‰å¤§é‡çš„ç»„ä»¶æ˜¯åœ¨åšServiceï¼Œæ‘Šå­é“ºçš„å¾ˆå¤§ã€‚è€ŒV2ä¸­å°†è¿™ä¸ªåŒ…è¢±æ”¾ä¸‹ï¼Œæäº¤ç»™å„ç§ç¬¬ä¸‰æ–¹XaaSäº†ã€‚è¿æ¥XaaSå’ŒCloudFoundryçš„ä¸­é—´ç»„ä»¶è¢«ç§°ä¸ºCloudFoudry Â Brokerã€‚v2çš„Service Brokerå’Œv1çš„å®Œå…¨ä¸åŒã€‚V2ä¸­çš„è®¾è®¡å¦‚ä¸‹ã€‚</p>
<p>Â </p>
<p>ä¸€ä¸ªService Broker éœ€è¦å®ç°5ä¸ªAPIæ¥å£ï¼ŒåŒ…å«ä¸‰æ–¹é¢</p>
<ul>
<li>Serviceå‘ç°ã€‚ç§Ÿæˆ·å¯ä»¥å‘ClouldFoundryæäº¤Add Service å‘½ä»¤ï¼Œå‚æ•°æ˜¯URLã€‚ç„¶åClouldFoundryå»è°ƒç”¨è¯¥URLï¼Œå‘ç°è¯¥URLåŒ…å«å“ªäº›Service</li>
<li>Serviceåˆ›å»º/åˆ é™¤ã€‚è‡ªåŠ¨åŒ–çš„åˆ›å»ºServiceã€‚</li>
<li>Serviceç»‘å®š/è§£ç»‘å®šã€‚å°†Serviceçš„ä¸€äº›è®¿é—®å‚æ•°è®¾å®šæˆAPPçš„ç¯å¢ƒå˜é‡ã€‚</li>
</ul>
<p>Service Brokerçš„éƒ¨ç½²å¯ä»¥å¾ˆçµæ´»ã€‚æ—¢å¯ä»¥ä½œä¸ºCloudFoundryçš„ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºCloudFoundryçš„APPè¿è¡Œåœ¨CloudFoundryä¸Šã€‚å®˜æ–¹æä¾›äº†ä¸€äº›Service Broker å®ç°å®ä¾‹ã€‚</p>
<ul>
<li><a href="https://github.com/cloudfoundry-samples/github-service-broker-ruby">GitHub repo service</a></li>
<li><a href="https://github.com/cloudfoundry/cf-mysql-release">MySQL database service</a></li>
<li><a href="https://github.com/cloudfoundry-community/spring-service-broker">Spring Service Broker</a></li>
<li><a href="https://github.com/cloudfoundry-community/cf-mysql-java-broker">MySQL Java Broker</a></li>
</ul>
<p>åœ¨ä¼ä¸šç”Ÿäº§ç¯å¢ƒä¸­ï¼ŒServiceçš„è‡ªåŠ¨åŒ–åˆ›å»ºå¹¶éæ˜“äº‹ã€‚ä¸¾MySQLä¾‹å­ï¼Œé€‰æ‹©ç‰ˆæœ¬ï¼Œæœºå™¨ï¼Œç½‘ç»œï¼Œå­˜å‚¨ï¼Œå¤‡ä»½ç­–ç•¥ï¼Œé«˜å¯ç”¨æ–¹æ¡ˆï¼Œæä¸Šé˜²ç«å¢™ï¼Œæ‰“ä¸Šè‡ªå®šä¹‰è¡¥ä¸ç­‰ç­‰ï¼Œä¸€åƒä¸ªç”Ÿäº§ç¯å¢ƒæœ‰ä¸€åƒç§ä¸ªMySQLç©æ³•ã€‚åœ¨ç°åœ¨çš„ç©æ³•ä¸­ï¼Œéœ€è¦äººä»‹å…¥çš„ç¯èŠ‚å¤ªå¤šï¼Œå¤ªæœ‰å¿…è¦ã€‚ä¸å­˜åœ¨ä¸€æ‹›é²œåƒéå¤©çš„è‡ªåŠ¨åŒ–åˆ›å»ºæ–¹æ³•ã€‚User Â Provided Service å°±æ˜¯æ¥è°ƒå’Œè¿™ä¸ªçŸ›ç›¾ã€‚è®©Cloudã€€Foundryä¸å¼ºä¾èµ–è‡ªåŠ¨åŒ–çš„åˆ›å»ºServiceã€‚</p>
<p>User Â Provided Service å¾ˆç®€å•ï¼Œå°±æ˜¯ç”¨æˆ·åœ¨åˆ›å»ºServiceçš„æ—¶å€™ï¼Œè¾“å…¥Serviceè®¿é—®å‚æ•°ã€‚å¦‚ç”¨æˆ·åï¼Œå¯†ç ï¼ŒCloudFoundryæŠŠè¿™å‚æ•°å­˜èµ·æ¥ï¼Œåœ¨ç»‘å®šçš„æ—¶å€™æ³¨å…¥åˆ°ç¯å¢ƒå˜é‡ä¸­ã€‚ä¸‹é¢ä¼šæ¼”ç¤ºã€‚</p>
<h2>äº²æ˜µçš„å¤§æ•°æ®</h2>
<p>å›½å†…çš„CloudFoundryç©å®¶å¤§å¤šæœ‰å¼€æ”¾å¹³å°çš„è®¡åˆ’ã€‚ä½œä¸ºå¼€å‘å¹³å°çš„è¿è¥è€…ï¼Œä¸åªè¦æä¾›ä¸€ä¸ªç¨³å®šï¼Œå¼€æ”¾çš„å¹³å°ï¼Œè·å¾—åº”ç”¨çš„æ•°æ®ï¼Œå°±ç­‰äºæŠŠæ¡ä½äº†è„‰æã€‚Pivotalåšä¸ºä¸€å®¶å¤§æ•°æ®å…¬å¸ï¼Œæ¥æ‰‹CloudFoundryçš„ä¸€ä¸ªå¤§æ”¹è¿›å°±æ˜¯å¢åŠ äº†Loggragtoræ¨¡å—ã€‚</p>
<p><span style="line-height: 1.5em;">Â </span></p>
<p>Loggregatoræœ‰æ˜¯æ•°æ®çš„ä¸­è½¬ç«™ã€‚æ•°æ®å¯ä»¥æ¥è‡ªåº”ç”¨å’ŒCloudFoundryçš„è‡ªèº«ç»„ä»¶ã€‚å’ŒSysLogä¸åŒï¼ŒLogæ ¹æ®APPåˆ†ç¦»ï¼Œæ‰€ä»¥äº§ç”Ÿçš„æ•°æ®æ˜¯ä¸ºAPPæœåŠ¡ï¼Œè€Œä¸æ˜¯ä¸ºCloudFoundryç³»ç»Ÿæœ¬èº«æœåŠ¡ã€‚</p>
<p>å¼•å…¥äº†Loggregatoråï¼Œç”¨æˆ·åœ¨åˆ›å»ºServiceçš„æ—¶å€™ï¼ŒServiceå¯ä»¥è¿”å›ä¸€ä¸ªSysLog URLã€‚å½“è¯¥Serviceç»‘å®šåˆ°æŸä¸€ä¸ªåº”ç”¨ï¼Œè¯¥åº”ç”¨çš„Logä¼šé¡ºç€è¿™ä¸ªURLæºæºä¸æ–­æµå…¥ã€‚è¿™ä¸ªServiceå¯ä»¥è¯´Splunkä¹Ÿå¯ä»¥è¯´Pivotal Analytics. Herokuä¹Ÿæœ‰äº†è¿™ä¸ªæœºåˆ¶ã€‚ç”¨æˆ·çš„å¤§æ•°æ®åº”ç”¨å°±å¯ä»¥æ— ç¼æ¥å…¥äº†ã€‚</p>
<p>Loggregatoræä¾›æ¨(SysLog)ï¼Œæ‹‰(WebScoket)ä¸¤ç§æ–¹å¼æ¥è·å¾—æ•°æ®ã€‚æ–°çš„CF CLIå°±æ˜¯ä½¿ç”¨Loggregatorçš„WebSocketæ¥è·å¾—APPçš„Logä¿¡æ¯ã€‚</p>
<h2>éƒ¨ç½²-MicroCFv2ç¦åˆ©</h2>
<p>ä¸é¿è®³çš„è¯´ï¼Œéƒ¨ç½²CloudFoundry v2çš„éš¾åº¦å¤§äºv1ã€‚</p>
<p>åœ¨v1ä¸­æœ‰dev_setupï¼Œæä¾›ä¸€ä¸ªåŸºäºChefçš„ä¸€é”®è„šæœ¬å¯ä»¥è½»æ¾éƒ¨ç½²ã€‚è€Œv2ä¸­ä¾èµ–BOSHï¼Œä¸€ä¸ªä¸€ç«™å¼çš„è§£å†³æ–¹æ¡ˆã€‚å¯ä»¥å°†CloudFoundryéƒ¨ç½²åœ¨VSphereï¼ŒOpenStackå’ŒAWSä¸Šã€‚</p>
<p>ç›®å‰çœ‹æ¥æœ‰ä¸‰ç§éƒ¨ç½²æ–¹å¼</p>
<ul>
<li>ä½¿ç”¨BOSHï¼ŒBOSHæ¯”è¾ƒé‡ï¼Œè¿è¡Œèµ·æ¥å°±è¦è´¹ä¸€äº›å¿ƒåŠ›ã€‚ä½†è¿è½¬èµ·æ¥åå¯ä»¥æä¾›å¥åº·ç›‘æ§ï¼Œæ‰©å®¹çš„æ”¯æŒã€‚</li>
<li>ä½¿ç”¨IaaSè‡ªå¸¦çš„éƒ¨ç½²æœºåˆ¶ï¼Œå¯ä»¥ä½¿ç”¨VSphere OVF,OpenStack Â Heat,Aws Cloudformationç­‰æŠ€æœ¯ã€‚éƒ¨ç½²æ–¹ä¾¿ï¼Œä½†ç»‘å®šIaaSã€‚</li>
<li>æ‰‹åŠ¨ä¸€æ­¥æ­¥å®‰è£…ã€‚æœ€çµæ´»ï¼Œä¹Ÿæœ€è´¹åŠ›ã€‚å¯ä»¥è€ƒè™‘å’ŒPuppetç­‰æœºåˆ¶ç»“åˆã€‚</li>
</ul>
<p>ç”±äºå®˜æ–¹ä¸å†æä¾›æ–°ç‰ˆæœ¬dev_setupï¼Œè¯•ä¸€è¯•CloudFoundryçš„æˆæœ¬å˜å¾—å¾ˆé«˜ã€‚ç¬”è€…æä¾›äº†ä¸€ä¸ª<a href="http://pan.baidu.com/s/1sj6jxd7">MicroCFv2é•œåƒ</a>,è¯·ä½¿ç”¨7-zipè§£å‹</p>
<p><strong>MicroCFv2ä¸‹è½½</strong>Â (åŸºäº<a href="https://github.com/cloudfoundry/cf-release/tree/v154">v154</a>)</p>
<h3><span style="line-height: 1.5em;">è¿è¡ŒMicroCF</span></h3>
<ol>
<li>å®‰è£…<a href="http://www.vmware.com/cn/products/player/">VMware Player</a>
</li>
<li>ä¸‹è½½<a href="http://pan.baidu.com/s/1sj6jxd7">MicroCFv2</a>
</li>
<li>ä½¿ç”¨è¯¥é•œåƒå¯åŠ¨ä¸€å°è™šæ‹Ÿæœº</li>
<li>ä½¿ç”¨ç”¨æˆ·å/å¯†ç (admin/admin)ç™»å½•</li>
</ol>
<p>æ£€æŸ¥ç½‘ç»œï¼Œæ­£å¸¸æƒ…å†µä¸‹è™šæ‹Ÿæœºä¼šé€šè¿‡DHCPè·å¾—IPåœ°å€ã€‚è®°ä¸‹IPã€‚ç¼–è¯‘åº”ç”¨éœ€è¦è®¿é—®å¤–ç½‘ã€‚</p>
<pre lang="bash">admin@atsg2-sh199:~/env$ ifconfig 
eth0      Link encap:Ethernet  HWaddr 00:50:56:98:7f:0a  
          inet addr:10.32.170.199  Bcast:10.32.170.255  Mask:255.255.255.0
</pre>
<h3>éƒ¨ç½²ä¸€ä¸ªJava APP</h3>
<pre lang="bash">admin@atsg2-sh199:~$ cd /home/admin
admin@atsg2-sh199:~$ cf login      
API endpoint&gt; api.cf.com
Username&gt; admin
Password&gt; admin

admin@atsg2-sh199:~$ cf push helloworld -p helloworld.war 
App started
urls: helloworld.cf.com

     state     since                    cpu    memory        disk          
#0   running   2014-02-06 11:52:18 PM   0.0%   60.8M of 1G   95.1M of 1G 

admin@atsg2-sh199:~$ curl helloworld.cf.com</pre>
<h1>helloworld</h1>
<pre lang="bash">Â </pre>
<h3>åˆ›å»ºä¸€ä¸ªService</h3>
<pre lang="bash">admin@atsg2-sh199:~/env$ cf create-user-provided-service oracle-db-mine -p '{"username":"admin","password":"pa55woRD"}'
OK
admin@atsg2-sh199:~/env$ cf bind-service helloworld oracle-db-mine             
OK
</pre>
<h3>éƒ¨ç½²ä¸€ä¸ªRuby APPï¼Œå¹¶æŸ¥çœ‹ç¯å¢ƒå˜é‡</h3>
<p>éƒ¨ç½²Ruby APPï¼Œéœ€è¦è®¿é—®ç½‘ç»œã€‚<br>è¿™ä¸ªAPPå¯ä»¥æ˜¾ç°ä»–è‡ªå·±çš„æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚</p>
<pre lang="bash">admin@atsg2-sh199:~$ cd /home/admin/env
admin@atsg2-sh199:~/env$sudo  bundle install 
admin@atsg2-sh199:~/env$ cf push 
requested state: started
urls: env.cf.com
     state     since                    cpu    memory          disk          
#0   running   2014-02-07 12:14:18 AM   0.0%   18.1M of 128M   53.2M of 1G   
admin@atsg2-sh199:~/env$ cf bind-service env oracle-db-mine             
OK
admin@atsg2-sh199:~/env$ cf restart env
OK
admin@atsg2-sh199:~/env$ curl env.cf.com
...
VCAP_APP_HOST:
{  "user-provided": [
    { "name": "oracle-db-mine",
      "label": "user-provided",
      "tags": [],
      "credentials": {
        "password": "pa55woRD",
        "username": "admin"
      },
      "syslog_drain_url": ""
}]}
...
</pre>
<h3>è®¾ç½®æµè§ˆå™¨</h3>
<p>ä½ å¯ä»¥ä½¿ç”¨æµè§ˆå™¨è®¿é—®ä½ éƒ¨ç½²çš„åº”ç”¨ã€‚éœ€è¦ç»™æµè§ˆå™¨è®¾ç½®HTTPä»£ç†ã€‚IPä¸ºMicroCFv2çš„IP,ç«¯å£æ˜¯8123.å¦‚ï¼š<br><br></p>
<p>è¿™æ ·å°±å¯ä»¥ä½¿ç”¨æµè§ˆå™¨äº†ã€‚<br><br></p>
<p>ä½¿ç”¨æ„‰å¿«ã€‚å¦‚æœé‡åˆ°é—®é¢˜ï¼Œå¯ä»¥è”ç³»æˆ‘ã€‚</p>							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e6%8a%80%e6%9c%af/index.html" rel="category tag">è½¯ä»¶æŠ€æœ¯</a>			</span>
				<span class="sep"> | </span>
			
							<span class="taglinks">
				æ ‡ç­¾ï¼š <a href="./../../tag/cloudfoundry/index.html" rel="tag">CloudFoundry</a>, <a href="./../../tag/micro-cloudfoundry/index.html" rel="tag">Micro CloudFoundry</a>			</span>
				<span class="sep"> | </span>
			
		
						<span class="comments-link"><a href="./../../cloudfoundry-v2-with-microcf/index.html#comments">5 è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-27189 -->

							
								
<article id="post-26821" class="post-26821 post type-post status-publish format-standard hentry category-5 tag-docker tag-paas">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../docker-paas-for-any-application/index.html" title="è¿ç»“åˆ°Dockerèƒ½å¤Ÿè¿è¡Œä»»ä½•åº”ç”¨çš„â€œPaaSâ€äº‘" rel="bookmark">Dockerèƒ½å¤Ÿè¿è¡Œä»»ä½•åº”ç”¨çš„â€œPaaSâ€äº‘</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../docker-paas-for-any-application/index.html" title="ä¸‹åˆ3:35" rel="bookmark">
							<time class="entry-date updated" datetime="2013-09-17T15:35:09+08:00">2013å¹´9æœˆ17æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								<h3>Docker ç®€ä»‹</h3>
<p><a href="http://www.docker.io/">Docker </a>æ˜¯ä¸€ä¸ªå¼€æºå¯ä»¥å°†<strong>ä»»ä½•åº”ç”¨</strong>åŒ…è£…åœ¨&#8221;LXCå®¹å™¨â€ä¸­è¿è¡Œçš„å·¥å…·ã€‚å¦‚æœè¯´VMware,KVMåŒ…è£…çš„è™šæ‹Ÿæœºï¼ŒDockeråŒ…è£…çš„æ˜¯åº”ç”¨ã€‚æ˜¯ä¸€ä¸ªå®è‡³åå½’çš„PaaSã€‚</p>
<p>å½“åº”ç”¨è¢«æ‰“åŒ…æˆDocker Imageåï¼Œéƒ¨ç½²å’Œè¿ç»´å°±å˜å¾—æå…¶ç®€å•ã€‚å¯ä»¥ä½¿ç”¨<strong>ç»Ÿä¸€çš„æ–¹å¼ </strong>æ¥ä¸‹è½½ï¼Œå¯åŠ¨ï¼Œæ‰©å±•ï¼Œåˆ é™¤ï¼Œè¿ç§»ã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27237" src="http://47.100.65.109/wp-content/uploads/2013/09/homepage-docker-logo-300x248.png" alt="" width="300" height="248" srcset="./../../wp-content/uploads/2013/09/homepage-docker-logo-300x248.png 300w, ./../../wp-content/uploads/2013/09/homepage-docker-logo.png 400w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>Dockå¯ä»¥ç”¨æ¥ï¼š</p>
<ul>
<li>è‡ªåŠ¨åŒ–æ‰“åŒ…å’Œéƒ¨ç½²ä»»ä½•åº”ç”¨</li>
<li>åˆ›å»ºä¸€ä¸ªè½»é‡çº§ç§æœ‰PaaSäº‘</li>
<li>æ­å»ºå¼€å‘æµ‹è¯•ç¯å¢ƒ</li>
<li>éƒ¨ç½²å¯æ‰©å±•çš„Webåº”ç”¨</li>
</ul>
<p>Dockeræ˜¯å¼€æºçš„ï¼Œå¯ä»¥åœ¨<a href="https://github.com/dotcloud/docker/">GitHub</a>ä¸Šè®¿é—®å…¶ä»£ç ï¼Œæä¾›Restfulæ¥å£ã€‚ä»–çš„è´¡çŒ®è€…æ˜¯ä¸€ä¸ªéå¸¸æµè¡Œçš„PaaSäº‘æä¾›å•†Â <a href="https://dotcloud.com/">https://dotcloud.com/</a></p>
<h3>PaaS çš„æ ¸å¿ƒä»·å€¼</h3>
<h4>é—å¤±çš„æ–¹å‘ &#8211;Â ç»å¤§éƒ¨åˆ†åº”ç”¨ç«Ÿç„¶ä¸èƒ½æ— ç¼è¿ç§»åˆ°ä¸»æµPaaSä¸Š</h4>
<p>äº‘è®¡ç®—å‘å±•å¤šå¹´ï¼Œåˆ†ä¸ºIaaS,PaaSå’ŒSaaSã€‚å…¶ä¸­PaaSï¼ˆå¹³å°å³æœåŠ¡ï¼‰æœ€ä¸ºä¸æ„ ä¸ç«ã€‚ç¬”è€…å› ä¸ºï¼Œæœ€å¤§çš„åŸå› æ˜¯PaaSç»™äºº(å¼€å‘ï¼Œè¿ç»´ï¼Œè€æ¿)å¸¦æ¥çš„ä»·å€¼ä¸å¤Ÿå¤šï¼Œç§æœ‰PaaSé—¨æ§›é«˜ï¼æœ€å¤§çš„é—®é¢˜åœ¨äºç»å¤§éƒ¨åˆ†åº”ç”¨ç«Ÿç„¶ä¸èƒ½æ— ç¼è¿ç§»åˆ°PaaSä¸Šã€‚</p>
<p>Herokuæ˜¯æœ€æµè¡Œçš„å…¬æœ‰PaaSäº‘ã€‚å¾ˆå»‰ä»·å¥½ç”¨ï¼Œå¯æ˜¯å¤§éƒ¨åˆ†åº”ç”¨éƒ½æ— æ³•éƒ¨ç½²ã€‚æ¯ä¸ªåº”ç”¨åªèƒ½ç›‘å¬ä¸€ä¸ªHTTPç«¯å£ï¼Œåº”ç”¨ä¹‹é—´ä¸èƒ½äº¤äº’ã€‚ä»–å¯ä»¥ä¸ºä½ è‡ªåŠ¨æ‰©å±•å’Œè´Ÿè½½å‡è¡¡ï¼Œä½†å…¶å®æ²¡å¾—é€‰æ‹©ï¼Œåªè¦ä½¿ç”¨Herokuå°±å¿…é¡»æ¥å—é™åˆ¶ã€‚å¥½æ­¹Herokuæ”¯æŒç»å¤§éƒ¨åˆ†å¹³å°å¦‚Java,Pythonã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒGAEæ›´ç”šï¼Œåªæ”¯æŒä¸‰ä¸ªå¹³å°ï¼Œä¸èƒ½è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œä¹Ÿä¸èƒ½å¯åŠ¨å­è¿›ç¨‹ã€‚</p>
<p>CloudFoundryæ˜¯æ¯”è¾ƒæµè¡Œçš„ç§æœ‰PaaSäº‘ã€‚é™åˆ¶å’ŒHerokuä¸€æ ·å¤šï¼Œéƒ¨ç½²æ¯”è¾ƒå¤æ‚ã€‚ä¸ºæ­¤ä»–ç”šè‡³æœ‰ä¸€ä¸ªé‡èº«å®šåˆ¶çš„éƒ¨ç½²å·¥å…·BOSHã€‚æœ‰å¤šéš¾ç”¨ï¼Œç”¨è¿‡çš„äººéƒ½çŸ¥é“ã€‚è¿™ä¸ªä¸èƒ½æ€ªå¼€å‘äººå‘˜ï¼Œä»–å®šä¹‰çš„PaaSæœ¬æ¥å°±è¿™ä¹ˆå¤æ‚ã€‚</p>
<h4>PaaSè¦å®ç°å¼€å‘äººå’Œè¿ç»´äººçš„æ¢¦</h4>
<h5>å¼€å‘äººçš„æ¢¦ &#8211; è‡ªåœ¨çš„è¿è¡Œç¯å¢ƒï¼Œæ— é™çš„èµ„æº</h5>
<p>å¼€å‘äººå¸Œæœ›ä¸“æ³¨äºç¨‹åºé€»è¾‘ã€‚æœ‰è‡ªç”±è‡ªåœ¨çš„è¿è¡Œç¯å¢ƒï¼Œæœ‰ä¸°å¯Œçš„å¤–éƒ¨èµ„æºå¦‚å„ç§ä¸­é—´ä»¶ã€‚è‡³å°‘ä¸è¦ä¸ºä»€ä¹ˆ ç«¯å£ç›‘å¬æ•°ç›®ï¼Œé€šä¿¡åè®®é™åˆ¶ è¿™äº›äº‹æƒ…æ‰€å›°æ‰°ã€‚</p>
<h5>è¿ç»´äººçš„æ¢¦ &#8211; æ²¡æœ‰æ•…éšœå’Œé‡å¤çš„äº‹ï¼Œå‡å°‘ç­‰å¾…</h5>
<p>è¿ç»´å¤©å¤©å¤„ç†æ•…éšœï¼Œå¦‚æœåƒåƒä¸‡åº”ç”¨éƒ½èƒ½ä»¥åŒæ ·çš„æ–¹å¼éƒ¨ç½²ï¼Œè¿ç»´ã€‚é‚£ä¹ˆæ•…éšœçš„å¤„ç†å°±ç®€å•å¤šäº†ï¼Œé‡å¤çš„äº‹æƒ…ä¹Ÿä¼šå˜å°‘ã€‚ä¸‹è½½éƒ¨ç½²ï¼Œå®‰è£…ä¾èµ–ï¼Œè¿™äº›äº‹æƒ…éƒ½å¤ªè¿‡ç¹çè€—æ—¶äº†ã€‚</p>
<h5>DockeråŠŸèƒ½</h5>
<p>Dockerå¯ä»¥è®©å¼€å‘å’Œè¿ç»´éƒ½å˜å¾—ç®€å•ã€‚</p>
<p>å¼€å‘è€…ä¸å¿…è¦åƒä½¿ç”¨ä¸€èˆ¬PaaSä¸€æ ·åœ¨å……æ»¡ç€é™åˆ¶çš„æ¡ä»¶ä¸‹å¼€å‘åº”ç”¨ï¼Œå¯ä»¥å°±å¦‚åŒå¹³å¸¸ä¸€æ ·ï¼Œè‡ªç”±çš„ä½¿ç”¨å„ç§èµ„æºã€‚è€å­è¯´â€œå¤ªä¸Šä¸‹çŸ¥æœ‰ä¹‹ ï¼Œå…¶æ¬¡èª‰ä¹‹ï¼Œå…¶æ¬¡ä¾®ä¹‹â€ã€‚Dockå¯¹äºå¼€å‘è€…å°±æ˜¯â€œä¸‹çŸ¥æœ‰ä¹‹â€çš„çŠ¶æ€ã€‚</p>
<p>çˆ½çš„äººæ˜¯è¿ç»´ã€‚è¦ä½¿ç”¨Dockerï¼Œéœ€è¦åœ¨æœºå™¨ä¸Šå®‰è£…Docker Engineï¼Œ</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªContainerã€‚å®é™…ä¸Šæ˜¯ä¸€ä¸ªLinux Containerï¼ŒDockerä¼šå°†ç½‘ç»œï¼Œå­˜å‚¨è¿™äº›äº‹æƒ…éƒ½é…å¥½ã€‚</li>
<li>ä¸‹è½½åº”ç”¨å¹¶å®‰è£…ã€‚æ¯”å¦‚å¯ä»¥ç”¨sudo apt-get install mysql-server æ¥å®‰è£…ä¸€ä¸ªMySQLã€‚å¹¶é…ç½®ä¸€äº›å‚æ•°ä»€ä¹ˆçš„ã€‚</li>
<li>æ‰“åŒ…ä¸Šä¼ Imageã€‚Dockerå¯ä»¥å°†è¿™ä¸ªLinux Containeræ‰“åŒ…æˆImageï¼Œå¯åŠ¨è„šæœ¬ä¹Ÿåœ¨å…¶ä¸­ã€‚å¹¶ä¸Šä¼ è‡³Image Registryä¸­ã€‚è¿™ä¸ªImageä»…ä»…åŒ…æ‹¬ä½ ä¿®æ”¹çš„<strong>å¢é‡éƒ¨åˆ†</strong>ï¼Œæ‰€ä»¥ä½“ç§¯æ¯”è¾ƒå°ã€‚</li>
<li>ä¸€æ¡å‘½ä»¤è·‘èµ·æ¥ã€‚ä½¿ç”¨Docker Run ä¸€æ¡å‘½ä»¤å¯ä»¥ä»Image Registryä¸­ä¸‹è½½Image å¹¶è·‘èµ·æ¥ã€‚</li>
</ol>
<p>éœ€è¦é‡å¯çš„æ—¶å€™ï¼Œåªè¦é‡å¯Containerã€‚éœ€è¦è¿ç§»çš„æ—¶å€™ï¼Œåªè¦è¿ç§»Containerã€‚ä¸€åˆ‡å¹²å¹²å‡€å‡€ã€‚</p>
<h4>PaaSï¼ŒIaaSæœ¯ä¸šæœ‰ä¸“æ”»</h4>
<p>IaaSæ™®éä½¿ç”¨è™šæ‹Ÿæœº,å¼€é”€è¾ƒå¤§ã€‚Dockeræ˜æ˜¾æ›´è½»é‡ã€‚ç¬”è€…è®¤ä¸ºIaaSå’ŒPaaSå„æœ‰ä¸“æ”»ï¼ŒPaaSå»ä¸“æ³¨äºå®‰å…¨çº§åˆ«çš„éš”ç¦»æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼ŒIaaSä¹Ÿä¸åº”è¯¥å»æ„ŸçŸ¥åˆ°åº”ç”¨ã€‚ä¸€ä¸ªå…¬æœ‰äº‘ä¸­ï¼Œå¯ä»¥è®©æ¯ä¸ªç§Ÿæˆ·ä½¿ç”¨ä¸åŒçš„è™šæ‹Ÿæœºï¼Œè™šæ‹Ÿç½‘ç»œæ¥åšåˆ°å®‰å…¨å’Œèµ„æºä¸Šçš„éš”ç¦»ã€‚å†é€šè¿‡PaaSç»Ÿä¸€è¿ç»´ï¼Œç®¡ç†è®¡ç®—èµ„æºã€‚</p>
<p>æ²¡æœ‰å¿…è¦è®©æ¯ä¸ªåº”ç”¨éƒ½ä¸“äº«ä¸€å°è™šæ‹Ÿæœºï¼Œè¿™æ ·å¼€é”€å¤ªå¤§ã€‚ä½†åœ¨å®‰å…¨æ•æ„Ÿçš„ç¯å¢ƒä¸­ï¼Œæ¯ä¸ªç§Ÿæˆ·ä½¿ç”¨ä¸åŒçš„è™šæ‹Ÿæœºæ˜¯åˆç†çš„ã€‚</p>
<h3>ä½¿ç”¨Docker</h3>
<h4>åœ¨çº¿å°è¯•</h4>
<p>ä½¿ç”¨Dockeræœ€ä¾¿æ·çš„æ–¹å¼è«è¿‡äº <strong>åœ¨çº¿å°è¯•</strong>:Â <a href="http://www.docker.io/gettingstarted/#">http://www.docker.io/gettingstarted/#</a></p>
<p>å®Œæˆäº†è¿™ä¸ªåœ¨çº¿çš„æ•™æï¼Œç›¸ä¿¡ä½ å¯¹Dockerå·²ç»åŸºæœ¬ç©è½¬äº†ã€‚</p>
<h4>åœ¨Ubuntuä¸­å®‰è£…Docker</h4>
<p>ç°åœ¨Dockeræ”¯æŒä¸¤ä¸ªUbuntuç‰ˆæœ¬ï¼š</p>
<ul>
<li><a href="http://docs.docker.io/en/latest/installation/ubuntulinux/#ubuntu-precise"><em>Ubuntu Precise 12.04 (LTS) (64-bit)</em></a></li>
<li><a href="http://docs.docker.io/en/latest/installation/ubuntulinux/#ubuntu-raring"><em>Ubuntu Raring 13.04 (64 bit)</em></a></li>
</ul>
<p>æœ‰ä¸¤ä¸ªä¾èµ–</p>
<ul>
<li>Linux kernel 3.8 (read more aboutÂ <a href="http://docs.docker.io/en/latest/installation/kernel/#kernel"><em>Kernel Requirements</em></a>)</li>
<li>AUFS æ–‡ä»¶ç³»ç»Ÿ</li>
</ul>
<p>æ‰€ä»¥éœ€è¦ç¡®è®¤ä¸‹æ‚¨çš„æ“ä½œç³»ç»Ÿï¼Œå®‰è£…ä¾èµ–å¹¶é‡å¯ï¼š</p>
<pre class="lang:sh decode:true"># Add the PPA sources to your apt sources list.
sudo apt-get install python-software-properties &amp;&amp; sudo add-apt-repository ppa:dotcloud/lxc-docker

# Update your sources
sudo apt-get update

# Install, you will see another warning that the package cannot be authenticated. Confirm install.
sudo apt-get install lxc-docker</pre>
<p>å®‰è£…Dockerå¹¶é‡å¯ï¼š</p>
<pre class="lang:sh decode:true"># Add the PPA sources to your apt sources list.
sudo apt-get install python-software-properties &amp;&amp; sudo add-apt-repository ppa:dotcloud/lxc-docker

# Update your sources
sudo apt-get update

# Install, you will see another warning that the package cannot be authenticated. Confirm install.
sudo apt-get install lxc-docker</pre>
<p>ä½¿ç”¨Dockerï¼Œä¸‹è½½ä¸€ä¸ªUbuntu Imageï¼Œå¹¶åˆ›å»ºä¸€ä¸ªContainerï¼Œåœ¨å…¶ä¸­è¿è¡ŒBash</p>
<pre class="lang:sh decode:true"># download the base 'ubuntu' container and run bash inside it while setting up an interactive shell
sudo docker run -i -t ubuntu /bin/bash

# type 'exit' to exit</pre>
<p>æˆåŠŸï¼Œä½ å·²ç»ç©è½¬Dockeräº†ï¼ï¼</p>
<h4>Docker Runçš„æ—¶å€™å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ</h4>
<p>å½“ç”¨æˆ·æ‰§è¡ŒDocker runçš„æ—¶å€™ï¼Œå‘ç”Ÿäº†è¿™äº›äº‹æƒ…ï¼š</p>
<ol>
<li>Docker CLI è°ƒç”¨ Docker Engineçš„Restful APIã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker Â Engineæ˜¯ç›‘å¬åœ¨ä¸€ä¸ªUnix Socketä¸Šçš„ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç›‘å¬åœ¨TCPç«¯å£ä¸Šã€‚</li>
<li>ä»<a href="https://index.docker.io/">docker index</a>ä¸‹è½½ä¸€ä¸ªUbuntu Imageã€‚<a href="https://index.docker.io/">docker index</a>æ˜¯ä¸€ä¸ªèŸèƒDocker Imageçš„åœ°æ–¹ï¼Œå°±åƒä¸€ä¸ªRepository.ä½ ä¹Ÿå¯ä»¥æ„å»ºè‡ªå·±çš„ç§æœ‰Repositoryã€‚</li>
<li>åˆ†é…æ–‡ä»¶ç³»ç»Ÿã€‚æ–‡ä»¶ç³»ç»Ÿæ˜¯AUFSï¼Œè¿™æ˜¯ä¸€ç§â€œå¢é‡æ–‡ä»¶ç³»ç»Ÿâ€ï¼Œä½ åšçš„ä¿®æ”¹éƒ½å¯ä»¥ä»¥å¢é‡çš„æ–¹å¼ä¿å­˜ã€‚å› æ­¤Docker Imageå¯ä»¥å¾ˆå°ã€‚</li>
<li>Mountæ–‡ä»¶ç³»ç»Ÿ</li>
<li>åˆ›å»ºç½‘ç»œç«¯å£ã€‚Dockerä½¿ç”¨Linux Bridgeå’ŒLinux Network NameSpaceæ¥é…ç½®ç½‘ç»œã€‚</li>
<li>é…ç½®IPåœ°å€ã€‚ç»™åˆšåˆšåˆ›å»ºçš„è™šæ‹Ÿç½‘å¡é…ä¸€ä¸ªå†…éƒ¨IPã€‚è¿™ä¸ªIPä¸é‡è¦ï¼Œå› ä¸ºDockeræ˜¯é€šè¿‡é™æ€NATæ¥å¯¹å¤–ä¿ç•™TCP/UDPç«¯å£çš„ã€‚</li>
<li>åœ¨LXCä¸­æ‰§è¡Œå‘½ä»¤ï¼Œè¿™ä¸ªä¾‹å­ä¸­å‘½ä»¤å°±æ˜¯ &#8220;/bin/bash&#8221;</li>
<li>æˆªå–â€œ/bin/bashâ€çš„è¾“å…¥è¾“å‡ºæµåˆ°Terminalï¼Œå’Œä½ äº¤äº’</li>
</ol>
<h3><span style="font-size: 1.17em;">Dockè¯¦è§£</span></h3>
<h4>åœ¨Dockerä¸­è¿è¡ŒRedis</h4>
<p>åˆ›å»ºä¸€ä¸ªDocker Container</p>
<pre class="lang:sh decode:true">sudo docker run -i -t ubuntu /bin/bash</pre>
<p>å®‰è£…Redis .</p>
<pre class="lang:sh decode:true">apt-get update
apt-get install redis-server
exit</pre>
<p>æ‹ä¸ªå¿«ç…§ï¼Œåˆ›å»ºä½ è‡ªå·±çš„Docker Redis Image</p>
<pre class="lang:sh decode:true">docker ps -a  # grab the container id (this will be the first one in the list)
docker commit &lt;container_id&gt; &lt;your username&gt;/redis</pre>
<p>è¿è¡ŒRedisã€‚-d æ˜¯æŒ‡åå°è¿è¡Œï¼Œä½¿ç”¨ä½ åˆšåˆšåˆ›å»ºçš„Imageã€‚</p>
<pre class="lang:sh decode:true">sudo docker run -d -p 6379 &lt;your username&gt;/redis /usr/bin/redis-server</pre>
<p>ä½¿ç”¨redis-cliè®¿é—®</p>
<pre class="lang:sh decode:true">sudo docker ps  # grab the new container id
sudo docker inspect &lt;container_id&gt;    # grab the ipaddress of the container
redis-cli -h &lt;ipaddress&gt; -p 6379
redis 10.0.3.32:6379&gt; set docker awesome
OK
redis 10.0.3.32:6379&gt; get docker
"awesome"
redis 10.0.3.32:6379&gt; exit</pre>
<h4>Â æ–‡ä»¶ç³»ç»Ÿ</h4>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œè¦Linuxéœ€è¦ä¸¤ç§æ–‡ä»¶ç³»ç»Ÿ</p>
<ol>
<li>boot file system (bootfs)</li>
<li>root file system (rootfs)</li>
</ol>
<p>bootfsåŒ…å«æœ‰bootloaderã€‚ç”¨æˆ·ä»æ¥ä¸ä¼šæ›´æ”¹bootfsã€‚äº‹å®ä¸Šï¼Œå½“æœºå™¨å¯åŠ¨ç»“æŸåï¼Œkernelä¼šå¸è½½æ‰è¿™ä¸ªbootfsã€‚</p>
<p>rootfså°±æ˜¯æˆ‘ä»¬é€šå¸¸çœ‹åˆ°äº†Linuxæ–‡ä»¶ç›®å½•ï¼ŒåŒ…æ‹¬Â <tt>/dev,Â /proc,Â /bin,Â /etc,/lib,Â /usr,</tt>Â å’Œ<tt>/tmpç­‰ç­‰ã€‚ä¸åŒçš„Linuxå‘è¡Œç‰ˆçš„rootfsæ˜¯ä¸ä¸€æ ·çš„ï¼Œè½¯ä»¶åŒ…ç»“æ„ä¹Ÿæ˜¯ä¸åŒçš„ã€‚Dockeré€šè¿‡ç®¡ç†rootfsï¼Œå¯ä»¥åœ¨åŒæ—¶è¿è¡Œå¤šä¸ªLinuxå‘è¡Œç‰ˆã€‚</tt></p>
<p>å½“ä¼ ç»ŸLinuxå¯åŠ¨çš„æ—¶å€™ï¼Œrootfsæ˜¯åªè¯»çš„ï¼Œæ£€æŸ¥å®Œæ•´æ€§åä¼šè½¬åŒ–æˆå¯è¯»å†™çŠ¶æ€ã€‚</p>
<p>å½“DockeræŒ‚è½½rootfsçš„æ—¶å€™ï¼Œä¹Ÿæ˜¯åªè¯»çš„ã€‚ä½†æ˜¯ä»–å¹¶æ²¡æœ‰æŠŠå®ƒè½¬åŒ–ä¸ºå¯è¯»å†™çŠ¶æ€ï¼Œè€Œä¸”åœ¨å…¶ä¸Šä½¿ç”¨Â <a href="http://en.wikipedia.org/wiki/Union_mount">union mount</a>Â æ¥åŠ ä¸€å±‚ï¼Œåˆ›å»ºä¸€ä¸ªå¯è¯»å†™çš„æ–‡ä»¶ç³»ç»Ÿã€‚åŸç†çš„rootfsè¿˜æ˜¯åªè¯»çš„ï¼Œæ•°æ®è¢«å†™å…¥æ–°çš„ç©ºé—´ã€‚Dockerç§°ä¹‹ä¸º&#8221;å±‚&#8221;ï¼Œæ•°æ®å¯ä»¥è¿™æ ·ä¸€å±‚ä¸€å±‚å åŠ èµ·æ¥ã€‚</p>
<p>æœ€åˆçš„æ—¶å€™ï¼Œæœ€é¡¶å±‚ä¸­ä»€ä¹ˆæ•°æ®ä¹Ÿæ²¡æœ‰ï¼Œå½“è¿›ç¨‹åˆ›å»ºä¿®æ”¹æ–‡ä»¶çš„æ—¶å€™ï¼Œæ•°æ®å°±ä¼šä¿å­˜åœ¨æœ€é¡¶å±‚ã€‚åº•å±‚çš„æ–‡ä»¶ç³»ç»Ÿæ²¡æœ‰ä¸æ¯«æ”¹å˜ã€‚</p>
<p>å½“å¯¼å‡ºImageçš„æ—¶å€™ï¼Œå…¶å®å°±æ˜¯å¯¼å‡ºæœ€é¡¶å±‚è€Œå·²ã€‚</p>
<p>ç”±äºåº•å±‚çš„åªè¯»çš„ï¼Œå¤šä¸ªDocker Containerå¯ä»¥å…±äº«ï¼Œæé«˜çš„æ–‡ä»¶ç³»ç»Ÿçš„ä½¿ç”¨æ•ˆç‡ã€‚</p>
<h3>Dockerç”Ÿæ€ç¯å¢ƒ</h3>
<p>Dockeræ˜¯å¼€æºçš„ï¼Œæä¾›å®Œå–„çš„Restfulæ¥å£ï¼Œè®¾è®¡ç®€æ´ï¼Œç›´æˆ³ç—›ç‚¹ã€‚ä½†æ˜¯å› æ­¤æ¯”è¾ƒç®€å•ï¼Œæ²¡æœ‰åä¸½çš„åŠŸèƒ½ã€‚å‡¤æ –æ¢§æ¡ï¼Œä»¥Dockerä¸ºæ ‘å¹²ï¼Œè¡ç”Ÿå‡ºè®¸å¤šä¼˜ç§€çš„é¡¹ç›®ã€‚</p>
<ul>
<li>
<strong><a href="https://github.com/progrium/dokku">dokku</a>Â </strong>100è¡ŒBASHçš„å¾®Herokuã€‚åŒ…å«äº†ä¸€ä¸ªPaaSçš„åŸºæœ¬åŠŸèƒ½</li>
<li>
<strong><a href="https://github.com/ehazlett/shipyard">shipyard</a></strong>Â Dockerç®¡ç†ç•Œé¢ï¼Œæä¾›å¤šHost,åˆ›å»ºContainer,æŸ¥çœ‹Imageç­‰åŠŸèƒ½</li>
<li>
<strong><a href="https://github.com/dotcloud/openstack-docker">openstack-docker</a></strong>Â Dockerå’ŒOpenStacké›†æˆï¼Œå¯ä»¥ä½¿ç”¨Novaå’ŒGlanceæ¥æ§åˆ¶</li>
<li>
<strong><a href="https://github.com/ptone/jiffylab">jiffylab</a></strong>æ•™å­¦ç”¨Pythonå’ŒUnix Shellå¹³å°</li>
<li>
<strong><a href="http://www.memcachedasaservice.com/">BYO SAAS</a></strong>Â Memcached as a Service</li>
<li>
<strong><a href="https://github.com/crosbymichael/dockerui">Dockerui</a></strong>Â Dockerç®¡ç†ç•Œé¢</li>
</ul>
							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e6%8a%80%e6%9c%af/index.html" rel="category tag">è½¯ä»¶æŠ€æœ¯</a>			</span>
				<span class="sep"> | </span>
			
							<span class="taglinks">
				æ ‡ç­¾ï¼š <a href="./../../tag/docker/index.html" rel="tag">Docker</a>, <a href="./../../tag/paas/index.html" rel="tag">PaaS</a>			</span>
				<span class="sep"> | </span>
			
		
						<span class="comments-link"><a href="./../../docker-paas-for-any-application/index.html#comments">9 è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-26821 -->

							
								
<article id="post-27005" class="post-27005 post type-post status-publish format-aside hentry category-7 category-5 tag-scala post_format-post-format-aside">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../scala-tour-choiceness/index.html" title="è¿ç»“åˆ°Scala Tour &#8211; ç²¾é€‰" rel="bookmark">Scala Tour &#8211; ç²¾é€‰</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../scala-tour-choiceness/index.html" title="ä¸Šåˆ2:55" rel="bookmark">
							<time class="entry-date updated" datetime="2013-05-02T02:55:26+08:00">2013å¹´5æœˆ2æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								<p>5æœˆ1æ—¥æ˜¯åŠ³åŠ¨çš„æ—¥å­ï¼Œç¬”è€…åšäº†ä¸€ä¸ªå­¦ä¹ Scalaç²¾å½©ç‰¹æ€§çš„ç½‘ç«™<a title="scala-tour" href="http://zh.scala-tour.com/" target="_blank" rel="noopener">Scala-Tour</a>ã€‚åœ¨å­¦ä¹ Scalaæ˜¯æ—¶å€™ï¼Œé‡åˆ°å¾ˆå¤šä»¤äººæ¿€åŠ¨çš„ç‰¹æ€§ï¼Œä¸»è¦å‡½æ•°å¼ç¼–ç¨‹å’Œå¹¶å‘ã€‚ç›¸æ¯”ä¸‹Javaå·²ç»è€æ€é¾™é’Ÿï¼Œæ­¥å±¥èº‡è·šã€‚æˆ–è®¸Scalaä¸ä¼šæˆä¸ºæ›¿ä»£Javaè¯­è¨€ï¼Œä½†çš„ç¡®ç»™åæ¥è€…è®¾ç«‹äº†æ ‡æ†ã€‚æ‰€ä»¥åšäº†è¿™ä¸ªç½‘ç«™ï¼Œé¡ºç€ä¸€ä¸ªä¸€ä¸ªä¾‹å­ï¼Œç”±æµ…å…¥æ·±ï¼Œç”±è¡¨åŠé‡Œã€‚é€æ¸å­¦ä¼šScala,å°½ç®¡ä¸ä¼šå› æ­¤æˆä¸ºä¸€ä¸ªç†Ÿç»ƒScalaçš„å¼€å‘è€…ï¼Œä½†æ˜¯å¯¹å‡½æ•°å¼ç¼–ç¨‹çš„ä¹Ÿä¼šç›¸å½“äº†ç„¶ã€‚è¿™ç¯‡æ–‡ç« ç²¾é€‰äº†Scala-Tourä¸Šäº†ä¸€äº›ç« èŠ‚ï¼Œæƒ³å¿«é€Ÿäº†è§£çš„æœ‹å‹å¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼Œå½“ç„¶æƒ³è¯¦ç»†çœ‹å°±ä¸Šä¸Š<a title="scala-tour" href="http://zh.scala-tour.com/" target="_blank" rel="noopener">Scala-Tour</a>å§ã€‚<br>
<img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27241" src="http://47.100.65.109/wp-content/uploads/2013/05/scala-300x137.png" alt="" width="300" height="137" srcset="./../../wp-content/uploads/2013/05/scala-300x137.png 300w, ./../../wp-content/uploads/2013/05/scala.png 332w" sizes="(max-width: 300px) 100vw, 300px"></p>
<h3>ä¸å†éœ€è¦Close</h3>
<p>åœ¨Javaé‡Œé¢ï¼Œä½¿ç”¨å®Œèµ„æº(æ–‡ä»¶å¥æŸ„ï¼Œæ•°æ®åº“è¿æ¥)ç­‰ä¹‹åï¼Œå¿…é¡»æ‰‹åŠ¨Closeã€‚å¦åˆ™å‘ç”Ÿæ³„æ¼åï¼Œç¨‹åºåªæœ‰è¢«è¿«é‡å¯ã€‚Scalaå¯ä»¥é€šè¿‡å‡½æ•°å¼å®ç°è‡ªåŠ¨closeã€‚</p>
<pre lang="scala">import scala.reflect.io.File
import java.util.Scanner

def withScanner(f: File, op: Scanner =&gt; Unit) = {
    val scanner = new Scanner(f.bufferedReader)
    try {
        op(scanner)
    } finally {
        scanner.close()
    }
}

withScanner(File("/proc/self/stat"),
    scanner =&gt; println("pid is " + scanner.next()))</pre>
<p>è¿™ä¸ªä¾‹å­æ˜¯ä»/proc/self/statæ–‡ä»¶ä¸­è¯»å–å½“å‰è¿›ç¨‹çš„pidã€‚withScannerå°è£…äº†try-finallyå—ï¼Œæ‰€ä»¥è°ƒç”¨è€…ä¸ç”¨å†closeã€‚</p>
<h3>æŒ‰åç§°ä¼ é€’å‚æ•°</h3>
<p>æˆ‘ä»¬ç†Ÿæ‚‰çš„å‚æ•°ä¼ é€’æ–¹å¼æ˜¯æŒ‰å€¼ä¼ é€’ã€‚æŒ‰åç§°ä¼ é€’çš„æ–¹å¼ï¼Œå¯ä»¥ç†è§£ä¸ºç›´æ¥ä¼ é€’å‚æ•°åå­—ï¼Œç­‰åˆ°å®é™…è°ƒç”¨çš„æ—¶å€™ï¼Œå†å»å–å€¼ã€‚åœ¨Javaä»£ç ä¸­ï¼Œå¾€å¾€å……æ–¥ç€if(log.isDebug()){log.debug(&#8230;)}è¿™æ ·è¯­å¥ã€‚ä¹‹å‰çš„ifè°ƒç”¨æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå› ä¸ºåœ¨ä¹‹åçš„debugè¯­å¥ä¸­å¾€å¾€æœ‰å­—ç¬¦ä¸²æ‹¼æ¥çš„æ“ä½œã€‚åœ¨ä¸éœ€è¦æ‰“Logçš„æ—¶å€™ï¼Œå­—ç¬¦ä¸²æ‹¼æ¥ä¹Ÿæœ‰å¯èƒ½å‘ç”Ÿå¼‚å¸¸æŠ›å‡ºã€‚è€ŒScalaå¯ä»¥é€šè¿‡æŒ‰åç§°ä¼ é€’è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ ·å°±ä¸å†éœ€è¦if(log.isDebug())è¿™æ ·çš„è¯­å¥äº†ã€‚</p>
<pre lang="scala">val logEnable = false

def log(msg: =&gt; String) =
    if (logEnable) println(msg)

val MSG = "programing is running"

log(MSG + 1 / 0)</pre>
<h3>é¸­å­ç±»å‹</h3>
<p>â€œèµ°èµ·æ¥åƒé¸­å­ï¼Œå«èµ·æ¥åƒé¸­å­ï¼Œå°±æ˜¯é¸­å­ã€‚â€è¿™ä¸ªä¾‹å­ä¸­ä½¿ç”¨{ def close(): Unit }ä½œä¸ºå‚æ•°ç±»å‹ã€‚å› æ­¤ä»»ä½•å«æœ‰close()çš„å‡½æ•°çš„ç±»éƒ½å¯ä»¥ä½œä¸ºå‚æ•°ã€‚è¿™æ ·çš„åšæ³•æ¯”ä½¿ç”¨æ¥å£è¦å¥½å¾ˆå¤šï¼Œå› ä¸ºå¯ä»¥ä¸å¼•å…¥ä»»ä½•ä¾èµ–ã€‚è¿™ä¸ªwithCloseæ–¹æ³•å•ç‹¬ç¼–è¯‘ï¼Œéšå¤„ä½¿ç”¨ã€‚</p>
<pre lang="scala">def withClose(closeAble: { def close(): Unit }, op: { def close(): Unit } =&gt; Unit) {
    try {
        op(closeAble)
    } finally {
        closeAble.close()
    }
}

class Connection {
    def close() = println("close Connection")
}

val conn: Connection = new Connection()
withClose(conn, conn =&gt;
    println("do something with Connection"))</pre>
<h3>Trait</h3>
<p>Traitså°±åƒæ˜¯æœ‰å‡½æ•°ä½“çš„Interfaceï¼Œä½¿ç”¨withå…³é”®å­—æ¥æ··å…¥ã€‚å•ä¸ªTraitså°±åƒæ˜¯ä¸€å—ä¹é«˜ç§¯æœ¨ï¼Œä¸€ä¸ªæ’ä»¶ã€‚å°±åƒä¸‹é¢çš„JsonAbleï¼Œå½“ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œå¯ä»¥éšæ—¶éšåœ°æŠŠå®ƒæ’åœ¨ä»–ä¸Šé¢ã€‚è¿™ä¸ªå¯¹æ¥å°±å…·å¤‡äº†toJsonçš„èƒ½åŠ›ã€‚ä¸ç”¨åˆ›å»ºä¸€ä¸ªç±»ï¼Œæˆ–è€…å†™ç»„åˆçš„ä»£ç ï¼Œéå¸¸å¹²è„†ã€‚è¿™æ ·ä¹Ÿå¯ä»¥ä½¿ä»£ç æœ‰å¾ˆé«˜çš„æ­£äº¤æ€§ã€‚ä¸å†ä¼šä¸ºäº†ä¸€ä¸ªå¾ˆå°çš„éœ€æ±‚ï¼Œå»ä¿®æ”¹ä¸€ä¸ªè¢«å¹¿æ³›ä½¿ç”¨çš„ç±»ã€‚</p>
<pre lang="scala">trait ForEachAble[A] {
  def iterator: java.util.Iterator[A]
  def foreach(f: A =&gt; Unit) = {
    val iter = iterator
    while (iter.hasNext)
      f(iter.next)
  }
}

trait JsonAble {
  def toJson() =
    scala.util.parsing.json.JSONFormat.defaultFormatter(this)
}

val list = new java.util.ArrayList[Int]() with ForEachAble[Int] 
list.add(1); list.add(2)

println("For each: "); list.foreach(x =&gt; println(x))
//println("Json: " + list.toJson())</pre>
<h3>å‡½æ•°å¼çœŸæ­£çš„å¨åŠ›</h3>
<p>é€šè¿‡å°†å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå¯ä»¥ä½¿ç¨‹åºæä¸ºç®€æ´ã€‚ å‡½æ•°å¼é™¤äº†èƒ½ç®€åŒ–ä»£ç å¤–ï¼Œæ›´é‡è¦çš„æ˜¯ä»–å…³æ³¨çš„æ˜¯Inputå’ŒOutputï¼Œå‡½æ•°æœ¬èº«æ²¡æœ‰å‰¯ä½œç”¨ã€‚ å°±æ˜¯Unix pipelineä¸€æ ·ï¼Œç®€å•çš„å‘½ä»¤å¯ä»¥ç»„åˆåœ¨ä¸€èµ·ã€‚ Listçš„filteræ–¹æ³•æ¥å—ä¸€ä¸ªè¿‡æ»¤å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„List å¦‚æœä½ å–œæ¬¢Unix pipelineçš„æ–¹å¼ï¼Œä½ ä¸€å®šä¹Ÿä¼šå–œæ¬¢å‡½æ•°å¼ç¼–ç¨‹ã€‚ è¿™ä¸ªä¾‹å­æ˜¯ç”¨å‡½æ•°å¼çš„ä»£ç æ¨¡æ‹Ÿâ€œcat file | grep &#8216;warn&#8217; | grep &#8216;2013&#8217; | wcâ€çš„è¡Œä¸ºã€‚ç›¸æ¯”äºRubyç­‰åŠ¨æ€è¯­è¨€,è¿™å¨åŠ›æ¥è‡ªäºç§‘å­¦è€Œä¸æ˜¯é­”æ³•</p>
<pre lang="scala">val file = List("warn 2013 msg", "warn 2012 msg", "error 2013 msg", "warn 2013 msg")

println("cat file | grep 'warn' | grep '2013' | wc : " 
    + file.filter(_.contains("warn")).filter(_.contains("2013")).size)</pre>
<h3>å†è§ NullException</h3>
<p>æ¯ä¸ªJavaç¨‹åºå‘˜éƒ½è¢«NullExceptionæŠ˜ç£¨è¿‡ã€‚å› ä¸ºJavaä¸­æ¯ä¸ªå¯¹è±¡éƒ½å¯èƒ½ä¸ºNull,æ‰€ä»¥è¦ä¹ˆåˆ°å¤„æ£€æŸ¥nullçš„é—®é¢˜ï¼Œè¦ä¹ˆåˆ°å¤„try/cacheã€‚<br>
Scalaæä¾›äº†Optionæœºåˆ¶æ¥è§£å†³ï¼Œä»£ç ä¸­ä¸æ–­æ£€æŸ¥nullçš„é—®é¢˜ã€‚è¿™ä¸ªä¾‹å­åŒ…è£…äº†getPropertyæ–¹æ³•ï¼Œä½¿å…¶è¿”å›ä¸€ä¸ªOptionã€‚ è¿™æ ·å°±å¯ä»¥ä¸å†æ¼«æ— ç›®çš„åœ°nullæ£€æŸ¥ã€‚åªè¦Optionç±»å‹çš„å€¼å³å¯ã€‚ä½¿ç”¨pattern matchæ¥æ£€æŸ¥æ˜¯å¸¸è§åšæ³•ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨getOrElseæ¥æä¾›å½“ä¸ºNoneæ—¶çš„é»˜è®¤å€¼ã€‚ç»™åŠ›çš„æ˜¯Optionè¿˜å¯ä»¥çœ‹ä½œæ˜¯æœ€å¤§é•¿åº¦ä¸º1çš„Listï¼ŒListçš„å¼ºå¤§åŠŸèƒ½éƒ½å¯ä»¥ä½¿ç”¨ã€‚<br>
ä¸æ˜¯æ¯ä¸ªå¯¹è±¡éƒ½å¯ä»¥ä¸ºNulläº†ï¼Œåªæœ‰Optionå¯ä»¥ä¸ºNoneã€‚è¿™æ ·çš„åšæ³•æ˜¾ç¤ºåŒºåˆ†äº†å¯èƒ½ä¸ºNullçš„æƒ…å†µï¼Œå¯ä»¥å’ŒNullExceptionè¯´å†è§äº†ã€‚</p>
<pre lang="scala">def getProperty(name: String): Option[String] = {
  val value = System.getProperty(name)
  if (value != null) Some(value) else None
}

val osName = getProperty("os.name")

osName match {
  case Some(value) =&gt; println(value)
  case _ =&gt; println("none")
}

println(osName.getOrElse("none"))

osName.foreach(print _)</pre>
<h3>å¹¶è¡Œé›†åˆ</h3>
<p>è¿™ä¸ªä¾‹å­æ˜¯è®¿é—®è‹¥å¹²URLã€‚ä½†ç¡®å¯ä»¥å¹¶è¡Œè®¿é—®ï¼Œæ¯”éå¹¶è¡Œçš„åšæ³•å¯ä»¥å¿«ä¸€å€ã€‚è¦æƒ³è®©è®¿é—®å¹¶è¡Œï¼Œåªè¦è°ƒç”¨List.parå°±å¯ä»¥äº†ã€‚</p>
<pre lang="scala">val urls = List("http://scala-lang.org",
  "https://github.com/yankay/scala-tour")

def fromURL(url: String) = scala.io.Source.fromURL(url)
  .getLines().mkString("\n")

val t = System.currentTimeMillis()
urls.par.map(fromURL(_))
println("time: " + (System.currentTimeMillis - t) + "ms")</pre>
<p>æ˜¯ä¸æ˜¯éå¸¸çš„ç®€å•ï¼Ÿå¹¶è¡Œé›†åˆæ”¯æŒå¤§éƒ¨åˆ†é›†åˆçš„åŠŸèƒ½ã€‚ä¸å¢åŠ ç¨‹åºå¤æ‚æ€§ï¼Œå´èƒ½å¤§å¹…æé«˜å¹¶å‘çš„èƒ½åŠ›ã€‚</p>
<h3>è¿œç¨‹Actor</h3>
<p>Actoræ˜¯å¹¶å‘æ¨¡å‹ï¼Œä¹Ÿä½¿ç”¨äºåˆ†å¸ƒå¼ã€‚è¿™ä¸ªä¾‹å­åˆ›å»ºä¸€ä¸ªæ—¶é—´æœåŠ¡å™¨ï¼Œé€šè¿‡aliveæ¥ç›‘å¬TCPç«¯å£ï¼Œregisteræ¥æ³¨å†Œè‡ªå·±ã€‚è°ƒç”¨æ—¶é€šè¿‡selectåˆ›å»ºclientã€‚å…¶ä½™ä½¿ç”¨æ–¹å¼å’Œæ™®é€šActorä¸€æ ·ã€‚<br>
å°†å•æœºå¹¶å‘å’Œåˆ†å¸ƒå¼æŠ½è±¡æˆä¸€ç§æ¨¡å‹ã€‚ç®€åŒ–äº†ç¨‹åºå¤æ‚æ€§ã€‚è™½ç„¶å¤šæ ¸ç¼–ç¨‹å¹¶ä¸å¹¿æ³›ï¼Œä½†è°ƒç”¨å¤–éƒ¨æ¥å£çš„æƒ…å†µè¶Šæ¥è¶Šå¤šã€‚Actoræ¨¡å‹éå¸¸é€‚ç”¨äºè¿™æ ·çš„å¼‚æ­¥ç¯å¢ƒã€‚</p>
<pre lang="scala">import scala.actors.remote.RemoteActor._
import scala.actors.Actor._
import scala.actors.remote.Node

val port = 31241

val echoServer = actor {
  alive(port)
  register('echoServer, self)
  loop {
    react {
      case msg =&gt; {
        reply("replay " + msg)
      }
    }
  }
}

val timeServerClient = select(Node("127.0.0.1", port), 'echoServer)

timeServerClient !? "hi" match {
  case replay: String =&gt; println(replay)
}</pre>
<h3>æŠ½å–å™¨</h3>
<p>æŠ½å–å™¨å¯ä»¥è¿›è¡Œè§£æ„ã€‚è¿™ä¸ªä¾‹å­æ˜¯æ„å»ºä¸€ä¸ªEmailæŠ½å–å™¨ï¼Œåªè¦å®ç°unapplyå‡½æ•°å°±å¯ä»¥äº†ã€‚<br>
Scalaçš„æ­£åˆ™è¡¨è¾¾å¼ä¼šè‡ªå¸¦æŠ½å–å™¨ï¼Œå¯ä»¥æŠ½å–å‡ºä¸€ä¸ªListã€‚Listé‡Œçš„å…ƒç´ æ˜¯åŒ¹é…()é‡Œçš„è¡¨è¾¾å¼ã€‚<br>
æŠ½å–å™¨å¾ˆæœ‰ç”¨ï¼ŒçŸ­çŸ­çš„ä¾‹å­é‡Œå°±æœ‰ä¸¤å¤„ä½¿ç”¨æŠ½å–å™¨ï¼š</p>
<ul>
<li>é€šè¿‡ case user :: do main :: Nil æ¥è§£æ„List</li>
<li>é€šè¿‡ case Email(user, domain) æ¥è§£æ„Emailã€‚</li>
</ul>
<pre lang="scala">import scala.util.matching.Regex

object Email {
  def unapply(str: String) = new Regex("""(.*)@(.*)""")
    .unapplySeq(str).get match {
    case user :: domain :: Nil =&gt; Some(user, domain)
    case _ =&gt; None
  }
}

"user@domain.com" match {
  case Email(user, domain) =&gt; println(user + "@" + domain)
}</pre>
<h3>DSL</h3>
<p>DSLæ˜¯Scalaæœ€å¼ºå¤§æ­¦å™¨ï¼Œå¯ä»¥ä½¿ä¸€äº›æè¿°æ€§ä»£ç å˜å¾—æä¸ºç®€å•ã€‚è¿™ä¸ªä¾‹å­æ˜¯ä½¿ç”¨DSLç”ŸæˆJSONã€‚Scalaå¾ˆå¤šçœ‹ä¼¼æ˜¯è¯­è¨€çº§çš„ç‰¹æ€§ä¹Ÿæ˜¯ç”¨DSLåšåˆ°çš„ã€‚<br>
è‡ªå·±ç¼–å†™DSLæœ‰ç‚¹å¤æ‚ï¼Œä½†ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚è¿™æ ·å¯ä»¥ä½¿Scalaå¯ä»¥åµŒå…¥XMLï¼ŒåµŒå…¥Jsonï¼ŒåµŒå…¥SQLã€‚è€Œå…¶ä»–è¯­è¨€ä¸­è¿™äº›éƒ½åªæ˜¯å­—ç¬¦ä¸²è€Œå·²ã€‚</p>
<pre lang="scala">import org.json4s._
import org.json4s.JsonDSL._
import org.json4s.jackson.JsonMethods._
import java.util.Date

case class Twitter(id: Long, text: String, publishedAt: Option[java.util.Date])

var twitters = Twitter(1, "hello scala", Some(new Date())) ::
  Twitter(2, "I like scala tour", None) :: Nil

var json = ("twitters"
  -&gt; twitters.map(
    t =&gt; ("id" -&gt; t.id)
      ~ ("text" -&gt; t.text)
      ~ ("published_at" -&gt; t.publishedAt.toString())))

println(pretty(render(json)))</pre>
<h3>Simple Build Tool</h3>
<p>SBTæ˜¯Scalaçš„æœ€ä½³ç¼–è¯‘å·¥å…·ï¼Œåœ¨ä»–çš„å¸®åŠ©ä¸‹ï¼Œä½ ç”šè‡³ä¸éœ€è¦å®‰è£…é™¤JREå¤–çš„ä»»ä½•ä¸œè¥¿ï¼Œæ¥å¼€å‘Scalaã€‚<br>
ä¾‹å¦‚ä½ æƒ³åœ¨è‡ªå·±çš„æœºå™¨ä¸Šæ‰§è¡Œ<a title="scala-tour" href="http://zh.scala-tour.com/" target="_blank" rel="noopener">Scala-Tour</a>,å¯ä»¥æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤</p>
<pre lang="bash">#Linux/Mac(compile &amp; run):
git clone https://github.com/yankay/scala-tour-zh.git
cd scala-tour-zh
./sbt/sbt stage
./target/start

#Windows(can only compile):
git clone https://github.com/yankay/scala-tour-zh.git
cd scala-tour-zh
sbt\sbt stage</pre>
<h3>ç»“è¯­</h3>
<p>è¿™å‡ ä¸ªä¾‹å­ç²¾é€‰è‡ª<a title="scala-tour" href="http://zh.scala-tour.com/" target="_blank" rel="noopener">Scala-Tour</a>ï¼Œè¿™ä¸ªç½‘ç«™ä¸­è¿˜æœ‰ä»‹ç»äº†å¾ˆå¤šå…¶ä»–å¥½çš„ç‰¹æ€§ï¼Œæ¯”å¦‚æ¨¡å¼åŒ¹é…å’Œéšå¼è½¬æ¢ï¼Œå°±ä¸é€ä¸€ä»‹ç»äº†ã€‚è¿™ä¸ªé¡¹ç›®Hoståœ¨<a title="GitHub" href="https://github.com/yankay/scala-tour/">GitHub</a>ä¸Šï¼Œå¦‚æœä½ ä¹Ÿæœ‰ç²¾å½©çš„ç”¨æ³•çš„è¯ï¼Œå¤§å®¶äº¤æµäº¤æµå§ã€‚</p>
							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e6%8a%80%e6%9c%af/%e6%af%8f%e6%97%a5%e5%bf%83%e5%be%97/index.html" rel="category tag">æ¯æ—¥å¿ƒå¾—</a>, <a href="./../../category/%e6%8a%80%e6%9c%af/index.html" rel="category tag">è½¯ä»¶æŠ€æœ¯</a>			</span>
				<span class="sep"> | </span>
			
							<span class="taglinks">
				æ ‡ç­¾ï¼š <a href="./../../tag/scala/index.html" rel="tag">Scala</a>			</span>
				<span class="sep"> | </span>
			
		
						<span class="comments-link"><a href="./../../scala-tour-choiceness/index.html#comments">5 è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-27005 -->

							
								
<article id="post-26652" class="post-26652 post type-post status-publish format-standard hentry category-7 tag-nosql tag-86 tag-111">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../nosql-anti-pattern-document/index.html" title="è¿ç»“åˆ°NoSQLåæ¨¡å¼ &#8211; æ–‡æ¡£æ•°æ®åº“ç¯‡" rel="bookmark">NoSQLåæ¨¡å¼ &#8211; æ–‡æ¡£æ•°æ®åº“ç¯‡</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../nosql-anti-pattern-document/index.html" title="ä¸‹åˆ9:03" rel="bookmark">
							<time class="entry-date updated" datetime="2013-01-25T21:03:37+08:00">2013å¹´1æœˆ25æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								<p>æˆ‘ä»¬è®¾è®¡å…³ç³»æ•°æ®åº“Schemaçš„éƒ½æœ‰ä¸€å¥—å®Œæ•´çš„æ–¹æ¡ˆï¼Œè€ŒNoSQLå´æ²¡æœ‰è¿™äº›ã€‚åŠå¹´å‰ç¬”è€…è¯»äº†æœ¬ã€ŠSQLåæ¨¡å¼ã€‹çš„ä¹¦ï¼Œè§‰å¾—éå¸¸å¥½ã€‚å°±å¼€å§‹ç•™æ„ï¼Œå¯¹äºNoSQLæ˜¯å¦ä¹Ÿæœ‰åæ¨¡å¼ï¼Ÿå¥½çš„åæ¨¡å¼å¯ä»¥åœ¨æˆ‘ä»¬è®¾è®¡Schemaå‘Šè¯‰å“ªé‡Œæ˜¯é™·é˜±å’Œæ‚¬å´–ã€‚NoSQLå®£ä¼ çš„æ—¶å€™å¾€å¾€å®£ç§°æ˜¯SchemaLessçš„ï¼Œè¿™ä¼šè®©äººè¯¯è§£å…¶ä¸éœ€è¦è®¾è®¡Schemaã€‚ä½†å¦‚æœä¸æ„è¯†åˆ°è®¾è®¡Schemaçš„å¿…è¦ï¼Œé™·é˜±å°±åœ¨ä¸€ç›´åœ¨é»‘æš—ä¸­ç­‰ç€æˆ‘ä»¬ã€‚è¿™ç¯‡æ–‡ç« å°±æ€»ç»“ä¸€äº›åˆ«äººçš„ï¼Œä¹Ÿæœ‰è‡ªå·±çŠ¯è¿‡çš„æ·±ç—›çš„è®¾è®¡Schemaé”™è¯¯ã€‚</p>
<p>NoSQLæ•°æ®åº“æœ€ä¸»æµçš„æœ‰æ–‡æ¡£æ•°æ®åº“ï¼Œåˆ—å­˜æ•°æ®åº“ï¼Œé”®å€¼æ•°æ®åº“ã€‚ä¸‰è€…åˆ†åˆ«æœ‰ä»£è¡¨ä½œMongoDBï¼ŒHBaseå’ŒRedisã€‚å¦‚æœå°†NoSQLæ¯”ä½œå…µå™¨çš„è¯ï¼Œå¯ä»¥è¿™æ ·(MySQLæ˜¯å…¸å‹çš„å…³ç³»å‹æ•°æ®åº“ï¼Œä¸€æ ·å‚ä¸æ¯”è¾ƒ)ï¼š</p>
<ul>
<li>
<strong>MySQL</strong>äº§ç”Ÿå¹´ä»£è¾ƒæ—©ï¼Œè€Œä¸”éšç€LAMPå¤§æ½®å¾—ä»¥æˆç†Ÿã€‚å°½ç®¡å…¶æ²¡æœ‰ä»€ä¹ˆå¤§çš„æ”¹è¿›ï¼Œä½†æ˜¯æ–°å…´çš„äº’è”ç½‘ä½¿ç”¨çš„æœ€å¤šçš„æ•°æ®åº“ã€‚å°±åƒä¼ ç»Ÿçš„èœåˆ€ï¼Œç»“æ„ç®€å•ï¼Œå‡ ç™¾å¹´æ²¡æœ‰æ”¹è¿›ã€‚ä½†æ˜¯ä¸å¦¨ç¢äº§ç”Ÿå„å¼å„æ ·çš„åˆ€æ³•ï¼Œåªè¦æœ‰ä¸€æŠŠï¼Œå°±èƒ½èƒœä»»å¨æˆ¿é‡Œçš„å¤§éƒ¨åˆ†äº‹åŠ¡ã€‚MySQLä¹Ÿæ˜¯ä¸€æ ·ï¼Œæ ¸å¿ƒå·²ç»ç¨³å®šã€‚ä½†æ˜¯åˆ‡åº“ï¼Œåˆ†è¡¨ï¼Œå¤‡ä»½ï¼Œç›‘æ§ï¼Œç­‰ç­‰æ‰‹æ®µä¸€åº”ä¿±å…¨ã€‚</li>
<li>
<strong>MongoDB</strong>æ˜¯ä¸ªæ–°ç”Ÿäº‹ç‰©ï¼Œæä¾›æ›´çµæ´»çš„Schemaï¼ŒCapped Collectionï¼Œå¼‚æ­¥æäº¤ï¼Œåœ°ç†ä½ç½®ç´¢å¼•ç­‰äº”èŠ±åè‰²çš„åŠŸèƒ½ã€‚å°±åƒç‘å£«å†›åˆ€ï¼Œä¸ä½†å¯ä»¥å½“åˆ€ç”¨ï¼Œè¿˜å¯ä»¥å¼€ç“¶ç›–ï¼Œå‰ªæŒ‡ç”²ã€‚ä½†æ˜¯ä»–ä¹Ÿä¸æ¯”MySQLå¼ºï¼Œå› ä¸ºè¿˜ç¼ºä¹æ—¶é—´çš„ç£¨ç ºã€‚ä¸€æ˜¯ç³»ç»Ÿæœ¬èº«çš„ç¨³å®šæ€§ï¼ŒäºŒæ˜¯å¼€å‘ï¼Œè¿ç»´éœ€è¦æ›´å¤šç»éªŒæ‰èƒ½æµè¡Œã€‚</li>
<li>
<strong>HBase</strong>æ˜¯ä¸ªä»—åŠ¿æ¬ºäººçš„å¤§è±¡å…µã€‚ä¾ä»—ç€Hadoopçš„ç”Ÿæ€ç¯å¢ƒï¼Œå¯ä»¥æœ‰å¾ˆå¥½çš„æ‰©å±•æ€§ã€‚ä½†æ˜¯å°±åƒè±¡å…µä¸€æ ·ï¼Œä½¿ç”¨è€…éœ€è¦å…»ä¸€å¤´å¤§è±¡(Hadoop),æ‰èƒ½é©±ä½¿ä»–ã€‚</li>
<li>
<strong>Redis</strong>æ˜¯é”®å€¼å­˜å‚¨çš„ä»£è¡¨ï¼ŒåŠŸèƒ½æœ€ç®€å•ã€‚æä¾›éšæœºæ•°æ®å­˜å‚¨ã€‚å°±åƒä¸€æ ¹æ£’å­ä¸€æ ·ï¼Œæ²¡æœ‰å¤šä½™çš„æ„é€ ã€‚ä½†æ˜¯ä¹Ÿæ­£æ˜¯å› æ­¤ï¼Œä»–çš„ä¼¸ç¼©æ€§ç‰¹åˆ«å¥½ã€‚å°±åƒæ‚Ÿç©ºæ‰‹é‡Œçš„é‡‘ç®æ£’ï¼Œå¤§å¯æ…ç ´å¤©ï¼Œå°èƒ½æˆç¼©æˆé’ˆã€‚</li>
</ul>
<h3>æ–‡æ¡£æ•°æ®åº“çš„å¾—å¤±</h3>
<p>å…³ç³»æ¨¡å‹è¯•å›¾å°†æ•°æ®åº“æ¨¡å‹å’Œæ•°æ®åº“å®ç°åˆ†å¼€ï¼Œè®©å¼€å‘è€…å¯ä»¥è„±ç¦»åº•å±‚å¾ˆå¥½çš„æ“ä½œæ•°æ®ã€‚ä½†ç¬”è€…ä»¥ä¸ºå…³ç³»æ¨¡å‹åœ¨ä¸€äº›åº”ç”¨åœºæ™¯ä¸‹æœ‰å¼±ç‚¹ï¼Œç°åœ¨å·²ç»ä¸å¾—ä¸é¢å¯¹ã€‚</p>
<ul>
<li>
<strong><strong><strong>SQL</strong></strong>å¼±ç‚¹ä¸€ï¼šå¿…é¡»æ”¯æŒJoin</strong>ã€‚å› ä¸ºæ•°æ®ä¸èƒ½å¤Ÿæœ‰é‡å¤ã€‚æ‰€ä»¥ä½¿ç”¨èŒƒå¼çš„å…³ç³»æ¨¡å‹ä¼šä¸å¯é¿å…çš„å¤§é‡Joinã€‚å¦‚æœå‚ä¸Joinçš„æ˜¯ä¸€å¼ æ¯”å†…å­˜å°çš„è¡¨è¿˜å¥½ã€‚ä½†æ˜¯å¦‚æœå¤§è¡¨Joinæˆ–è€…è¡¨åˆ†å¸ƒåœ¨å¤šå°æœºå™¨ä¸Šçš„è¯ï¼ŒJoinå°±æ˜¯æ€§èƒ½çš„å™©æ¢¦ã€‚</li>
<li>
<strong><strong>SQLå¼±ç‚¹äºŒï¼š</strong>è®¡ç®—å’Œå­˜å‚¨è€¦åˆ</strong>ã€‚å…³ç³»æ¨¡å‹ä½œä¸ºç»Ÿä¸€çš„æ•°æ®æ¨¡å‹æ—¢å¯ä»¥ç”¨äºæ•°æ®åˆ†æï¼Œä¹Ÿå¯ä»¥ç”¨äºåœ¨çº¿ä¸šåŠ¡ã€‚ä½†è¿™ä¸¤è€…ä¸€ä¸ªå¼ºè°ƒé«˜ååï¼Œä¸€ä¸ªå¼ºè°ƒä½å»¶æ—¶ï¼Œå·²ç»æ¼”åŒ–å‡ºå®Œå…¨ä¸åŒçš„æ¶æ„ã€‚ç”¨åŒä¸€å¥—æ¨¡å‹æ¥æŠ½è±¡æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„ã€‚Hadoopé’ˆå¯¹çš„å°±æ˜¯è®¡ç®—çš„éƒ¨åˆ†ã€‚MongoDB,Redisç­‰é’ˆå¯¹åœ¨çº¿ä¸šåŠ¡ã€‚ä¸¤è€…éƒ½æŠ›å¼ƒäº†å…³ç³»æ¨¡å‹ã€‚</li>
</ul>
<p>é’ˆå¯¹è¿™ä¸¤ä¸ªæ¢¦é­‡ã€‚æ–‡æ¡£æ•°æ®åº“å¦‚MongoDBçš„çš„ä¸»è¦ç›®çš„æ˜¯<strong>Â æä¾›æ›´ä¸°å¯Œçš„æ•°æ®ç»“æ„æ¥æŠ›å¼ƒJoinæ¥é€‚åº”åœ¨çº¿ä¸šåŠ¡</strong>ã€‚å½“ç„¶ä¹Ÿä¸æ˜¯MongoDBå®Œå…¨ä¸èƒ½ç”¨Joinï¼Œä¸èƒ½æ‹¿æ¥åšæ•°æ®åˆ†æï¼Œè®¨è®ºè¿™ä¸ªåªæ˜¯è§ä»è§æ™ºçš„é—®é¢˜ã€‚æ‰€ä»¥æ–‡æ¡£æ•°æ®åº“å¹¶ä¸æ¯”å…³ç³»æ•°æ®åº“å¼ºå¤§ï¼Œç”±äºå¯¹Joinçš„å¼±æ”¯æŒï¼ŒåŠŸèƒ½ä¼šå¼±è®¸å¤šã€‚è®¾è®¡å…³ç³»æ¨¡å‹çš„æ—¶å€™ï¼Œé€šå¸¸åªéœ€è¦è€ƒè™‘å¥½æ•°æ®ç›´æ¥çš„å…³ç³»ï¼Œå®šä¹‰æ•°æ®æ¨¡å‹ã€‚è€Œè®¾è®¡æ–‡æ¡£æ•°æ®åº“æ¨¡å‹çš„æ—¶å€™ï¼Œè¿˜éœ€è¦è€ƒè™‘åº”ç”¨å¦‚ä½•ä½¿ç”¨ã€‚å› æ­¤è®¾è®¡å¥½ä¸€ä¸ªçš„æ–‡æ¡£æ•°æ®åº“Schemaæ¯”è®¾è®¡å…³ç³»æ¨¡å‹æ›´åŠ çš„å›°éš¾ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç”±äºæ–‡æ¡£æ•°æ®åº“äº‹åŠ¡çš„æ”¯æŒä¹Ÿæ˜¯æ¯”è¾ƒå¼±ï¼Œä¸€èˆ¬NoSQLåªä¼šæä¾›ä¸€ä¸ªè¡Œé”ã€‚è¿™ä¹Ÿç»™è®¾è®¡Schemaæ›´åŠ å¢åŠ äº†éš¾åº¦ã€‚å¯¹äºæ–‡æ¡£æ•°æ®åº“çš„ä½¿ç”¨æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œæœ¬æ–‡åªå…³æ³¨æ¨¡å‹è®¾è®¡çš„éƒ¨åˆ†ã€‚</p>
<h3>åæ¨¡å¼ä¸€ï¼šæƒ¯æ€§æ€ç»´/æ²¿ç”¨å…³ç³»æ¨¡å‹</h3>
<p>å…³ç³»æ¨¡å‹æ˜¯æ•°æ®å­˜å‚¨çš„ç»å…¸æ¨¡å‹ï¼Œä½¿ç”¨æ•°æ®æ¨¡å‹èŒƒå¼çš„å¥½å¤„éå¸¸çš„æ˜æ˜¾ã€‚ä½†æ˜¯ç”±äºæ–‡æ¡£æ•°æ®åº“ä¸æ”¯æŒJoin(åŒ…æ‹¬å’Œå¤–é”®æ¯æ¯ç›¸å…³çš„å¤–é”®çº¦æŸ)ç­‰ç‰¹æ€§ï¼Œä¹ æƒ¯æ€§çš„æ²¿ç”¨å…³ç³»æ¨¡å‹æœ‰çš„æ—¶å€™ä¼šå‡ºç°é—®é¢˜ã€‚éœ€è¦åˆ©ç”¨èµ·æ–‡æ¡£æ•°æ®åº“æä¾›çš„ä¸°å¯Œçš„æ•°æ®æ¨¡å‹æ¥åº”å¯¹ã€‚</p>
<p>å€¼å¾—ä¸€æçš„æ˜¯æ–‡æ¡£æ•°æ®åº“çš„è®¾è®¡å’Œå…³ç³»æ¨¡å‹ä¸åŒï¼Œæ˜¯çµæ´»å¤šæ ·çš„ã€‚å¯¹äºåŒä¸€ä¸ªæƒ…å½¢ï¼Œå¯ä»¥è®¾è®¡å‡ºæœ‰å¤šç§èƒ½å¤Ÿå·¥ä½œçš„æ¨¡å‹ï¼Œæ²¡æœ‰ç»å¯¹æ„ä¹‰ä¸Šæœ€å¥½çš„æ¨¡å‹ã€‚</p>
<p>ä¸‹å›¾æ˜¯å…³ç³»æ¨¡å‹å’Œæ–‡æ¡£æ¨¡å‹çš„å¯¹æ¯”ã€‚</p>
<p>è¿™ä¸ªä¸€ä¸ªåšå®¢çš„æ•°æ®æ¨¡å‹ï¼Œæœ‰Blog,Userç­‰è¡¨ã€‚å·¦ä¾§æ˜¯å…³ç³»æ¨¡å‹ï¼Œå³ä¾§æ˜¯æ–‡æ¡£æ¨¡å‹ã€‚è¿™ä¸ªæ–‡æ¡£æ¨¡å‹å¹¶ä¸æ˜¯å®Œå…¨åˆç†ï¼Œå¯ä»¥ä½œä¸ºâ€œæ­£åä¸¤é¢æ•™æâ€åœ¨ä¸‹æ–‡ä¸æ–­é˜è¿°ã€‚</p>
<p><strong>é—®é¢˜ä¸€ï¼šå­˜åœ¨æè¿°å¤šå¯¹å¤šçš„å…³ç³»è¡¨</strong><br>
ç—‡çŠ¶ï¼šæ–‡æ¡£æ•°æ®åº“ä¸­å­˜å‚¨åœ¨æœ‰çº¯ç²¹çš„å…³ç³»è¡¨ï¼Œä¾‹å¦‚ï¼š</p>
<table>
<tbody>
<tr>
<td valign="top" width="213">id</td>
<td valign="top" width="213">user_id</td>
<td valign="top" width="213">blog_id</td>
</tr>
<tr>
<td valign="top" width="213">0</td>
<td valign="top" width="213">0</td>
<td valign="top" width="213">0</td>
</tr>
<tr>
<td valign="top" width="213">1</td>
<td valign="top" width="213">0</td>
<td valign="top" width="213">1</td>
</tr>
</tbody>
</table>
<p>è¿™æ ·çš„è¡¨å°±ç®—åœ¨å…³ç³»æ¨¡å‹ä¸­ä¹Ÿæ˜¯ä¸å¦¥çš„ï¼Œå› ä¸ºè¿™ä¸ªIDéå¸¸çš„å¤šä½™ï¼Œå¯ä»¥ç”¨è”åˆä¸»é”®æ¥è§£å†³ã€‚ä½†æ˜¯åœ¨æ–‡æ¡£æ•°æ®åº“ä¸­ï¼Œç”±äºå¿…é¡»å¼ºåˆ¶å•ä¸»é”®ï¼Œä¸å¾—ä¸é‡‡å–è¿™æ ·çš„è®¾è®¡ã€‚</p>
<p>åå¤„ï¼š</p>
<ol>
<li><span style="line-height: 22px;">ç ´åæ•°æ®å®Œå¤‡æ€§ã€‚ç”±äºIDæ˜¯ä¸»é”®ï¼Œåœ¨æ•°æ®æ¨¡å‹ä¸Šæ²¡æœ‰çº¦æŸæ¥ä¿è¯ä¸å‡ºç°é‡å¤çš„user_id,blog_idå¯¹ã€‚ä¸€æ—¦æ•°æ®å‡ºç°é‡å¤ï¼Œæ›´æ–°åˆ é™¤éƒ½æ˜¯é—®é¢˜ã€‚</span></li>
<li><span style="line-height: 22px;">ç´¢å¼•è¿‡å¤šã€‚ç”±äºæ˜¯å…³ç³»è¡¨ï¼Œå¿…é¡»åœ¨user_idå’Œblog_idä¸Šé¢åˆ†åˆ«å»ºä¸€ä¸ªç´¢å¼•ã€‚å½±å“æ€§èƒ½ã€‚</span></li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>
ä½¿ç”¨æ–‡æ¡£æ•°æ®åº“å…¸å‹çš„å¤„ç†å¤šå¯¹å¤šçš„åŠæ³•ã€‚ä¸æ˜¯å»ºç«‹ä¸€å¼ å…³ç³»è¡¨ï¼Œè€Œæ˜¯åœ¨å…¶ä¸­ä¸€ä¸ªæ–‡æ¡£(å¦‚User)ä¸­ï¼ŒåŠ å…¥ä¸€ä¸ªListå­—æ®µã€‚</p>
<div></div>
<table>
<tbody>
<tr>
<td valign="top" width="160">user_id</td>
<td valign="top" width="160">user_name</td>
<td valign="top" width="160">blog_id[]</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">0</td>
<td valign="top" width="160">Jake</td>
<td valign="top" width="160">0,1</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">1</td>
<td valign="top" width="160">Rose</td>
<td valign="top" width="160">1,2</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
</tbody>
</table>
<p><strong>é—®é¢˜äºŒ:æ²¡æœ‰åŒºåˆ†&#8221;ä¸€å¯¹å¤šå…³ç³»&#8221;å’Œâ€œå¤šå¯¹ä¸€å…³ç³»â€</strong><br>
ç—‡çŠ¶ï¼šå…³ç³»æ¨¡å‹ä¸åŒºåˆ†â€œä¸€å¯¹å¤šâ€å’Œâ€œå¤šå¯¹ä¸€â€ï¼Œå¯¹äºæ–‡æ¡£æ•°æ®åº“æ¥è®²ï¼Œå…³ç³»æ¨¡å‹åªæœ‰â€œå¤šå¯¹ä¸€â€ã€‚å°±åƒè¿™å¼ Commentè¡¨ï¼š</p>
<table>
<tbody>
<tr>
<td valign="top" width="160">comment_id</td>
<td valign="top" width="160">user_id</td>
<td valign="top" width="160">content</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">0</td>
<td valign="top" width="160">0</td>
<td valign="top" width="160">â€œNoSQLåæ¨¡å¼æ˜¯å¥½æ–‡ç« â€</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">1</td>
<td valign="top" width="160">0</td>
<td valign="top" width="160">â€œæ˜¯å•Šâ€</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
</tbody>
</table>
<p>å¦‚æœæ•´ä¸ªæ¨¡å‹éƒ½æ˜¯è¿™æ ·çš„â€œå¤šå¯¹ä¸€â€å…³ç³»å°±éœ€è¦åæ€äº†ã€‚</p>
<p>åå¤„ï¼š</p>
<ol>
<li><span style="line-height: 22px;">é¢å¤–ç´¢å¼•ã€‚å¦‚æœå®¢æˆ·ç«¯å·²çŸ¥user_id,éœ€è¦è·å¾—Userä¿¡æ¯å’ŒCommentä¿¡æ¯ï¼Œéœ€è¦æ‰§è¡Œä¸¤æ¬¡æŸ¥è¯¢ã€‚å…¶ä¸­ä¸€æ¬¡æŸ¥è¯¢éœ€è¦ä½¿ç”¨ç´¢å¼•ã€‚å¹¶ä¸”è¦åœ¨å®¢æˆ·ç«¯è‡ªå·±Joinã€‚è¿™æ ·å¯èƒ½æœ‰æ½œåœ¨æ€§èƒ½é—®é¢˜ã€‚</span></li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>
é—®é¢˜çš„æ ¸å¿ƒåœ¨äºæ˜¯å·²çŸ¥user_idæŸ¥è¯¢ä¸¤å¼ è¡¨ï¼Œè¿˜æ˜¯å·²çŸ¥comment_idæŸ¥è¯¢ä¸¤å¼ è¡¨ã€‚å¦‚æœæ˜¯å·²çŸ¥comment_idè¿™æ ·çš„è®¾è®¡å°±æ˜¯åˆç†çš„ï¼Œä½†æ˜¯å¦‚æœæ˜¯å·²çŸ¥user_idæ¥æŸ¥è¯¢ï¼ŒæŠŠå…³ç³»æ”¾åœ¨userè¡¨é‡Œçš„è®¾è®¡æ›´åˆç†ä¸€äº›ã€‚</p>
<div></div>
<table>
<tbody>
<tr>
<td valign="top" width="160">user_id</td>
<td valign="top" width="160">user_name</td>
<td valign="top" width="160">comment_id[]</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">0</td>
<td valign="top" width="160">Jake</td>
<td valign="top" width="160">0,1</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">1</td>
<td valign="top" width="160">Rose</td>
<td valign="top" width="160">1,2</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
</tbody>
</table>
<p>è¿™æ ·çš„è®¾è®¡ï¼Œå°±å¯ä»¥é¿å…ä¸€ä¸ªç´¢å¼•ã€‚åŒç†ï¼Œå¯¹äºå¤šå¯¹å¤šä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œé€šè¿‡åˆç†çš„å®‰æ’å­—æ®µçš„ä½ç½®å¯ä»¥é¿å…ç´¢å¼•ã€‚</p>
<p>æ­£ç¡®ä½¿ç”¨çš„åœºåˆï¼š</p>
<p>å…³ç³»å‹æ¨¡å‹æ˜¯éå¸¸æˆåŠŸçš„æ•°æ®æ¨¡å‹ï¼Œåˆç†çš„æ²¿ç”¨æ˜¯éå¸¸å¥½çš„ã€‚ä½†æ˜¯ç”±äºæ–‡æ¡£æ•°æ®åº“çš„ç‰¹ç‚¹ï¼Œéœ€è¦é€‚å½“çš„è°ƒæ•´ï¼Œè¿™æ ·å¾—å‡ºçš„æ•°æ®æ¨¡å‹ï¼Œå°½ç®¡æ€§èƒ½ä¸æ˜¯æœ€ä¼˜ï¼Œä½†æ˜¯æœ‰æœ€å¥½çš„çµæ´»æ€§ã€‚å¹¶ä¸”ä¹Ÿæœ‰åˆ©äºå’Œå…³ç³»æ•°æ®åº“è½¬æ¢ã€‚</p>
<h3>åæ¨¡å¼äºŒï¼šå¤„å¤„å¼•ç”¨å®¢æˆ·ç«¯Join</h3>
<p>ç—‡çŠ¶ï¼šæ•°æ®åº“è®¾è®¡ä¸­å……æ»¡äº†xx_idçš„å­—ç«¯ï¼Œåœ¨æŸ¥è¯¢çš„æ—¶å€™éœ€è¦å¤§é‡çš„æ‰‹åŠ¨Joinæ“ä½œã€‚å°±æ¶‰åŠåˆ°äº†è¿™ä¸ªåæ¨¡å¼ã€‚æ­£å¦‚ä¸Šé¢æåˆ°çš„åšå®¢çš„å…³ç³»æ¨¡å‹ï¼Œå¦‚æœå·²çŸ¥blog_idæŸ¥è¯¢commentsï¼Œéœ€è¦è‡³å°‘æ‰§è¡Œ3æ¬¡æŸ¥è¯¢ï¼Œå¹¶ä¸”æ‰‹åŠ¨Joinã€‚</p>
<p>åå¤„ï¼š</p>
<ol>
<li><span style="line-height: 22px;">æ‰‹åŠ¨Joinï¼Œéº»çƒ¦ä¸”æ˜“å‡ºé”™ã€‚æ–‡æ¡£æ•°æ®åº“ä¸æ”¯æŒJoinä¸”æ²¡æœ‰å¤–é”®ä¿è¯ã€‚å› æ­¤éœ€è¦åœ¨å®¢æˆ·ç«¯Joinï¼Œè¿™æ ·çš„æ“ä½œå¯¹äºè½¯ä»¶å¼€å‘æ¥è®²æ˜¯æ¯”è¾ƒç¹ççš„ã€‚ç”±äºæ²¡æœ‰å¤–é”®ä¿è¯ï¼Œå› æ­¤ä¸èƒ½ä¿è¯å–å¾—çš„IDåœ¨æ•°æ®åº“é‡Œé¢æ˜¯æœ‰æ•°æ®çš„ã€‚åœ¨å¤„ç†çš„æ—¶å€™éœ€è¦ä¸æ–­åˆ¤æ–­ï¼Œå®¹æ˜“å‡ºé”™ã€‚</span></li>
<li><span style="line-height: 22px;">å¤šæ¬¡æŸ¥è¯¢ã€‚å¦‚æœå¼•ç”¨è¿‡å¤šï¼ŒæŸ¥è¯¢çš„æ—¶å€™éœ€è¦å¤šæ¬¡æŸ¥è¯¢æ‰èƒ½æŸ¥åˆ°è¶³å¤Ÿçš„æ•°æ®ã€‚æœ¬æ¥æ–‡æ¡£æ•°æ®åº“æ˜¯å¾ˆå¿«çš„ï¼Œä½†æ˜¯ç”±äºå¤šæ¬¡æŸ¥è¯¢ï¼Œç»™æ•°æ®åº“å¢åŠ äº†å‹åŠ›ï¼Œè·å–å…¨éƒ¨æ•°æ®çš„æ—¶é—´ä¹Ÿä¼šå¢åŠ ã€‚</span></li>
<li><span style="line-height: 22px;">äº‹åŠ¡å¤„ç†ç¹çã€‚æ–‡æ¡£æ•°æ®åº“ä¸€èˆ¬ä¸æ”¯æŒä¸€èˆ¬æ„ä¹‰ä¸Šäº‹åŠ¡ï¼Œåªæ”¯æŒè¡Œé”ã€‚å¦‚æœæ–‡æ¡£æ•°æ®åº“æœ‰ç»™å¤šä¸ªè¿æ¥ã€‚åœ¨æ’å…¥çš„æ—¶å€™ï¼Œäº‹åŠ¡çš„å¤„ç†å°±æ˜¯å™©æ¢¦ã€‚åœ¨æ–‡æ¡£æ•°æ®åº“ä¸­ä½¿ç”¨äº‹åŠ¡ï¼Œéœ€è¦ä½¿ç”¨è¡Œé”ï¼Œåœ¨è¿›è¡Œå¤§é‡çš„å¤„ç†ã€‚å¤ªè¿‡ç¹çï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥æœä¸€ä¸‹ã€‚</span></li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>
é€‚å½“ä½¿ç”¨å†…è”æ•°æ®ç»“æ„ã€‚ç”±äºæ–‡æ¡£æ•°æ®åº“æ”¯æŒæ›´å¤æ‚çš„æ•°æ®ç»“æ„å¯ä»¥å°†å¼•ç”¨è½¬æ¢ä¸ºå†…è”çš„æ•°æ®ï¼Œè€Œä¸ç”¨æ–°å»ºä¸€å¼ è¡¨ã€‚è¿™æ ·åšå¯ä»¥è§£å†³ä¸Šé¢çš„ä¸€äº›é—®é¢˜ï¼Œæ˜¯ä¸€ä¸ªæ¨èçš„æ–¹æ¡ˆã€‚å°±åƒä¸Šé¢åšå®¢çš„ä¾‹å­ä¸€æ ·ã€‚å°†äº”å¼ è¡¨ç®€åŒ–æˆäº†ä¸¤å¼ è¡¨ã€‚é‚£ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å†…è”å‘¢ï¼Ÿä¸€èˆ¬è®¤ä¸º</p>
<div>
<ul>
<li><span style="line-height: 19px;">ä½¿ç”¨å†…è”å¯ä»¥è§£å†³è¯»æ€§èƒ½é—®é¢˜ï¼Œæ˜æ˜¾å‡å°‘Queryçš„æ¬¡æ•°çš„æ—¶å€™ã€‚</span></li>
<li><span style="line-height: 19px;">å¯ä»¥ç®€åŒ–æ•°æ®æ¨¡å‹ï¼ŒåŒ–ç®€è¡¨ä¹‹é—´çš„å…³ç³»ï¼Œè€ŒåŒæ—¶ä¸ä¼šå½±å“çµæ´»æ€§çš„æ—¶å€™ã€‚</span></li>
<li><span style="line-height: 19px;">äº‹åŠ¡å¯ä»¥å¾—åˆ°ç®€åŒ–ä¸ºå•è¡Œäº‹åŠ¡çš„æ—¶å€™</span></li>
</ul>
</div>
<div>æ­£ç¡®ä½¿ç”¨çš„åœºåˆï¼š</div>
<p>èŒƒå¼åŒ–çš„ä½¿ç”¨åœºæ™¯ï¼Œæ–‡æ¡£æ•°æ®åº“ä¼šè¢«å¤šä¸ªåº”ç”¨ä½¿ç”¨ã€‚ç”±äºæ•°æ®åº“è®¾è®¡æ— æ³•ä¼°è®¡å¤šä¸ªåº”ç”¨ç°åœ¨åŠå°†æ¥çš„æŸ¥è¯¢æƒ…å†µï¼Œéœ€è¦æå¤§çš„çµæ´»æ€§ã€‚åœ¨è¿™ä¸ªæ—¶å€™ï¼Œä½¿ç”¨å¼•ç”¨æ¯”å†…è”é è°±ã€‚</p>
<h3>åæ¨¡å¼ä¸‰ æ»¥ç”¨å†…è”åæ‚£æ— ç©·</h3>
<p><strong>é—®é¢˜ä¸€ å¦¨ç¢åˆ°æŸ¥è¯¢çš„å†…è”</strong><br>
ç—‡çŠ¶ï¼šé¢‘ç¹æŸ¥è¯¢ä¸€äº›å†…è”å­—æ®µï¼Œä¸¢å¼ƒå…¶ä»–å­—æ®µã€‚</p>
<p>åå¤„ï¼š</p>
<ol>
<li><span style="line-height: 22px;">æ— IDçº¦æŸï¼šä½¿ç”¨å†…è”å­—æ®µå’Œå¼•ç”¨ä¸åŒï¼Œæ˜¯æ²¡æœ‰IDçº¦æŸçš„ã€‚å› æ­¤ä¸èƒ½é€šè¿‡ID(ä¸»é”®)æ¥ç®¡ç†ï¼Œå¦‚æœç»å¸¸éœ€è¦å•ç‹¬æ“ä½œå†…è”å¯¹è±¡ä¼šéå¸¸ä¸ä¾¿ã€‚</span></li>
<li><span style="line-height: 22px;">ç´¢å¼•æ³›æ»¥ï¼šå¦‚æœä»¥å†…è”å­—æ®µä¸ºæ¡ä»¶è¿›è¡ŒæŸ¥è¯¢ï¼Œéœ€è¦å»ºç«‹ç´¢å¼•ã€‚æœ‰å¯èƒ½é€ æˆç´¢å¼•æ³›æ»¥ã€‚</span></li>
<li><span style="line-height: 22px;">æ€§èƒ½æµªè´¹ï¼šå¤§éƒ¨åˆ†æ–‡æ¡£æ•°æ®åº“çš„å®ç°æ˜¯æŒ‰è¡Œå­˜å‚¨çš„ï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œå°½ç®¡åªæŸ¥è¯¢ä¸€ä¸ªå­—æ®µï¼Œä½†æ˜¯DBéœ€è¦å°†æ•´è¡Œä»ç£ç›˜ä¸­å–å‡ºã€‚å¦‚æœå­—æ®µå¤Ÿå°ï¼Œæ–‡æ¡£å¤Ÿå¤§ï¼Œæ˜¯å¾ˆä¸åˆç®—çš„ã€‚</span></li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>
å¦‚æœå‡ºç°ä»¥ä¸Šçš„ç—‡ç»“ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨å¼•ç”¨ä»£æ›¿å†…è”äº†ã€‚å†…è”ç‰¹æ€§ä¸»è¦çš„ç”¨é€”åœ¨äºæé«˜æ€§èƒ½ï¼Œå¦‚æœå‡ºç°æ€§èƒ½ä¸å‡åé™ï¼Œé‚£å°±æ²¡æœ‰æ„ä¹‰äº†ã€‚å¦‚æœå¯¹æ€§èƒ½æœ‰å¾ˆå¼ºçƒˆçš„è¦æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨é‡å¤æ•°æ®ï¼ŒåŒæ ·çš„æ•°æ®å³åœ¨å†…è”å­—æ®µä¸­ä¹Ÿåœ¨å¼•ç”¨çš„è¡¨é‡Œé¢ã€‚è¿™æ ·å¯ä»¥ç»“åˆå†…è”å’Œå¼•ç”¨çš„æ€§èƒ½ä¼˜åŠ¿ã€‚ç¼ºç‚¹æ˜¯æ•°æ®å‡ºç°é‡å¤ï¼Œç»´æŠ¤ä¼šæ¯”è¾ƒéº»çƒ¦ã€‚</p>
<p><strong>é—®é¢˜äºŒ æ— é™è†¨èƒ€çš„å†…è”</strong><br>
ç—‡çŠ¶ï¼šList,Mapç±»å‹çš„å†…è”å­—æ®µä¸æ–­è†¨èƒ€ï¼Œè€Œä¸”æ²¡æœ‰é™åˆ¶ã€‚å°±åƒå‰é¢æåˆ°çš„Blogçš„å†…è”å­—æ®µCommentã€‚å¦‚æœå¯¹æ¯ä¸€ç¯‡Blogçš„Commentæ•°é‡æ²¡æœ‰é™åˆ¶çš„è¯ï¼ŒCommentä¼šæ— é™è†¨èƒ€ã€‚è½»åˆ™å½±å“æ€§èƒ½ï¼Œé‡åˆ™æ’å…¥å¤±è´¥ã€‚</p>
<table>
<tbody>
<tr>
<td valign="top" width="160">Blog_id</td>
<td valign="top" width="160">content</td>
<td valign="top" width="160">Comment[]</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">0</td>
<td valign="top" width="160">â€œâ€¦â€</td>
<td valign="top" width="160">â€œNoSQLåæ¨¡å¼æ˜¯å¥½æ–‡ç« â€, â€œæ˜¯å•Šâ€,â€æ— é™å¢é•¿ä¸­â€â€¦</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
</tbody>
</table>
<p>åå¤„ï¼š</p>
<ol>
<li><span style="line-height: 22px;">æ’å…¥å¤±è´¥ã€‚æ–‡æ¡£æ•°æ®åº“çš„æ¯æ¡è®°å½•éƒ½æœ‰æœ€å¤§å¤§å°ï¼Œå¹¶ä¸”ä¹Ÿæœ‰æ¨èæœ€ä½³çš„å¤§å°ã€‚ä¸€èˆ¬ä¸ä¼šè¶…è¿‡4Mã€‚å°±åƒåˆšåˆšæåˆ°çš„ä¾‹å­ï¼Œå¦‚æœæ˜¯ç¯‡çƒ­é—¨çš„åšæ–‡çš„è¯ï¼Œè¯„è®ºçš„å¤§å°å¾ˆå®¹æ˜“å°±è¶…è¿‡4Mã€‚å±Šæ—¶æ–‡æ¡£å°†æ— æ³•æ›´æ–°ï¼Œæ–°çš„è¯„è®ºæ— æ³•æ’å…¥ã€‚</span></li>
<li><span style="line-height: 22px;">æ€§èƒ½æ‹–æ²¹ç“¶ã€‚ç”±äºå†…è”å­—æ®µè†¨èƒ€ï¼Œå…¶å¤§å°å°†è¿œè¿œè¶…è¿‡å…¶ä»–éƒ¨åˆ†ï¼Œå½±å“å…¶ä»–éƒ¨åˆ†çš„æ€§èƒ½è¡¨ç°ã€‚å¹¶ä¸”å› æ­¤å¯¼è‡´è¯¥è®°å½•å¤§å°é¢‘ç¹å˜åŒ–ï¼Œå¯¹æ¡£æ•°æ®åº“çš„æ•°æ®æ–‡ä»¶å†…éƒ¨å¯èƒ½å› æ­¤äº§ç”Ÿå¾ˆå¤šç¢ç‰‡ã€‚</span></li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>
è®¾å®šæœ€å¤§æ•°ç›®æˆ–è€…ä½¿ç”¨å¼•ç”¨ã€‚è¿˜æ˜¯Blogå’ŒCommentçš„ä¾‹å­ï¼Œå¯ä»¥å°†Commentä»Blogä¸­å‰¥ç¦»å‡ºæˆä¸€å¼ è¡¨ã€‚å¦‚æœè€ƒè™‘åˆ°æ€§èƒ½ï¼Œå¯ä»¥åœ¨Blogè¡¨ä¸­æ–°å»ºä¸€ä¸ªå­—æ®µå¦‚æœ€è¿‘çš„è¯„è®ºã€‚è¿™æ ·æ—¢ä¿è¯äº†æ€§èƒ½ï¼Œåˆèƒ½å¤Ÿé¢„é˜²è†¨èƒ€ã€‚</p>
<table>
<tbody>
<tr>
<td valign="top" width="160">Blog_id</td>
<td valign="top" width="160">content</td>
<td valign="top" width="160">last_five_comment[]</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">0</td>
<td valign="top" width="160">â€œâ€¦â€</td>
<td valign="top" width="160">â€œNoSQLåæ¨¡å¼æ˜¯å¥½æ–‡ç« â€, â€œæ˜¯å•Šâ€,â€æœ€å¤š5æ¡â€â€¦</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
</tbody>
</table>
<p><strong>é—®é¢˜ä¸‰ æ— æ³•ç»´æŠ¤çš„å†…è”</strong><br>
ç—‡çŠ¶ï¼šDBAæƒ³å•ç‹¬ç»´æŠ¤å†…è”å­—æ®µï¼Œä½†æ— æ³•åšåˆ°ã€‚</p>
<p>åå¤„ï¼š</p>
<ol>
<li><span style="line-height: 22px;">æƒé™ç®¡ç†éš¾ã€‚æ•°æ®åº“çš„æƒé™ç®¡ç†çš„æœ€å°ç²’åº¦æ˜¯è¡¨ã€‚å¦‚æœä½¿ç”¨å†…è”æŠ€æœ¯ï¼Œå°±æ„å‘³ç€å†…è”éƒ¨åˆ†å¿…é¡»å’Œå…¶ä»–å­—æ®µç”¨åŒä¸€ä¸ªæƒé™æ¥ç®¡ç†ã€‚æ²¡æœ‰åŠæ³•åœ¨DBçº§åˆ«éšè—ã€‚</span></li>
<li><span style="line-height: 22px;">åˆ‡è¡¨éš¾ã€‚å¦‚æœå‘ç°ä¸€å¼ è¡¨çš„åºå¤§éœ€è¦åˆ‡è¡¨ã€‚è¿™ä¸ªæ—¶å€™å°±æ¯”è¾ƒçº ç»“äº†ã€‚å¦‚æœä¸€åˆ€åˆ‡ï¼Œpartion Keyçš„é€‰æ‹©ï¼›ç´¢å¼•çš„å¤±æ•ˆéƒ½ä¼šæˆä¸ºé—®é¢˜ã€‚å¦‚æœè§‰å¾—æ‹†ä¸ºä¸¤å¼ è¡¨ï¼Œå°±ä¼šå¾ˆå¥½æ“ä½œçš„è¯ï¼Œå°±æ˜¯å†…è”çš„è¿‡åº¦ä½¿ç”¨äº† ã€‚</span></li>
<li><span style="line-height: 22px;">å¤‡ä»½éš¾ã€‚å…³ç³»æ•°æ®åº“ä¸­æ¯å¼ è¡¨å¯ä»¥æœ‰ä¸åŒçš„å¤‡ä»½ç­–ç•¥ã€‚ä½†æ˜¯å¦‚æœå†…è”èµ·æ¥ï¼Œè¿™æ ·çš„å¤‡ä»½å°±åšä¸åˆ°äº†ã€‚</span></li>
</ol>
<div><span style="line-height: 22px;">è§£å†³åŠæ³•ï¼š</span></div>
<div>è®¾è®¡æ•°æ®åº“æ¨¡å‹çš„æ—¶å€™éœ€è¦è€ƒé‡ä¹‹åçš„ç»´æŠ¤æ“ä½œï¼Œå°¤å…¶æ˜¯å†…è”çš„å­—æ®µéœ€ä¸éœ€è¦å•ç‹¬çš„ç»´æŠ¤ã€‚éœ€è¦å’Œè¿ç»´å•†é‡ã€‚å¦‚æœå¯¹å†…è”çš„å­—æ®µæœ‰å•ç‹¬ç»´æŠ¤çš„è¦æ±‚ï¼Œå¯ä»¥æ‹†åˆ†å‡ºæ¥ä½œä¸ºå¼•ç”¨ã€‚</div>
<p><strong>é—®é¢˜å›› ç›¯æ­»åº”ç”¨çš„å†…è”</strong><br>
ç—‡çŠ¶ï¼šåº”ç”¨å¯ä»¥éå¸¸å¥½çš„è¿è¡Œåœ¨æ•°æ®åº“ä¸Šã€‚ä½†æ˜¯å½“æ–°çš„åº”ç”¨æ¥å…¥çš„æ—¶å€™ä¼šå¾ˆéº»çƒ¦ã€‚å› ä¸ºè®¾è®¡æ•°æ®æ¨¡å‹çš„æ—¶å€™è€ƒè™‘åˆ°äº†æŸ¥è¯¢ã€‚æ‰€ä»¥å½“æœ‰æ–°åº”ç”¨ï¼Œæ–°æŸ¥è¯¢æ¥å…¥çš„æ—¶å€™ï¼Œå°±ä¼šéš¾äºä½¿ç”¨åŸæœ‰çš„æ¨¡å‹ã€‚</p>
<p>åå¤„ï¼š</p>
<ol>
<li><span style="line-height: 22px;">æ–°åº”ç”¨æ¥å…¥éš¾ã€‚å½“æ–°çš„åº”ç”¨è¯•å›¾ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“çš„æ—¶å€™ï¼Œæ¥å…¥æ¯”è¾ƒå›°éš¾ã€‚å› ä¸ºæŸ¥è¯¢æ—¶ä¸åŒçš„ï¼Œéœ€è¦è°ƒæ•´æ•°æ®æ¨¡å‹æ‰èƒ½é€‚åº”ã€‚ä½†æ˜¯è°ƒæ•´æ¨¡å‹åˆä¼šå½±å“åŸæœ‰åº”ç”¨ã€‚</span></li>
<li><span style="line-height: 22px;">é›†æˆéš¾ã€‚ä¸åŒçš„å…³ç³»å‹æ•°æ®åº“å¯ä»¥é›†æˆåœ¨ä¸€èµ·ï¼Œå…±åŒä½¿ç”¨ã€‚ä½†æ˜¯å¯¹äºæ–‡æ¡£æ•°æ®åº“ï¼Œè™½ç„¶åŠŸèƒ½ä¸Šå¯ä»¥äº’è¡¥ï¼Œä½†æ˜¯ç”±äºå†…è”æ•°æ®ç»“æ„çš„å·®å¼‚ï¼Œä¹Ÿæ¯”è¾ƒéš¾äºé›†æˆã€‚</span></li>
<li><span style="line-height: 22px;">ETLéš¾ã€‚ç°åœ¨å¤§éƒ¨åˆ†çš„æ•°æ®åˆ†æç³»ç»Ÿä½¿ç”¨çš„æ˜¯å…³ç³»æ¨¡å‹ï¼Œå°±è¿Hadoopè™½ç„¶ä¸ç”¨å…³ç³»æ¨¡å‹ï¼Œä½†æ˜¯å…¶ä¸Šçš„Hiveçš„å¸¸ç”¨å·¥å…·ä¹Ÿæ˜¯æŒ‰å…³ç³»æ¨¡å‹è®¾è®¡çš„ã€‚<br>
</span></li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<p>ä½¿ç”¨èŒƒå¼è®¾è®¡æ•°æ®åº“ï¼Œå³ç”¨å¼•ç”¨ä»£æ›¿å†…è”ã€‚æˆ–è€…åœ¨ä½¿ç”¨å†…è”çš„æ—¶å€™ï¼Œç»™æ¯ä¸ªå†…è”å¯¹è±¡ä¸€ä¸ªå…¨å±€å”¯ä¸€çš„Keyï¼Œä¿è¯å…¶å’Œå…³ç³»æ¨¡å‹ç›´æ¥å¯ä»¥å­˜åœ¨æ˜ å°„å…³ç³»ï¼Œè¿™æ ·å¯ä»¥æé«˜æ•°æ®æ¨¡å‹çš„çµæ´»æ€§ã€‚å¦‚Blogè¡¨ï¼š</p>
<div>
<table>
<tbody>
<tr>
<td valign="top" width="160">Blog_id</td>
<td valign="top" width="160">content</td>
<td valign="top" width="160">Comment[]</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">0</td>
<td valign="top" width="160">â€œâ€¦â€</td>
<td valign="top" width="160">[{&#8220;id&#8221;=1,&#8221;content&#8221;=â€œNoSQLåæ¨¡å¼æ˜¯å¥½æ–‡ç« â€}, {&#8220;id&#8221;=2,&#8221;content&#8221;=â€œæ˜¯å•Šâ€}â€¦]</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
</tbody>
</table>
</div>
<div></div>
<div>è¿™æ ·çš„è®¾è®¡æ—¢å¯ä»¥åˆ©ç”¨åˆ°å†…è”çš„å¥½å¤„ï¼Œåˆèƒ½å°†å…¶å’Œå…³ç³»æ¨¡å‹æ˜ å°„èµ·æ¥ã€‚ç¡®å®šæ˜¯éœ€è¦æ‰‹åŠ¨ç»´æŠ¤comment_idï¼Œä¿è¯å…¶å…¨å±€å”¯ä¸€æ€§ã€‚</div>
<h3>åæ¨¡å¼å››ï¼šåœ¨çº¿è®¡ç®—</h3>
<p>ç—‡çŠ¶ï¼šæœ‰ä¸€äº›è¿è¡Œæ—¶é—´å¾ˆé•¿çš„Query,ç”±äºæœ‰èšåˆè®¡ç®—ï¼Œç´¢å¼•ä¹Ÿä¸èƒ½è§£å†³ã€‚éšç€æ•°æ®é‡çš„å¢é•¿ï¼Œé€æ¸æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚</p>
<p>åå¤„ï¼š</p>
<ol>
<li><span style="line-height: 22px;">å½±å“ç”¨æˆ·ä½“éªŒã€‚åœ¨çº¿ä¸šåŠ¡ä¸­ï¼Œå¦‚æœä¸€ä¸ªæŸ¥è¯¢å¤§äº4sï¼Œç”¨æˆ·ä½“éªŒä¼šæ€¥å‰§ä¸‹é™ã€‚æŒ‰ä¸»é”®å’ŒæŒ‰ç´¢å¼•çš„æŸ¥è¯¢éƒ½èƒ½æ»¡è¶³è¦æ±‚ã€‚ä½†æ˜¯èšåˆæ“ä½œå¾€å¾€éœ€è¦æ‰«æå…¨è¡¨æˆ–è€…å¤§é‡çš„æ•°æ®ï¼Œéšç€æ•°æ®é‡çš„å¢åŠ ï¼ŒæŸ¥è¯¢æ—¶é—´ä¼šå˜é•¿ï¼Œç”¨æˆ·ä¸å¯å®¹å¿ã€‚</span></li>
<li><span style="line-height: 22px;">å½±å“æ•°æ®åº“æ€§èƒ½ã€‚é•¿æŸ¥è¯¢çš„åå¤„æ•°ä¸æ¸…ã€‚åœ¨çº¿ä¸Šåº”ç”¨ä¸­ï¼Œå¦‚æœå‡ºç°é•¿æŸ¥è¯¢ï¼Œå¯èƒ½ä¼šéœ¸å æ•°æ®çš„å¤§éƒ¨åˆ†èµ„æºï¼ŒåŒ…æ‹¬IOï¼Œè¿æ¥ï¼ŒCPUç­‰ç­‰ã€‚å¯¼è‡´å…¶ä»–å¾ˆå¥½çš„æŸ¥è¯¢ï¼Œè½»åˆ™æ€§èƒ½ä¹Ÿä¸‹é™ï¼Œé‡è€…æ— æ³•ä½¿ç”¨æ•°æ®åº“ã€‚é•¿æŸ¥è¯¢å¯ä»¥ç§°ä¹‹ä¸ºDBæ€æ‰‹ã€‚</span></li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>
é¦–å…ˆè¦æƒè¡¡ï¼Œè¿™ä¸ªèšåˆæ“ä½œæ˜¯ä¸æ˜¯å¿…è¦çš„ï¼Œå¿…é¡»å®æ—¶å®Œæˆã€‚å¦‚æœæ²¡æœ‰å¿…è¦å®æ—¶å®Œæˆçš„è¯ï¼Œå¯ä»¥é‡‡å–ç¦»çº¿æ“ä½œçš„æ–¹æ¡ˆã€‚åœ¨å¤œæ·±äººé™çš„æ—¶å€™ï¼Œè·‘ä¸€ä¸ªé•¿æŸ¥è¯¢ï¼Œå°†ç»“æœç¼“å­˜èµ·æ¥ï¼Œç»™ç¬¬äºŒå¤©ä½¿ç”¨ã€‚å¦‚æœå¿…é¡»å®æ—¶å®Œæˆï¼Œåˆ™å¯ä»¥æ–°å»ºä¸€ä¸ªå­—æ®µï¼Œç”¨â€œincrâ€è¿™æ ·çš„æ“ä½œï¼Œåœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå®æ—¶èšåˆç»“æœã€‚è€Œä¸æ˜¯æŸ¥è¯¢çš„æ—¶å€™æ‰§è¡Œä¸€æ¬¡é•¿æŸ¥è¯¢ã€‚å¦‚æœé€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œæˆ–è€…è§‰å¾—å¤§é‡â€œincrâ€æ“ä½œç»™æ•°æ®åº“ç³»ç»Ÿå¸¦æ¥äº†å‹åŠ›ï¼Œå¯ä»¥ä½¿ç”¨Stormä¹‹ç±»çš„å®æ—¶æ•°æ®å¤„ç†æ¡†æ¶ã€‚æ€»ä¹‹ï¼Œè¦æ…ç”¨é•¿æŸ¥è¯¢ã€‚</p>
<h3>åæ¨¡å¼äº”ï¼šæŠŠå†…è”Mapå¯¹è±¡çš„Keyå½“ä½œIDç”¨</h3>
<p>ç—‡çŠ¶ï¼šæ–‡æ¡£æ•°æ®åº“æ”¯æŒå†…è”Mapç±»å‹ã€‚å°†å…¶ä¸­Mapçš„Keyå½“ä½œæ•°æ®åº“çš„ä¸»é”®æ¥ç”¨ã€‚</p>
<table>
<tbody>
<tr>
<td valign="top" width="160">Blog_id</td>
<td valign="top" width="160">content</td>
<td valign="top" width="160">Comment{}</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">0</td>
<td valign="top" width="160">â€œâ€¦â€</td>
<td valign="top" width="160">{&#8220;1&#8243;=â€œNoSQLåæ¨¡å¼æ˜¯å¥½æ–‡ç« â€, &#8220;2&#8221;=â€œæ˜¯å•Šâ€}</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
</tbody>
</table>
<p>è¿™ä¸ªåæ¨¡å¼å¾ˆå®¹æ˜“çŠ¯ï¼Œå› ä¸ºåœ¨ç¼–ç¨‹è¯­è¨€ä¸­Mapæ•°æ®ç»“æ„å°±æ˜¯è¿™ä¹ˆç”¨çš„ã€‚ä½†æ˜¯å¯¹äºæ•°æ®åº“æ¨¡å‹æ¥è¯´ï¼Œè¿™æ˜¯ä¸æŠ˜ä¸æ‰£çš„åæ¨¡å¼ã€‚</p>
<p>åå¤„ï¼š</p>
<ol>
<li><span style="line-height: 22px;">æ— æ³•é€šè¿‡æ•°æ®åº“åšå„ç§(&gt;&lt;=)æŸ¥è¯¢ã€‚å¯¹äºå…³ç³»å‹æ•°æ®åº“æ¥è¯´ï¼Œè™½ç„¶æ•°æ®ç»“æ„å¯ä»¥å¾ˆçµæ´»ï¼Œä½†æŸ¥è¯¢çš„æ—¶å€™éƒ½æ˜¯æŒ‰å±‚æ¬¡çš„ã€‚æ¯”å¦‚comment.idï¼Œcomment.contentã€‚ä¹Ÿå°±æ˜¯è¯´å…¶Mapç±»å‹ä¸­çš„Keyå¯ä»¥ç†è§£ä¸ºå±æ€§åçš„ï¼Œè€Œä¸æ˜¯ç”¨ä½œIDã€‚å› æ­¤ä¸€æ—¦è¿™æ ·ä½¿ç”¨ï¼Œå°±è„±ç¦»çš„æ•°æ®åº“ç®¡åˆ¶ï¼Œæ— æ³•ä½¿ç”¨å„ç§æŸ¥è¯¢åŠŸèƒ½ã€‚</span></li>
<li><span style="line-height: 22px;">æ— æ³•é€šè¿‡ç´¢å¼•æŸ¥è¯¢ã€‚æ–‡æ¡£æ•°æ®å¯å»ºç«‹ç´¢å¼•æ˜¯éœ€è¦åˆ—åçš„ã€‚æ¯”å¦‚comment.idã€‚è€Œè¿™æ ·çš„æ•°æ®ç»“æ„æ²¡æœ‰å›ºå®šçš„åˆ—åï¼Œå› æ­¤æ— æ³•å»ºç«‹ç´¢å¼•ã€‚</span></li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>
ä½¿ç”¨æ•°ç»„+Mapæ¥è§£å†³ã€‚å¦‚ï¼š</p>
<div>
<table>
<tbody>
<tr>
<td valign="top" width="160">Blog_id</td>
<td valign="top" width="160">content</td>
<td valign="top" width="160">Comment[]</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">0</td>
<td valign="top" width="160">â€œâ€¦â€</td>
<td valign="top" width="160">[{&#8220;id&#8221;=1,&#8221;content&#8221;=â€œNoSQLåæ¨¡å¼æ˜¯å¥½æ–‡ç« â€}, {&#8220;id&#8221;=2,&#8221;content&#8221;=â€œæ˜¯å•Šâ€}â€¦]</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
</tbody>
</table>
</div>
<div></div>
<div>è¿™æ ·ï¼Œå°±å¯ä»¥ä½¿ç”¨comment.idä½œä¸ºç´¢å¼•ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ•°æ®åº“çš„æŸ¥è¯¢åŠŸèƒ½ã€‚ç®€å•æœ‰æ•ˆã€‚Mapç±»å‹ä¸­çš„Keyæ˜¯å±æ€§åï¼ŒValueæ˜¯å±æ€§å€¼ã€‚è¿™æ ·çš„ç”¨æ³•æ˜¯æ–‡æ¡£æ•°æ®åº“æ•°æ®æ¨¡å‹çš„æœ¬æ„ï¼Œå› æ­¤å…¶æä¾›çš„å„ç§åŠŸèƒ½æ‰èƒ½åˆ©ç”¨ä¸Šã€‚å¦åˆ™å°±æ— æ³•ä½¿ç”¨ã€‚</div>
<h3>åæ¨¡å¼å…­ï¼šä¸åˆç†çš„ID</h3>
<p>ç—‡çŠ¶ï¼šä½¿ç”¨Stringç”šè‡³æ›´å¤æ‚æ•°æ®ç»“æ„ä½œä¸ºçš„IDï¼Œæˆ–è€…å…¨éƒ¨ä½¿ç”¨æ•°æ®åº“æä¾›çš„è‡ªç”ŸæˆIDã€‚å¦‚ï¼š</p>
<div>
<table>
<tbody>
<tr>
<td valign="top" width="160">id(è¯¥IDç³»ç³»ç»Ÿè‡ªç”Ÿæˆï¼‰</td>
<td valign="top" width="160">Blog_id</td>
<td valign="top" width="160">content</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
<tr>
<td valign="top" width="160">0</td>
<td valign="top" width="160">0</td>
<td valign="top" width="160">&#8230;</td>
<td valign="top" width="160">â€¦â€¦</td>
</tr>
</tbody>
</table>
</div>
<p>åå¤„:</p>
<ol>
<li><span style="line-height: 22px;">IDæ··ä¹±ã€‚å¦‚æœä½¿ç”¨æ•°æ®åº“æä¾›çš„è‡ªç”ŸæˆIDï¼ŒåŒæ—¶è¡¨ä¸­è¿˜æœ‰ä¸€ä¸ªç±»ä¼¼æœ‰ä¸»é”®å«ä¹‰çš„Blog_idï¼Œè¿™æ ·å¾ˆä¸å¥½ï¼Œå®¹æ˜“é€ æˆé€»è¾‘æ··ä¹±ã€‚ç”±äºæ–‡æ¡£æ•°æ®åº“ä¸æ”¯æŒIDçš„é‡å‘½åï¼Œä¹ æƒ¯å…³ç³»æ•°æ®åº“åšæ³•çš„äººå¯èƒ½ä¼šå†å»ºç«‹ä¸€ä¸ªè‡ªå·±çš„é€»è¾‘IDå­—æ®µã€‚è¿™æ˜¯æ²¡æœ‰å¿…è¦çš„ã€‚</span></li>
<li><span style="line-height: 22px;">ç´¢å¼•åºå¤§ï¼Œæ€§èƒ½ä½ä¸‹ã€‚IDæ˜¯æ•°æ®åº“çš„éå¸¸é‡è¦çš„éƒ¨åˆ†ã€‚IDçš„é•¿åº¦å°†å†³å®šç´¢å¼•(åŒ…æ‹¬ä¸»é”®çš„ç´¢å¼•)çš„å¤§å°ï¼Œç›´æ¥å½±å“åˆ°æ•°æ®åº“æ€§èƒ½ã€‚å¦‚æœç´¢å¼•æ¯”å†…å­˜å°ï¼Œæ€§èƒ½ä¼šå¾ˆå¥½ã€‚ä½†ä¸€æ—¦ç´¢å¼•å¤§å°è¶…è¿‡å†…å­˜ï¼Œå‡ºç°æ•°æ®äº¤æ¢ï¼Œæ€§èƒ½ä¼šæ€¥å‰§ä¸‹é™ã€‚ä¸€ä¸ªLongå 8å­—èŠ‚ï¼Œä¸€ä¸ª20ä¸ªå­—ç¬¦çš„UTF8 Stringå ç”¨çº¦60ä¸ªå­—èŠ‚ã€‚ç›¸å·®10å€ä¹‹å·¨ï¼Œä¸èƒ½ä¸è€ƒè™‘ã€‚</span></li>
</ol>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>
å°½é‡ä½¿ç”¨æœ‰ä¸€å®šæ„ä¹‰çš„å­—æ®µåšIDï¼Œå¹¶ä¸”ä¸åœ¨å…¶ä»–å­—æ®µä¸­é‡å¤å‡ºç°ã€‚ä¸ä½¿ç”¨å¤æ‚çš„æ•°æ®ç±»å‹åšIDï¼Œåªä½¿ç”¨int,longæˆ–è€…ç³»ç»Ÿæä¾›çš„ä¸»é”®ç±»å‹åšIDã€‚</p>
<h3>æ–‡æ¡£æ•°æ®åº“çš„åæ¨¡å¼æ€»ç»“</h3>
<p>é˜è¿°äº†è¿™ä¹ˆå¤šçš„åæ¨¡å¼ï¼Œä¸‹é¢æœ‰ä¸ªä¸€è§ˆè¡¨ï¼Œæ¶µç›–äº†ä¸Šé¢æ‰€æœ‰çš„åæ¨¡å¼ã€‚è¿™ä¸ªä¸€è§ˆè¡¨ï¼Œæ˜¯æŒ‰ç…§æ–‡æ¡£æ•°æ®åº“æ¨¡å‹å»ºç«‹çš„ã€‚æ˜¯ä¸ªæ–‡æ¡£æ•°æ®åº“æ¨¡å‹çš„ä¾‹å­ã€‚</p>
<table>
<tbody>
<tr>
<td>ID</td>
<td>åæ¨¡å¼å</td>
<td>é—®é¢˜</td>
</tr>
<tr>
<td valign="top" width="55">0</td>
<td valign="top" width="108">å­˜åœ¨æè¿°å¤šå¯¹å¤šçš„å…³ç³»è¡¨</td>
<td valign="top" width="601">[{IDï¼š00<br>
ç—‡çŠ¶ï¼šæ–‡æ¡£æ•°æ®åº“ä¸­å­˜å‚¨åœ¨æœ‰çº¯ç²¹çš„å…³ç³»è¡¨<br>
åå¤„ï¼š[ç ´åæ•°æ®å®Œå¤‡æ€§ï¼Œç´¢å¼•è¿‡å¤š]<br>
è§£å†³æ–¹æ¡ˆï¼šåŠ å…¥ä¸€ä¸ªListå­—æ®µ<br>
},{<br>
IDï¼š01<br>
ç—‡çŠ¶ï¼šå…³ç³»æ¨¡å‹ä¸åŒºåˆ†â€œä¸€å¯¹å¤šâ€å’Œâ€œå¤šå¯¹ä¸€â€<br>
åå¤„ï¼šé¢å¤–ç´¢å¼•<br>
è§£å†³æ–¹æ¡ˆï¼šåˆç†çš„å®‰æ’å­—æ®µçš„ä½ç½®<br>
}]</td>
</tr>
<tr>
<td valign="top" width="55">1</td>
<td valign="top" width="108">å¤„å¤„å¼•ç”¨å®¢æˆ·ç«¯Join</td>
<td valign="top" width="601">[{<br>
IDï¼š10<br>
ç—‡çŠ¶ï¼šæŸ¥è¯¢çš„æ—¶å€™éœ€è¦å¤§é‡çš„æ‰‹åŠ¨Joinæ“ä½œ<br>
åå¤„ï¼š[æ‰‹åŠ¨Joinï¼Œå¤šæ¬¡æŸ¥è¯¢, äº‹åŠ¡å¤„ç†ç¹ç]<br>
è§£å†³æ–¹æ¡ˆï¼šé€‚å½“ä½¿ç”¨å†…è”æ•°æ®ç»“æ„ã€‚<br>
}]</td>
</tr>
<tr>
<td valign="top" width="55">2</td>
<td valign="top" width="108">æ»¥ç”¨å†…è”åæ‚£æ— ç©·</td>
<td valign="top" width="601">[{<br>
IDï¼š20<br>
ç—‡çŠ¶ï¼šé¢‘ç¹æŸ¥è¯¢ä¸€äº›å†…è”å­—æ®µï¼Œä¸¢å¼ƒå…¶ä»–å­—æ®µ<br>
åå¤„ï¼š[æ— IDçº¦æŸï¼Œç´¢å¼•æ³›æ»¥, æ€§èƒ½æµªè´¹]<br>
è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å¼•ç”¨ä»£æ›¿å†…è”äº†,å…è®¸é‡å¤æ•°æ®<br>
},{<br>
IDï¼š21<br>
ç—‡çŠ¶ï¼šList,Mapç±»å‹çš„å†…è”å­—æ®µä¸æ–­è†¨èƒ€ï¼Œè€Œä¸”æ²¡æœ‰é™åˆ¶<br>
åå¤„ï¼š[æ’å…¥å¤±è´¥, æ€§èƒ½æ‹–æ²¹ç“¶]<br>
è§£å†³æ–¹æ¡ˆï¼šè®¾å®šæœ€å¤§æ•°ç›®æˆ–è€…ä½¿ç”¨å¼•ç”¨ã€‚<br>
},{<br>
IDï¼š22<br>
ç—‡çŠ¶ï¼šDBAæƒ³å•ç‹¬ç»´æŠ¤å†…è”å­—æ®µï¼Œä½†æ— æ³•åšåˆ°<br>
åå¤„ï¼š[æƒé™ç®¡ç†éš¾, åˆ‡è¡¨éš¾, å¤‡ä»½éš¾]<br>
è§£å†³æ–¹æ¡ˆï¼šè®¾è®¡æ•°æ®åº“æ¨¡å‹çš„æ—¶å€™éœ€è¦è€ƒé‡ä¹‹åçš„ç»´æŠ¤æ“ä½œ<br>
},{<br>
IDï¼š23<br>
ç—‡çŠ¶ï¼šåº”ç”¨å¯ä»¥éå¸¸å¥½çš„è¿è¡Œåœ¨æ•°æ®åº“ä¸Šã€‚ä½†æ˜¯å½“æ–°çš„åº”ç”¨æ¥å…¥çš„æ—¶å€™ä¼šå¾ˆéº»çƒ¦ã€‚å†…è”ç›¯æ­»äº†åº”ç”¨<br>
åå¤„ï¼š[æ–°åº”ç”¨æ¥å…¥éš¾, é›†æˆéš¾, ETLéš¾]<br>
è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨èŒƒå¼è®¾è®¡æ•°æ®åº“ï¼Œå³ç”¨å¼•ç”¨ä»£æ›¿å†…è”ã€‚ä¿è¯å…¶å’Œå…³ç³»æ¨¡å‹ç›´æ¥å¯ä»¥å­˜åœ¨æ˜ å°„å…³ç³»<br>
}]</td>
</tr>
<tr>
<td valign="top" width="55">3</td>
<td valign="top" width="108">åœ¨çº¿è®¡ç®—</td>
<td valign="top" width="601">[{<br>
IDï¼š30<br>
ç—‡çŠ¶ï¼šæœ‰ä¸€äº›è¿è¡Œæ—¶é—´å¾ˆé•¿çš„Query, é€æ¸æˆä¸ºæ€§èƒ½ç“¶é¢ˆã€‚<br>
åå¤„ï¼š[å½±å“ç”¨æˆ·ä½“éªŒï¼Œå½±å“æ•°æ®åº“æ€§èƒ½]<br>
è§£å†³æ–¹æ¡ˆï¼šå–æ¶ˆä¸å¿…è¦çš„èšåˆæ“ä½œ. è¿è¡Œçš„æ—¶å€™ï¼Œå®æ—¶èšåˆç»“æœ.ä½¿ç”¨ç¬¬ä¸‰æ–¹å®æ—¶æˆ–éå®æ—¶å·¥å…·ã€‚å¦‚Hadoopï¼ŒStorm.<br>
}]</td>
</tr>
<tr>
<td valign="top" width="55">4</td>
<td valign="top" width="108">æŠŠå†…è”Mapå¯¹è±¡çš„Keyå½“ä½œIDç”¨</td>
<td valign="top" width="601">[{<br>
IDï¼š40<br>
ç—‡çŠ¶ï¼šæ–‡æ¡£æ•°æ®åº“æ”¯æŒå†…è”Mapç±»å‹ã€‚å°†å…¶ä¸­Mapçš„Keyå½“ä½œæ•°æ®åº“çš„ä¸»é”®æ¥ç”¨ã€‚<br>
åå¤„ï¼š[æ— æ³•é€šè¿‡æ•°æ®åº“åšå„ç§(&gt;&lt;&#8220;&#8221;&#8221; =)æŸ¥è¯¢ï¼Œæ— æ³•é€šè¿‡ç´¢å¼•æŸ¥è¯¢]<br>
è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æ•°ç»„+Mapæ¥è§£å†³ã€‚<br>
}]</td>
</tr>
<tr>
<td valign="top" width="55">5</td>
<td valign="top" width="108">ä¸åˆç†çš„ID</td>
<td valign="top" width="601">[{<br>
IDï¼š50<br>
ç—‡çŠ¶ï¼šç”¨Stringç”šè‡³æ›´å¤æ‚æ•°æ®ç»“æ„ä½œä¸ºçš„IDï¼Œæˆ–è€…å…¨éƒ¨ä½¿ç”¨æ•°æ®åº“æä¾›çš„è‡ªç”ŸæˆIDã€‚<br>
åå¤„ï¼š[IDæ··ä¹±ï¼Œç´¢å¼•åºå¤§]<br>
è§£å†³æ–¹æ¡ˆï¼šå°½é‡ä½¿ç”¨æœ‰ä¸€å®šæ„ä¹‰çš„å­—æ®µåšIDã€‚ä¸ä½¿ç”¨å¤æ‚çš„æ•°æ®ç±»å‹åšIDã€‚<br>
}]</td>
</tr>
</tbody>
</table>
<p>æœ¬æ–‡è¯•å›¾æ€»ç»“äº†ç¬”è€…çŸ¥é“çš„é‡è¦çš„æ–‡æ¡£æ•°æ®åº“çš„åæ¨¡å¼ã€‚ç°åœ¨å…³äºNoSQLæ•°æ®æ¨¡å‹è®¾è®¡æ¨¡å¼çš„è®¨è®ºæ‰åˆšåˆšèµ·æ­¥ï¼Œå°†æ¥ä¹Ÿè®¸ä¼šé€æ¸è‡ªæˆä½“ç³»ã€‚å¯¹äºåˆ—æ•°æ®åº“å’ŒKey-Valueçš„åæ¨¡å¼ï¼Œç¬”è€…ç­‰åˆ°æœ‰äº†è¶³å¤Ÿç§¯ç´¯çš„æ—¶å€™ï¼Œå†å’Œå¤§å®¶åˆ†äº«ã€‚</p>
<div></div>
							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e6%8a%80%e6%9c%af/%e6%af%8f%e6%97%a5%e5%bf%83%e5%be%97/index.html" rel="category tag">æ¯æ—¥å¿ƒå¾—</a>			</span>
				<span class="sep"> | </span>
			
							<span class="taglinks">
				æ ‡ç­¾ï¼š <a href="./../../tag/nosql/index.html" rel="tag">NoSQL</a>, <a href="./../../tag/%e5%8f%8d%e6%a8%a1%e5%bc%8f/index.html" rel="tag">åæ¨¡å¼</a>, <a href="./../../tag/%e6%96%87%e6%a1%a3%e6%95%b0%e6%8d%ae%e5%ba%93/index.html" rel="tag">æ–‡æ¡£æ•°æ®åº“</a>			</span>
				<span class="sep"> | </span>
			
		
						<span class="comments-link"><a href="./../../nosql-anti-pattern-document/index.html#comments">5 è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-26652 -->

							
								
<article id="post-26588" class="post-26588 post type-post status-publish format-standard hentry category-5 tag-11 tag-100">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../2012%e5%b9%b4%e5%ad%a6%e4%b9%a0%e5%b0%8f%e7%bb%93/index.html" title="è¿ç»“åˆ°2012å¹´å­¦ä¹ å°ç»“" rel="bookmark">2012å¹´å­¦ä¹ å°ç»“</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../2012%e5%b9%b4%e5%ad%a6%e4%b9%a0%e5%b0%8f%e7%bb%93/index.html" title="ä¸‹åˆ12:20" rel="bookmark">
							<time class="entry-date updated" datetime="2013-01-03T12:20:52+08:00">2013å¹´1æœˆ3æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								<p>ä¸€è½¬èº«å°±åˆ°2013äº†ã€‚è¯»è€…æ–°å¹´å¿«ä¹ï¼Œå¸Œæœ›åƒåˆ°é¥ºå­çš„äººéƒ½å¹¸ç¦ã€‚<br>
æ–°å¹´ä¼Šå§‹ï¼Œç¬”è€…åœ¨æƒ³åšç‚¹ä»€ä¹ˆä¹‹å‰ï¼Œè¿˜æ˜¯å›é¡¾ä¸‹å»å¹´åšäº†äº›ä»€ä¹ˆï¼Œå¥½æ­¹æœ‰ä¸ªäº¤ä»£ã€‚è®°å½•ä¸‹å­¦ä¹ çš„è½¨è¿¹ï¼Œåˆ†äº«ç»™æ‚¨è¿˜æœ‰æœªæ¥çš„è‡ªå·±ã€‚</p>
<p>å»å¹´æˆ‘å°åŠå¹´åœ¨ç››å¤§æ¸¸æˆï¼Œä¸šåŠ¡è¾ƒå°‘ï¼Œå°¸ä½ç´ é¤ï¼Œæ²¡åšä»€ä¹ˆäº‹æƒ…ã€‚å¤§åŠå¹´åœ¨EMCä¸­å›½ç ”ç©¶é™¢ï¼Œè™½ç„¶ç°åœ¨æœ‰äº›å°å¿™ï¼Œä½†ä¹‹å‰é€‚åº”é¡¹ç›®å’Œå›¢é˜ŸèŠ±äº†å¥½ä¹…ã€‚å› æ­¤æœ‰å¤§æŠŠå¤§æŠŠçš„æ—¶é—´æ¥å­¦ä¹ ã€‚è¿™æ˜¯æˆ‘çš„å­¦ä¹ é»„é‡‘å¹´ï¼Œè¯»äº†60è¯»æœ¬ä¹¦ï¼Œçœ‹äº†ä¸å°‘å¼€æºé¡¹ç›®å¦‚Kalfa,CloudFoundryçš„æºä»£ç ã€‚å­¦åˆ°äº†ä¸å°‘çš„çŸ¥è¯†ï¼ŒçœŸå¼€å¿ƒã€‚</p>
<p>å­¦çŸ¥è¯†çš„è¯ï¼Œä»¥å‰æ¯”è¾ƒå–œæ¬¢ä¸Šç½‘ï¼Œç°åœ¨æ¯”è¾ƒå–œæ¬¢çœ‹ä¹¦ã€‚ç½‘ç»œæ–‡å­—å¾ˆå¤šæ¯”è¾ƒæ¦‚ç•¥ï¼Œæ•£ä¹±ã€‚è€Œä¸€æœ¬å¥½ä¹¦å¾€å¾€å€¾å°½ä¸€ä¸ªäººçš„ç›¸å…³ä¸“é•¿ä¸Šå…¨éƒ¨æ‰èƒ½ã€‚è¯»è¯»ä¹¦ï¼Œçœæ—¶çœåŠ›ã€‚</p>
<p><strong>ç³»ç»Ÿç¼–ç¨‹</strong></p>
<p>ä»Šå¹´å¹´åˆå‰ï¼Œæˆ‘åšçš„ç¨‹åºçš„Bugå¤§å¤šé›†ä¸­åœ¨ç³»ç»Ÿå’Œç½‘ç»œéƒ¨åˆ†ï¼Œå†åŠ ä¸Šéœ€è¦ç»´æŠ¤æ”¹è¿›ä¸€ä¸ªC++çš„æ¨¡å—ã€‚æ‰€ä»¥æˆ‘å…ˆå¥½å¥½å­¦ä¹ äº†ä¸‹ç³»ç»Ÿç¼–ç¨‹ï¼Œç½‘ç»œï¼Œå’ŒC++æ–¹é¢çš„çŸ¥è¯†ã€‚è™½ç„¶éƒ½æ˜¯å¤§éª¨å¤´ï¼Œä½†æ˜¯å› ä¸ºæ—¶é—´å……è£•ï¼Œå­¦çš„ä¹Ÿæ‰å®ã€‚</p>
<p>ç¬”è€…ä»¥å‰å­¦è¿‡ä¸€äº›ç³»ç»Ÿç¼–ç¨‹ï¼Œä½†å¸Œæœ›äº†è§£å¾—æ›´æ·±å…¥ä¸€äº›ã€‚æ‰€ä»¥å…ˆè¯»äº†çš„ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ï¼Œè¿™æœ¬ä¹¦é‡Œâ€œå­˜å‚¨å™¨å±±â€çš„æ¦‚å¿µè®©æˆ‘èŒ…èˆé¡¿å¼€ã€‚æ•™æˆå…ˆç”Ÿåˆ«å‡ºå¿ƒè£çš„å°†å­˜å‚¨å™¨çš„ååé‡ï¼Œç”»æˆäº†ä¸€åº§å±±ã€‚å¹¶è‡ªå·±åšäº†äº›æµ‹è¯•ï¼Œå†™äº†ã€Š<a href="http://www.yankay.com/%E5%86%85%E5%AD%98%E7%A9%B6%E7%AB%9F%E6%9C%89%E5%A4%9A%E5%BF%AB%EF%BC%9F/">å†…å­˜ç©¶ç«Ÿæœ‰å¤šå¿«ï¼Ÿ</a>ã€‹ä¸€æ–‡ã€‚å¦‚æœç»†ç»†åœ¨å±±ä¸Šå“ï¼Œå¯ä»¥è€ƒè™‘å¦‚ä½•æœ€å¥½çš„ä½¿ç”¨å­˜å‚¨å™¨ã€‚ç„¶åçœ‹äº†äº›UNIXç¼–ç¨‹çš„å†…å®¹ï¼ŒåŒ…æ‹¬ç³»ç»Ÿæä¾›APIå’Œä»–ä»¬çš„è„¾æ°”ã€‚è¿˜ç ”ç©¶äº†ä¸‹å¦‚ä½•åœ¨Unixé‡Œé¢ç”¨GDBä¹‹ç±»çš„å·¥å…·Debugï¼ŒæŸ¥çœ‹ç¨‹åºçŠ¶æ€ã€‚</p>
<p><strong>ç½‘ç»œ</strong></p>
<p>ç½‘ç»œæ˜¯éå¸¸é‡è¦çš„åŸºç¡€çŸ¥è¯†ã€‚åšäº‹æƒ…çš„æ—¶å€™ï¼Œå°±æ€•ç½‘ç»œæ“ä½œï¼Œå› ä¸ºæ€»æ˜¯ä¼šé‡åˆ°å¥‡æ€ªçš„é—®é¢˜ã€‚èº²é¿ä¸æ˜¯åŠæ³•ï¼Œæ‰€ä»¥ç»†ç»†å­¦äº†å­¦ã€‚ã€Šè®¡ç®—æœºç½‘ç»œã€‹è¿™éƒ¨ä¹¦å¾ˆå¥½ï¼Œå› ä¸ºé‡ç‰ˆäº†ï¼Œæ‰€ä»¥å†è¯»äº†è¯»ã€‚ä¸»è¦æ˜¯æ–°å¢çš„æ— çº¿ç½‘ç»œçš„ç¯‡å¹…ã€‚ç¬”è€…æ„å¤–çš„å‘ç°WIFIçš„é¢‘ç‡å’Œå¾®æ³¢ç‚‰åŒæ ·æ˜¯2.4GHzã€‚æ‰€ä»¥èŒç”Ÿäº†ç”¨æ‰‹æœºæ£€æµ‹å¾®åšè·¯æ³„æ¼çš„åŠæ³•ã€‚å¹¶ä¸”è®¾æƒ³äº†â€œ<a href="https://github.com/yankay/safemicrowave">å¾®æ³¢ç‚‰å®‰å…¨ä¸“å®¶</a>â€çš„æ‰‹æœºæ¸¸æˆã€‚ç”±äºè¿™ä¸ªæ¸¸æˆå®åœ¨å¤ªå†·ç¬‘è¯äº†ï¼Œ æ‰€ä»¥ä¸€ç›´æ²¡å®ç°ã€‚:-)ç½‘ç»œä¹Ÿè¶Šæ¥è¶Šæ³¨é‡å®‰å…¨æ€§ï¼Œå¯¹å¯†ç å­¦çš„å­¦ä¹ ä¹Ÿæ˜¯è¦ä¸é—ä½™åŠ›åœ°ã€‚</p>
<p><strong>ç¼–ç¨‹é£æ ¼</strong></p>
<p>ç¼–ç¨‹é£æ ¼æ˜¯ä¸ªè¯´ä¸æ¸…é“ä¸æ˜çš„ä¸œè¥¿ã€‚ç¬”è€…ä¸€ç›´å¾ˆå–œçˆ±Linuxã€‚æ‰€ä»¥å­¦äº†å­¦Linux/Unixçš„ç¼–ç¨‹é£æ ¼ã€‚ä¸‹é¢è¿™ä¸‰æœ¬ä¹¦éƒ½æ˜¯è®²è¿™ä¸ªã€‚è™½ç„¶ä¹¦åéƒ½å¾ˆå“—ä¼—å–å® ï¼Œä½†å†…å®¹ä¸é”™ã€‚æœ‰è¶£æ˜¯æœ€å“—ä¼—å–å® çš„ã€Šç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“-ä»å°å·¥åˆ°ä¸“å®¶ã€‹ï¼Œå°†Linuxçš„æ€æƒ³å®šä¹‰ä¸ºâ€œ<strong>æ³¨é‡å®æ•ˆ</strong>â€ã€‚ç»™äº†ç¬”è€…å½“å¤´ä¸€æ£’ï¼Œå…¶å®ç¼–ç¨‹é£æ ¼ä»€ä¹ˆçš„ï¼Œå°±æ˜¯ä¸è‡ªå·±ç©è‡ªå·±ã€‚åšäº§å“åº”è¯¥ç”¨æœ€ç»æµçš„ï¼Œåšå­¦é—®åˆ™è¦æ˜¯æœ€æ·±åˆ»çš„ã€‚</p>
<p><strong>WebæŠ€æœ¯</strong></p>
<p>äº’è”ç½‘æŠ€æœ¯æ˜¯ç¬”è€…æ„Ÿå…´è¶£çš„ä¼ ç»Ÿæ–¹å‘ã€‚è¿™æ–¹é¢çš„å­¦ä¹ ä¸æ˜¯é è¯»ä¹¦ä¸ºä¸»ï¼Œæœ¬å¹´åº¦è¯»äº†ä¸¤æœ¬ã€‚ä¸€æœ¬ä¹¦ä½œè€…æ˜¯è…¾è®¯çš„â€œ<a href="http://book.douban.com/search/%E6%9E%97%E6%98%8A">éƒ­æ¬£</a>â€ï¼Œå¦ä¸€æœ¬æ˜¯æ—¥æœ¬æŸæœ€å¤§äº’è”ç½‘ä¼ä¸šçš„å·¥ç¨‹å¸ˆã€‚ç¬”è€…æ˜¯ä¸ªå“ˆæ—¥é’å¹´ï¼Œä½†æ˜¯ä¸å¾—ä¸è¯´ï¼Œåœ¨æ—¥æœ¬äººçš„äº’è”ç½‘æŠ€æœ¯ï¼Œæ€•æ˜¯æœ‰ç‚¹è½åã€‚å¾ˆå¤šWebé‡è¦é—®é¢˜ï¼Œæ¯”å¦‚MySQLï¼Œç¼“å­˜æµ…å°è¾„æ­¢ï¼Œç”šè‡³åªå­—æœªæç›‘æ§ã€‚å›½äººæœç„¶å¾ˆå¼ºï¼Œé¢é¢ä¿±åˆ°ï¼Œé­è¾Ÿå…¥é‡Œã€‚</p>
<p><strong>å¹¶å‘</strong></p>
<p>å¹¶å‘ä¹Ÿæ˜¯ç¬”è€…æœ€æ„Ÿå…´è¶£çš„æ–¹å‘ï¼Œç¬”è€…æ·±å…¥å­¦äº†å­¦å¤šæ ¸çš„åŸç†ã€‚å°±æ˜¯APIçš„é‡Œé”å’ŒåŸå­æ“ä½œï¼Œå¦‚ä½•æ˜ å°„æˆCPUçš„æŒ‡ä»¤ï¼Œå¹¶ä¸”CPUæ˜¯å¦‚ä½•æ‰§è¡Œè¿™äº›æŒ‡ä»¤çš„ã€‚å¾ˆå¤šé—®é¢˜ï¼ŒèŒ…å¡é¡¿å¼€ã€‚åæ¥å†™äº†ç¯‡æ–‡ç« ã€Š<a href="http://www.yankay.com/å¹¶å‘ç¼–ç¨‹ä¹‹å·§ç”¨é”">å¹¶å‘ç¼–ç¨‹ä¹‹å·§ç”¨é”</a>ã€‹ã€‚ç»è¿‡ä¸å°‘çŸ¥è¯†ç§¯ç´¯åï¼Œè§‰å¾—å¹¶å‘ä¸æ˜¯å¾ˆç®€å•ã€‚å¤šæ ¸å¹¶å‘æœ¬å°±æ˜¯ä¸ºäº†æå‡æ€§èƒ½ï¼Œä½†ä»¥æå‡æ€§èƒ½ä¸ºç›®æ ‡å†™å¹¶å‘ç¨‹åºå¹¶ä¸ç®€å•ã€‚è‡ªå·±ä¸åº”è¯¥è½»æ˜“æ“ä½œåº•å±‚å¹¶å‘å…ƒç´ ï¼Œæˆ–è€…ä¸ä½¿ç”¨æ— è°“çš„å¹¶å‘ã€‚å¦‚æœè¦ç”¨ä¸€ä¸‹ï¼Œä¼°è®¡å¾—æ·±æ€ç†Ÿè™‘å¥½å‡ å¤©æ‰è¡Œã€‚</p>
<p><strong>æ•°æ®åº“</strong></p>
<p>ç››å¤§æ¸¸æˆçš„&#8221;ç³»ç»Ÿå¹³å°éƒ¨&#8221;è¿ç»´äº†å¤§é‡çš„MySQLã€‚ç¬”è€…åœ¨é‡Œå¤´è€³æ¿¡ç›®æŸ“ï¼Œä¹Ÿæ‡‚äº†ä¸€äº›ã€‚å½“ç„¶çœ‹ä¹¦ä¹Ÿæ˜¯å­¦ä¹ MySQLçš„ä¸€éƒ¨åˆ†ã€‚å°¤å…¶æ¨èç®€æœé˜³çš„è¿™éƒ¨ï¼Œæœ‰å¾ˆå¤šé˜¿é‡Œå·´å·´è‡ªèº«çš„å®è·µç²¾é«“åœ¨é‡Œå¤´ã€‚å›½äººè¿˜æ˜¯å¾ˆå¥½å¾ˆå¼ºå¤§ã€‚ã€ŠSQLåæ¨¡å¼ã€‹æ˜¯æˆ‘æœ€å–œçˆ±çš„å›¾ä¹¦ï¼Œè–„è–„ä¸€æœ¬å°å†Œå­ï¼Œè®²è®¾è®¡æ•°æ®åº“Schemaçš„æ—¶å€™å®¹æ˜“çŠ¯çš„é”™è¯¯ã€‚å°½ç®¡è‡ªè®¤ä¸ºå¯¹æ•°æ®åº“é¢‡æœ‰è§è§£ï¼Œä½†æ˜¯å‘ç°å‡ ä¹æ¯ä¸€åæ¨¡å¼è‡ªå·±éƒ½ç¢°åˆ°è¿‡ï¼Œå€å—æ‰“å‡»ã€‚ä»æ­¤é€¢äººå°±æ¨èè¿™æœ¬ã€ŠSQLåæ¨¡å¼ã€‹ã€‚çœ‹è¿‡çš„äººéƒ½è¡¨ç¤ºå¤§èµã€‚</p>
<p><strong>ç¡¬ä»¶å­˜å‚¨</strong></p>
<p>ç¬”è€…åˆšåˆ°EMCåå¯¹SAN,FCoEç­‰ç­‰å­˜å‚¨ç›¸å…³çš„çŸ¥è¯†è¿˜ä¸€æ— æ‰€çŸ¥ã€‚å¦‚æœè¿‡äº†æ®µæ—¶é—´è¿˜ä¸æ‡‚ï¼Œå²‚ä¸è®©äººç¬‘æ‰å¤§ç‰™ã€‚æ‰€ä»¥èŠ±äº†äº›æ—¶é—´ç³»ç»Ÿçš„ç§‘æ™®ä¸‹å­˜å‚¨ç›¸å…³çš„çŸ¥è¯†ã€‚å†å¾—æ˜“äºå…¬å¸å†…éƒ¨ç¯å¢ƒï¼Œè¿˜æœ‰åŸ¹è®­æˆè¯¾ã€‚ç¬”è€…å¯¹å­˜å‚¨ç®—æ˜¯åˆçª¥é—¨å¾„äº†ã€‚</p>
<p><strong>è®¡ç®—æœºè¯­è¨€</strong></p>
<p>C++</p>
<p>ä¸æ€•ç¬‘è¯ï¼Œç¬”è€…å¯¹æŠ€æœ¯æœ‰æ´ç™–ï¼Œå¯¹C++æœ‰ç‚¹æ’æ–¥ï¼Œæ‰€ä»¥ä¸ç®—ç²¾é€šã€‚ä½†å·¥ä½œéœ€è¦ï¼Œæ€»å½’è¿˜æ˜¯å¾—è®¤çœŸçœ‹çœ‹çš„ã€‚ä½†è¯»äº†è¯»ã€ŠEffective C++ã€‹åï¼Œçˆ±ä¸é‡Šæ‰‹ï¼Œåˆåå¤è¯»äº†ä¸¤éã€‚å°½ç®¡C++æä¾›äº†é‚£ä¹ˆå¤šä¹±ä¸ƒå…«ç³Ÿçš„è¯­è¨€çº§å·¥å…·ï¼Œæœ‰å¾ˆå¤šé™·é˜±ï¼Œç”¨å¥½ä»–ä»¬ä¸å®¹æ˜“ï¼Œä½†å¦‚æœå¾ªè§„è¹ˆçŸ©çš„ä½¿ç”¨ï¼Œè¿˜æ˜¯å¾ˆé¡ºæ‰‹çš„ã€‚ã€ŠEffective C++ã€‹å°±æ˜¯ç»™æˆ‘æä¾›è¿™äº›å¾ªè§„è¹ˆçŸ©çš„æ–¹æ³•ï¼Œè®©äººå¯ä»¥èˆ’æœç‚¹ã€‚ç„¶åæˆ‘è¿«ä¸åŠå¾…çš„è¯»äº†ã€ŠMore Effective C++ã€‹æ„Ÿè§‰å¤§ä¸å¦‚å‰ä½œå®ç”¨ï¼Œä½œè€…å¤§æœ‰æ±Ÿéƒæ‰å°½çš„æ„Ÿè§‰ã€‚ä¸è¿‡è¿˜æ˜¯æŒºä¸é”™çš„ã€‚</p>
<p>Ruby</p>
<p>å¤„äºå¯¹CloudFoundryé¡¹ç›®çš„éœ€è¦ï¼Œç¬”è€…ä¹Ÿçœ‹äº†çœ‹Rubyã€‚å°½ç®¡Rubyå¾ˆæµè¡Œï¼Œå¾ˆå¤šäººåœ¨ä½¿ç”¨ã€‚å¯æˆ‘æ„Ÿè§‰ä»–å°±åƒæ··æ°´ä¸€èˆ¬ï¼Œä¸å¹²å‡€ã€‚ç”±äºè¯­è¨€æœ¬èº«æ¯”è¾ƒåŠ¨æ€ï¼Œå¯¹äºä¸€è¡Œä»£ç ï¼Œä¼šæ€æ ·æ‰§è¡Œï¼Œå®Œå…¨ä¸æ¸…æ¥šã€‚ä¸è¿‡å¹³å¿ƒè€Œè®ºï¼Œè¿˜æ˜¯æŒºå¥½ç”¨çš„ã€‚å»å¹´æ¾æœ¬æ¥ä¸Šæµ·ï¼Œç¬”è€…ä¹Ÿå»æœåœ£ï¼Œä»–ä¸€ç›´ç©¿ç€è¿™å¥—è„å…®å…®çš„é»„è‰²è¥¿è£…ï¼Œæ¨é”€è‡ªå·±çš„æ‰‹æœºRubyã€‚æˆ‘çªç„¶è§‰å¾—ä¸œæ–¹äººå¼„å‡ºä¸ªç©æ„ä¸å®¹æ˜“ï¼Œè„å°±è„ç‚¹ï¼Œå¹²å‡€ä¸è¿‡äººå®¶(è¥¿æ–¹äºº)ï¼Œè¿˜é‚‹é¢ä¸è¿‡å—ã€‚</p>
<p>GO</p>
<p>GOæ˜¯Googleçš„æ–°è¯­è¨€ã€‚å¯¹Goçš„å­¦ä¹ æ˜¯ååˆ†æ„‰å¿«ã€‚ç¬”è€…å¾€å¾€çœ‹è¿™æ–¹é¢çš„èµ„æ–™åˆ°å‡Œæ™¨äºŒä¸‰ç‚¹å¿˜äº†ç¡çœ ã€‚æŠ›å¼ƒç®€ä»‹çš„è¯­æ³•ä¸è°ˆï¼ŒGoçš„è®¾è®¡è€ƒè™‘åˆ°æ€§èƒ½è¦æ±‚ã€‚å¾ˆå¤šåŠ¨æ€æ€§åœ¨ç¼–è¯‘é‡Œè§£å†³ï¼Œæ‰§è¡Œçš„ä»£ç å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯é™æ€çš„ã€‚å’ŒCé£æ ¼å¾ˆåƒï¼Œç®€å•èˆ’æœã€‚å¹¶ä¸”å¹¶å‘ä¹Ÿåšå¾—ä¸é”™ã€‚æ„Ÿè§‰å‡ä»¥æ—¶æ—¥ï¼Œä»–ä¼šå¯¹æ€§èƒ½æ•æ„Ÿçš„ç³»ç»Ÿç¼–ç¨‹é¢†åŸŸé€ æˆå†²å‡»ã€‚ç¬”è€…æ€»ç»“äº†Goè¯­è¨€åç¨‹çš„ç¼–ç¨‹æ¨¡å‹ï¼Œè®°å½•ä¸‹ä¸€æ–‡ã€Š<a href="http://www.yankay.com/go-clear-concurreny/">Goç®€æ´çš„å¹¶å‘</a>ã€‹ã€‚å¦å¤–è®¸å¼ä¼Ÿçš„çš„è¿™éƒ¨ä¹¦ä¹Ÿæ˜¯ä¸é”™çš„è¯»ç‰©ã€‚</p>
<p><strong>æ•°æ®æŒ–æ˜</strong></p>
<p>å·¥ä½œéœ€è¦ï¼Œç¬”è€…æ¥è§¦åˆ°äº†&#8221;å¤§æ•°æ®&#8221;ã€‚å†³å¿ƒä¸‹å¤§åŠ›æ°”å­¦å­¦æ•°æ®æŒ–æ˜å’Œæœºå™¨å­¦ä¹ æ–¹é¢çš„çŸ¥è¯†ã€‚åˆšå¥½æœ‰æœ¬æ–¯å¦ç¦çš„ã€Šå¤§æ•°æ®ã€‹çš„ä¹¦ï¼Œè¿™æœ¬ä¹¦å¾ˆå¥½ï¼Œæ ¹æ®ç°å®ä¸­äº‹ä¾‹åˆ‡å…¥ï¼Œæ·±å…¥æµ…å‡ºã€‚éšå³å€’è…¾äº†å‡ ä¸ªç®—æ³•ã€‚å‡†å¤‡åœ¨å‡ æ—¥åæ¨å‡ºä¸€ä¸ªåŸºäºç›‘ç£å­¦ä¹ çš„&#8221;å…«å¦æœºå™¨äººæ¸¸æˆ&#8221;ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
<p><strong>æ‰‹æœº</strong></p>
<p>å·¥ä½œä¸Šçš„éœ€è¦ï¼Œç¬”è€…ç¨å¾®çœ‹äº†çœ‹Androidç³»ç»Ÿçš„è¿ä½œæ–¹å¼ã€‚åªæ±‚ç•¥çŸ¥ä¸€äºŒã€‚</p>
<p><strong>éè®¡ç®—æœºç±»</strong></p>
<p>è¿™ç¯‡å°ç»“æœ¬æ„ä¸åŒ…æ‹¬éè®¡ç®—æœºç±»çš„ä¸œè¥¿ã€‚ä¸è¿‡æ—¢ç„¶æ˜¯ä¸ªäººå°ç»“ï¼Œä¹Ÿå†™ä¸Šä¸€äº›ã€‚é™¶æ¨èçš„ã€Šç»æµå­¦æ€ç»´æ–¹å¼æ˜¯ã€‹æ˜¯æœ¬å¾ˆå¥½çš„ç»æµå­¦å…¥é—¨å›¾ä¹¦ï¼Œå‘Šè¯‰æˆ‘è¾¹é™…æˆæœ¬æ˜¯ä»€ä¹ˆã€‚ã€Šè‹è²çš„ä¸–ç•Œã€‹æ˜¯æœ¬éå¸¸éå¸¸å¥½çš„å“²å­¦å…¥é—¨å›¾ä¹¦ï¼Œç¬›å¡å°”â€œæˆ‘æ€æ•…æˆ‘åœ¨â€çš„æ€è€ƒæŒ¯è‹å‘è©ã€‚ã€Šçˆ±ä½ å°±åƒçˆ±ç”Ÿå‘½ã€‹æ˜¯ç‹æ™“æ³¢å†™çš„æƒ…ä¹¦ï¼Œå†™æƒ…ä¹¦çš„äººä¹Ÿæ˜¯å¾—å­¦ä¹ å­¦ä¹ çš„ã€‚</p>
<p>è¿™ç¯‡å­¦ä¹ å°ç»“æ„å¤–çš„é•¿ï¼Œæœ¬ä»¥ä¸ºåªæœ‰ä¸€ç‚¹ç‚¹çš„ã€‚é€šè¿‡å†™ä»–ï¼Œç¬”è€…ä¹Ÿé¡ºä¾¿æ¸©ä¹ äº†ä¸€äº›ã€‚ä¸è¿‡å»å¹´å­¦çš„ä¸œè¥¿è™½ç„¶å¤šï¼Œä½†ç”Ÿäº§çš„ä¼˜ç§€äº§å“æ¯”è¾ƒå°‘ã€‚å¸Œæœ›æ¥å¹´æ”¹è¿›æ”¹è¿›ã€‚</p>
							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e6%8a%80%e6%9c%af/index.html" rel="category tag">è½¯ä»¶æŠ€æœ¯</a>			</span>
				<span class="sep"> | </span>
			
							<span class="taglinks">
				æ ‡ç­¾ï¼š <a href="./../../tag/2012/index.html" rel="tag">2012</a>, <a href="./../../tag/%e5%b0%8f%e7%bb%93/index.html" rel="tag">å°ç»“</a>			</span>
				<span class="sep"> | </span>
			
		
						<span class="comments-link"><a href="./../../2012%e5%b9%b4%e5%ad%a6%e4%b9%a0%e5%b0%8f%e7%bb%93/index.html#comments">8 è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-26588 -->

							
								
<article id="post-26525" class="post-26525 post type-post status-publish format-standard hentry category-5 tag-golang tag-102 tag-115">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../go-clear-concurreny/index.html" title="è¿ç»“åˆ°Go-ç®€æ´çš„å¹¶å‘" rel="bookmark">Go-ç®€æ´çš„å¹¶å‘</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../go-clear-concurreny/index.html" title="ä¸Šåˆ8:00" rel="bookmark">
							<time class="entry-date updated" datetime="2012-11-28T08:00:12+08:00">2012å¹´11æœˆ28æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								<p>å¤šæ ¸å¤„ç†å™¨è¶Šæ¥è¶Šæ™®åŠã€‚æœ‰æ²¡æœ‰ä¸€ç§ç®€å•çš„åŠæ³•ï¼Œèƒ½å¤Ÿè®©æˆ‘ä»¬å†™çš„è½¯ä»¶é‡Šæ”¾å¤šæ ¸çš„å¨åŠ›ï¼Ÿæ˜¯æœ‰çš„ã€‚éšç€Golang, Erlang, Scalaç­‰ä¸ºå¹¶å‘è®¾è®¡çš„ç¨‹åºè¯­è¨€çš„å…´èµ·ï¼Œæ–°çš„å¹¶å‘æ¨¡å¼é€æ¸æ¸…æ™°ã€‚æ­£å¦‚è¿‡ç¨‹å¼ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡ä¸€æ ·ï¼Œä¸€ä¸ªå¥½çš„ç¼–ç¨‹æ¨¡å¼æœ‰ä¸€ä¸ªæå…¶ç®€æ´çš„å†…æ ¸ï¼Œè¿˜æœ‰åœ¨æ­¤ä¹‹ä¸Šä¸°å¯Œçš„å¤–å»¶ã€‚å¯ä»¥è§£å†³ç°å®ä¸–ç•Œä¸­å„ç§å„æ ·çš„é—®é¢˜ã€‚æœ¬æ–‡ä»¥GOè¯­è¨€ä¸ºä¾‹ï¼Œè§£é‡Šå…¶ä¸­å†…æ ¸ã€å¤–å»¶ã€‚</p>
<h3>å¹¶å‘æ¨¡å¼ä¹‹å†…æ ¸</h3>
<p>è¿™ç§å¹¶å‘æ¨¡å¼çš„å†…æ ¸åªéœ€è¦<strong>åç¨‹</strong>å’Œ<strong>é€šé“</strong>å°±å¤Ÿäº†ã€‚åç¨‹è´Ÿè´£æ‰§è¡Œä»£ç ï¼Œé€šé“è´Ÿè´£åœ¨åç¨‹ä¹‹é—´ä¼ é€’äº‹ä»¶ã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722709_681613f47b_b.jpg"><img decoding="async" alt="" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722709_681613f47b_b.jpg" title="æ¦‚å¿µ" class="alignnone"></a></p>
<p>ä¸ä¹…å‰ï¼Œå¹¶å‘ç¼–ç¨‹æ˜¯ä¸ªéå¸¸å›°éš¾çš„äº‹ã€‚è¦æƒ³ç¼–å†™ä¸€ä¸ªè‰¯å¥½çš„å¹¶å‘ç¨‹åºï¼Œæˆ‘ä»¬ä¸å¾—ä¸äº†è§£çº¿ç¨‹ï¼Œé”ï¼Œsemaphoreï¼Œbarrierç”šè‡³CPUæ›´æ–°é«˜é€Ÿç¼“å­˜çš„æ–¹å¼ï¼Œè€Œä¸”ä»–ä»¬ä¸ªä¸ªéƒ½æœ‰æ€ªè„¾æ°”ï¼Œå¤„å¤„æ˜¯é™·é˜±ã€‚ç¬”è€…é™¤éä¸‡ä¸å¾—ä»¥ï¼Œå†³ä¸ä¼šè‡ªå·±æ“ä½œè¿™äº›åº•å±‚å¹¶å‘å…ƒç´ ã€‚ä¸€ä¸ªç®€æ´çš„å¹¶å‘æ¨¡å¼ä¸éœ€è¦è¿™äº›å¤æ‚çš„åº•å±‚å…ƒç´ ï¼Œåç¨‹å’Œé€šé“å°±å¤Ÿäº†ã€‚</p>
<p>åç¨‹æ˜¯è½»é‡çº§çš„çº¿ç¨‹ã€‚åœ¨è¿‡ç¨‹å¼ç¼–ç¨‹ä¸­ï¼Œå½“è°ƒç”¨ä¸€ä¸ªè¿‡ç¨‹çš„æ—¶å€™ï¼Œéœ€è¦ç­‰å¾…å…¶æ‰§è¡Œå®Œæ‰è¿”å›ã€‚è€Œè°ƒç”¨ä¸€ä¸ªåç¨‹çš„æ—¶å€™ï¼Œä¸éœ€è¦ç­‰å¾…å…¶æ‰§è¡Œå®Œï¼Œä¼šç«‹å³è¿”å›ã€‚åç¨‹ååˆ†è½»é‡ï¼ŒGoè¯­è¨€å¯ä»¥åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­æ‰§è¡Œæœ‰æ•°ä»¥åä¸‡è®¡çš„åç¨‹ï¼Œä¾æ—§ä¿æŒé«˜æ€§èƒ½ã€‚è€Œå¯¹äºæ™®é€šçš„å¹³å°ï¼Œä¸€ä¸ªè¿›ç¨‹æœ‰æ•°åƒä¸ªçº¿ç¨‹ï¼Œå…¶CPUä¼šå¿™äºä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œæ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚éšæ„åˆ›å»ºçº¿ç¨‹å¯ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥å¤§é‡ä½¿ç”¨çš„åç¨‹ã€‚</p>
<p>é€šé“æ˜¯åç¨‹ä¹‹é—´çš„æ•°æ®ä¼ è¾“é€šé“ã€‚é€šé“å¯ä»¥åœ¨ä¼—å¤šçš„åç¨‹ä¹‹é—´ä¼ é€’æ•°æ®ï¼Œå…·ä½“å¯ä»¥å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸ªå¼•ç”¨ã€‚é€šé“æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ã€‚</p>
<ul>
<li>åç¨‹å¯ä»¥è¯•å›¾å‘é€šé“æ”¾å…¥æ•°æ®ï¼Œå¦‚æœé€šé“æ»¡äº†ï¼Œä¼šæŒ‚èµ·åç¨‹ï¼Œç›´åˆ°é€šé“å¯ä»¥ä¸ºä»–æ”¾å…¥æ•°æ®ä¸ºæ­¢ã€‚
</li>
<li>åç¨‹å¯ä»¥è¯•å›¾å‘é€šé“ç´¢å–æ•°æ®ï¼Œå¦‚æœé€šé“æ²¡æœ‰æ•°æ®ï¼Œä¼šæŒ‚èµ·åç¨‹ï¼Œç›´åˆ°é€šé“è¿”å›æ•°æ®ä¸ºæ­¢ã€‚</li>
</ul>
<p>å¦‚æ­¤ï¼Œé€šé“å°±å¯ä»¥åœ¨ä¼ é€’æ•°æ®çš„åŒæ—¶ï¼Œæ§åˆ¶åç¨‹çš„è¿è¡Œã€‚æœ‰ç‚¹åƒäº‹ä»¶é©±åŠ¨ï¼Œä¹Ÿæœ‰ç‚¹åƒé˜»å¡é˜Ÿåˆ—ã€‚</p>
<p>è¿™ä¸¤ä¸ªæ¦‚å¿µéå¸¸çš„ç®€å•ï¼Œå„ä¸ªè¯­è¨€å¹³å°éƒ½ä¼šæœ‰ç›¸åº”çš„å®ç°ã€‚åœ¨Javaå’ŒCä¸Šä¹Ÿå„æœ‰åº“å¯ä»¥å®ç°ä¸¤è€…ã€‚</p>
<table border="1" cellspacing="0" cellpadding="0">
<thead>
<tr>
<td><strong></strong></td>
<td><strong>Golang</strong></td>
<td><strong>Erlang</strong></td>
<td><strong>Scala(Actor)</strong></td>
</tr>
</thead>
<tbody>
<tr>
<td>
<strong>åç¨‹</strong><strong></strong>
</td>
<td>goroutines</td>
<td>process</td>
<td>actor</td>
</tr>
<tr>
<td>
<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong><strong></strong>
</td>
<td>channel</td>
<td>mailbox</td>
<td>channel</td>
</tr>
</tbody>
</table>
<p>åªè¦æœ‰åç¨‹å’Œé€šé“ï¼Œå°±å¯ä»¥ä¼˜é›…çš„è§£å†³å¹¶å‘çš„é—®é¢˜ã€‚ä¸å¿…ä½¿ç”¨å…¶ä»–å’Œå¹¶å‘æœ‰å…³çš„æ¦‚å¿µã€‚é‚£å¦‚ä½•ç”¨è¿™ä¸¤æŠŠåˆ©åˆƒè§£å†³å„å¼å„æ ·çš„å®é™…é—®é¢˜å‘¢ï¼Ÿ</p>
<h3>å¹¶å‘æ¨¡å¼ä¹‹å¤–å»¶</h3>
<p>åç¨‹ç›¸è¾ƒäºçº¿ç¨‹ï¼Œå¯ä»¥å¤§é‡åˆ›å»ºã€‚æ‰“å¼€è¿™æ‰‡é—¨ï¼Œæˆ‘ä»¬æ‹“å±•å‡ºæ–°çš„ç”¨æ³•ï¼Œå¯ä»¥åšç”Ÿæˆå™¨ï¼Œå¯ä»¥è®©å‡½æ•°è¿”å›â€œæœåŠ¡â€ï¼Œå¯ä»¥è®©å¾ªç¯å¹¶å‘æ‰§è¡Œï¼Œè¿˜èƒ½å…±äº«å˜é‡ã€‚ä½†æ˜¯å‡ºç°æ–°çš„ç”¨æ³•çš„åŒæ—¶ï¼Œä¹Ÿå¸¦æ¥äº†æ–°çš„æ£˜æ‰‹é—®é¢˜ï¼Œåç¨‹ä¹Ÿä¼šæ³„æ¼ï¼Œä¸æ°å½“çš„ä½¿ç”¨ä¼šå½±å“æ€§èƒ½ã€‚ä¸‹é¢ä¼šé€ä¸€ä»‹ç»å„ç§ç”¨æ³•å’Œé—®é¢˜ã€‚æ¼”ç¤ºçš„ä»£ç ç”¨GOè¯­è¨€å†™æˆï¼Œå› ä¸ºå…¶ç®€æ´æ˜äº†ï¼Œè€Œä¸”æ”¯æŒå…¨éƒ¨åŠŸèƒ½ã€‚</p>
<h4>ç”Ÿæˆå™¨</h4>
<p>æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æœ‰ä¸€ä¸ªå‡½æ•°èƒ½ä¸æ–­ç”Ÿæˆæ•°æ®ã€‚æ¯”æ–¹è¯´è¿™ä¸ªå‡½æ•°å¯ä»¥è¯»æ–‡ä»¶ï¼Œè¯»ç½‘ç»œï¼Œç”Ÿæˆè‡ªå¢é•¿åºåˆ—ï¼Œç”Ÿæˆéšæœºæ•°ã€‚è¿™äº›è¡Œä¸ºçš„ç‰¹ç‚¹å°±æ˜¯ï¼Œå‡½æ•°çš„å·²çŸ¥ä¸€äº›å˜é‡ï¼Œå¦‚æ–‡ä»¶è·¯å¾„ã€‚ç„¶åä¸æ–­è°ƒç”¨ï¼Œè¿”å›æ–°çš„æ•°æ®ã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722807_a204295475_b.jpg"><img decoding="async" alt="" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722807_a204295475_b.jpg" title="ç”Ÿæˆå™¨" class="alignnone"></a></p>
<p>ä¸‹é¢ç”Ÿæˆéšæœºæ•°ä¸ºä¾‹ï¼Œ ä»¥è®©æˆ‘ä»¬åšä¸€ä¸ªä¼šå¹¶å‘æ‰§è¡Œçš„éšæœºæ•°ç”Ÿæˆå™¨ã€‚</p>
<p>éå¹¶å‘çš„åšæ³•æ˜¯è¿™æ ·çš„ï¼š</p>
<pre lang="go">// å‡½æ•° rand_generator_1 ï¼Œè¿”å› int
func rand_generator_1() int {
	return rand.Int()
}</pre>
<p>ä¸Šé¢æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªintã€‚å‡å¦‚rand.Int()è¿™ä¸ªå‡½æ•°è°ƒç”¨éœ€è¦å¾ˆé•¿æ—¶é—´ç­‰å¾…ï¼Œé‚£è¯¥å‡½æ•°çš„è°ƒç”¨è€…ä¹Ÿä¼šå› æ­¤è€ŒæŒ‚èµ·ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªåç¨‹ï¼Œä¸“é—¨æ‰§è¡Œrand.Int()ã€‚</p>
<pre lang="go">// å‡½æ•° rand_generator_2ï¼Œè¿”å› é€šé“(Channel)
func rand_generator_2() chan int {
	// åˆ›å»ºé€šé“
	out := make(chan int)
	// åˆ›å»ºåç¨‹
	go func() {
		for {
			//å‘é€šé“å†…å†™å…¥æ•°æ®ï¼Œå¦‚æœæ— äººè¯»å–ä¼šç­‰å¾…
			out 
<p>ä¸Šé¢çš„è¿™æ®µå‡½æ•°å°±å¯ä»¥å¹¶å‘æ‰§è¡Œäº†rand.Int()ã€‚æœ‰ä¸€ç‚¹å€¼å¾—æ³¨æ„åˆ°å‡½æ•°çš„è¿”å›å¯ä»¥ç†è§£ä¸ºä¸€ä¸ªâ€œæœåŠ¡â€ã€‚ä½†æˆ‘ä»¬éœ€è¦è·å–éšæœºæ•°æ® æ—¶å€™ï¼Œå¯ä»¥éšæ—¶å‘è¿™ä¸ªæœåŠ¡å–ç”¨ï¼Œä»–å·²ç»ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½äº†ç›¸åº”çš„æ•°æ®ï¼Œæ— éœ€ç­‰å¾…ï¼Œéšè¦éšåˆ°ã€‚å¦‚æœæˆ‘ä»¬è°ƒç”¨è¿™ä¸ªæœåŠ¡ä¸æ˜¯å¾ˆé¢‘ç¹ï¼Œä¸€ä¸ªåç¨‹è¶³å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚äº†ã€‚ä½†å¦‚æœæˆ‘ä»¬éœ€è¦å¤§é‡è®¿é—®ï¼Œæ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢ä»‹ç»çš„å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œå¯åŠ¨è‹¥å¹²ç”Ÿæˆå™¨ï¼Œå†å°†å…¶æ•´åˆæˆä¸€ä¸ªå¤§çš„æœåŠ¡ã€‚</p>
<p>è°ƒç”¨ç”Ÿæˆå™¨ï¼Œå¯ä»¥è¿”å›ä¸€ä¸ªâ€œæœåŠ¡â€ã€‚å¯ä»¥ç”¨åœ¨æŒç»­è·å–æ•°æ®çš„åœºåˆã€‚ç”¨é€”å¾ˆå¹¿æ³›ï¼Œè¯»å–æ•°æ®ï¼Œç”ŸæˆIDï¼Œç”šè‡³å®šæ—¶å™¨ã€‚è¿™æ˜¯ä¸€ç§éå¸¸ç®€æ´çš„æ€è·¯ï¼Œå°†ç¨‹åºå¹¶å‘åŒ–ã€‚</p>
<h4>å¤šè·¯å¤ç”¨</h4>
<p>å¤šè·¯å¤ç”¨æ˜¯è®©ä¸€æ¬¡å¤„ç†å¤šä¸ªé˜Ÿåˆ—çš„æŠ€æœ¯ã€‚Apacheä½¿ç”¨å¤„ç†æ¯ä¸ªè¿æ¥éƒ½éœ€è¦ä¸€ä¸ªè¿›ç¨‹ï¼Œæ‰€ä»¥å…¶å¹¶å‘æ€§èƒ½ä¸æ˜¯å¾ˆå¥½ã€‚è€ŒNighxä½¿ç”¨å¤šè·¯å¤ç”¨çš„æŠ€æœ¯ï¼Œè®©ä¸€ä¸ªè¿›ç¨‹å¤„ç†å¤šä¸ªè¿æ¥ï¼Œæ‰€ä»¥å¹¶å‘æ€§èƒ½æ¯”è¾ƒå¥½ã€‚åŒæ ·ï¼Œåœ¨åç¨‹çš„åœºåˆï¼Œå¤šè·¯å¤ç”¨ä¹Ÿæ˜¯éœ€è¦çš„ï¼Œä½†åˆæœ‰æ‰€ä¸åŒã€‚å¤šè·¯å¤ç”¨å¯ä»¥å°†è‹¥å¹²ä¸ªç›¸ä¼¼çš„å°æœåŠ¡æ•´åˆæˆä¸€ä¸ªå¤§æœåŠ¡ã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8222798490_6d6eb1a602_b.jpg"><img decoding="async" alt="" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8222798490_6d6eb1a602_b.jpg" title="å¤šè·¯å¤ç”¨" class="alignnone"></a></p>
<p>é‚£ä¹ˆè®©æˆ‘ä»¬ç”¨å¤šè·¯å¤ç”¨æŠ€æœ¯åšä¸€ä¸ªæ›´é«˜å¹¶å‘çš„éšæœºæ•°ç”Ÿæˆå™¨å§ã€‚</p>
<pre lang="go">// å‡½æ•° rand_generator_3 ï¼Œè¿”å›é€šé“(Channel)
func rand_generator_3() chan int {
	// åˆ›å»ºä¸¤ä¸ªéšæœºæ•°ç”Ÿæˆå™¨æœåŠ¡
	rand_generator_1 := rand_generator_2()
	rand_generator_2 := rand_generator_2()

	//åˆ›å»ºé€šé“
	out := make(chan int)

	//åˆ›å»ºåç¨‹
	go func() {
		for {
			//è¯»å–ç”Ÿæˆå™¨1ä¸­çš„æ•°æ®ï¼Œæ•´åˆ
			out 
<p>ä¸Šé¢æ˜¯ä½¿ç”¨äº†å¤šè·¯å¤ç”¨æŠ€æœ¯çš„é«˜å¹¶å‘ç‰ˆçš„éšæœºæ•°ç”Ÿæˆå™¨ã€‚é€šè¿‡æ•´åˆä¸¤ä¸ªéšæœºæ•°ç”Ÿæˆå™¨ï¼Œè¿™ä¸ªç‰ˆæœ¬çš„èƒ½åŠ›æ˜¯åˆšæ‰çš„ä¸¤å€ã€‚è™½ç„¶åç¨‹å¯ä»¥å¤§é‡åˆ›å»ºï¼Œä½†æ˜¯ä¼—å¤šåç¨‹è¿˜æ˜¯ä¼šäº‰æŠ¢è¾“å‡ºçš„é€šé“ã€‚Goè¯­è¨€æä¾›äº†Selectå…³é”®å­—æ¥è§£å†³ï¼Œå„å®¶ä¹Ÿæœ‰å„å®¶çªé—¨ã€‚åŠ å¤§è¾“å‡ºé€šé“çš„ç¼“å†²å¤§å°æ˜¯ä¸ªé€šç”¨çš„è§£å†³æ–¹æ³•ã€‚</p>
<p>å¤šè·¯å¤ç”¨æŠ€æœ¯å¯ä»¥ç”¨æ¥æ•´åˆå¤šä¸ªé€šé“ã€‚æå‡æ€§èƒ½å’Œæ“ä½œçš„ä¾¿æ·ã€‚é…åˆå…¶ä»–çš„æ¨¡å¼ä½¿ç”¨æœ‰å¾ˆå¤§çš„å¨åŠ›ã€‚</p>
<h4>FurtureæŠ€æœ¯</h4>
<p>Furtureæ˜¯ä¸€ä¸ªå¾ˆæœ‰ç”¨çš„æŠ€æœ¯ï¼Œæˆ‘ä»¬å¸¸å¸¸ä½¿ç”¨Furtureæ¥æ“ä½œçº¿ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä½¿ç”¨çº¿ç¨‹çš„æ—¶å€™ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œè¿”å›Furtureï¼Œä¹‹åå¯ä»¥é€šè¿‡å®ƒç­‰å¾…ç»“æœã€‚ ä½†æ˜¯åœ¨åç¨‹ç¯å¢ƒä¸‹çš„Furtueå¯ä»¥æ›´åŠ å½»åº•ï¼Œè¾“å…¥å‚æ•°åŒæ ·å¯ä»¥æ˜¯Furtureçš„ã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722849_4462fd152f_b.jpg"><img decoding="async" alt="" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722849_4462fd152f_b.jpg" title="future" class="alignnone"></a></p>
<p>è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¾€å¾€æ˜¯å‚æ•°å·²ç»å‡†å¤‡å¥½äº†ã€‚è°ƒç”¨åç¨‹çš„æ—¶å€™ä¹ŸåŒæ ·å¦‚æ­¤ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬å°†ä¼ å…¥çš„å‚æ•°è®¾ä¸ºé€šé“ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸å‡†å¤‡å¥½å‚æ•°çš„æƒ…å†µä¸‹è°ƒç”¨å‡½æ•°ã€‚è¿™æ ·çš„è®¾è®¡å¯ä»¥æä¾›å¾ˆå¤§çš„è‡ªç”±åº¦å’Œå¹¶å‘åº¦ã€‚å‡½æ•°è°ƒç”¨å’Œå‡½æ•°å‚æ•°å‡†å¤‡è¿™ä¸¤ä¸ªè¿‡ç¨‹å¯ä»¥å®Œå…¨è§£è€¦ã€‚ä¸‹é¢ä¸¾ä¸€ä¸ªç”¨è¯¥æŠ€æœ¯è®¿é—®æ•°æ®åº“çš„ä¾‹å­ã€‚</p>
<pre lang="go">//ä¸€ä¸ªæŸ¥è¯¢ç»“æ„ä½“
type query struct {
	//å‚æ•°Channel
	sql chan string
	//ç»“æœChannel
	result chan string
}

//æ‰§è¡ŒQuery
func execQuery(q query) {
	//å¯åŠ¨åç¨‹
	go func() {
		//è·å–è¾“å…¥
		sql := 
<p>ä¸Šé¢åˆ©ç”¨FurtureæŠ€æœ¯ï¼Œä¸å•è®©ç»“æœåœ¨Furtureè·å¾—ï¼Œå‚æ•°ä¹Ÿæ˜¯åœ¨Furtureè·å–ã€‚å‡†å¤‡å¥½å‚æ•°åï¼Œè‡ªåŠ¨æ‰§è¡Œã€‚Furtureå’Œç”Ÿæˆå™¨çš„åŒºåˆ«åœ¨äºï¼ŒFurtureè¿”å›ä¸€ä¸ªç»“æœï¼Œè€Œç”Ÿæˆå™¨å¯ä»¥é‡å¤è°ƒç”¨ã€‚è¿˜æœ‰ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„åœ°æ–¹ï¼Œå°±æ˜¯å°†å‚æ•°Channelå’Œç»“æœChannelå®šä¹‰åœ¨ä¸€ä¸ªç»“æ„ä½“é‡Œé¢ä½œä¸ºå‚æ•°ï¼Œè€Œä¸æ˜¯è¿”å›ç»“æœChannelã€‚è¿™æ ·åšå¯ä»¥å¢åŠ èšåˆåº¦ï¼Œå¥½å¤„å°±æ˜¯å¯ä»¥å’Œå¤šè·¯å¤ç”¨æŠ€æœ¯ç»“åˆèµ·æ¥ä½¿ç”¨ã€‚</p>
<p>FurtureæŠ€æœ¯å¯ä»¥å’Œå„ä¸ªå…¶ä»–æŠ€æœ¯ç»„åˆèµ·æ¥ç”¨ã€‚å¯ä»¥é€šè¿‡å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼Œç›‘å¬å¤šä¸ªç»“æœChannelï¼Œå½“æœ‰ç»“æœåï¼Œè‡ªåŠ¨è¿”å›ã€‚ä¹Ÿå¯ä»¥å’Œç”Ÿæˆå™¨ç»„åˆä½¿ç”¨ï¼Œç”Ÿæˆå™¨ä¸æ–­ç”Ÿäº§æ•°æ®ï¼ŒFurtureæŠ€æœ¯é€ä¸ªå¤„ç†æ•°æ®ã€‚FurtureæŠ€æœ¯è‡ªèº«è¿˜å¯ä»¥é¦–å°¾ç›¸è¿ï¼Œå½¢æˆä¸€ä¸ªå¹¶å‘çš„pipe filterã€‚è¿™ä¸ªpipe filterå¯ä»¥ç”¨äºè¯»å†™æ•°æ®æµï¼Œæ“ä½œæ•°æ®æµã€‚</p>
<p>Futureæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŠ€æœ¯æ‰‹æ®µã€‚å¯ä»¥åœ¨è°ƒç”¨çš„æ—¶å€™ä¸å…³å¿ƒæ•°æ®æ˜¯å¦å‡†å¤‡å¥½ï¼Œè¿”å›å€¼æ˜¯å¦è®¡ç®—å¥½çš„é—®é¢˜ã€‚è®©ç¨‹åºä¸­çš„ç»„ä»¶åœ¨å‡†å¤‡å¥½æ•°æ®çš„æ—¶å€™è‡ªåŠ¨è·‘èµ·æ¥ã€‚</p>
<h4>å¹¶å‘å¾ªç¯</h4>
<p>å¾ªç¯å¾€å¾€æ˜¯æ€§èƒ½ä¸Šçš„çƒ­ç‚¹ã€‚å¦‚æœæ€§èƒ½ç“¶é¢ˆå‡ºç°åœ¨CPUä¸Šçš„è¯ï¼Œé‚£ä¹ˆä¹æˆå¯èƒ½æ€§çƒ­ç‚¹æ˜¯åœ¨ä¸€ä¸ªå¾ªç¯ä½“å†…éƒ¨ã€‚æ‰€ä»¥å¦‚æœèƒ½è®©å¾ªç¯ä½“å¹¶å‘æ‰§è¡Œï¼Œé‚£ä¹ˆæ€§èƒ½å°±ä¼šæé«˜å¾ˆå¤šã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8222798782_fde085e7e5_b.jpg"><img decoding="async" alt="" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8222798782_fde085e7e5_b.jpg" title="å¹¶å‘å¾ªç¯" class="alignnone"></a></p>
<p>è¦å¹¶å‘å¾ªç¯å¾ˆç®€å•ï¼Œåªæœ‰åœ¨æ¯ä¸ªå¾ªç¯ä½“å†…éƒ¨å¯åŠ¨åç¨‹ã€‚åç¨‹ä½œä¸ºå¾ªç¯ä½“å¯ä»¥å¹¶å‘æ‰§è¡Œã€‚è°ƒç”¨å¯åŠ¨å‰è®¾ç½®ä¸€ä¸ªè®¡æ•°å™¨ï¼Œæ¯ä¸€ä¸ªå¾ªç¯ä½“æ‰§è¡Œå®Œæ¯•å°±åœ¨è®¡æ•°å™¨ä¸ŠåŠ ä¸€ä¸ªå…ƒç´ ï¼Œè°ƒç”¨å®Œæˆåé€šè¿‡ç›‘å¬è®¡æ•°å™¨ç­‰å¾…å¾ªç¯åç¨‹å…¨éƒ¨å®Œæˆã€‚</p>
<pre lang="go">//å»ºç«‹è®¡æ•°å™¨
sem := make(chan int, N); 
//FORå¾ªç¯ä½“
for i,xi := range data {
	//å»ºç«‹åç¨‹
    go func (i int, xi float) {
        doSomething(i,xi);
		//è®¡æ•°
        sem 
<p>ä¸Šé¢æ˜¯ä¸€ä¸ªå¹¶å‘å¾ªç¯ä¾‹å­ã€‚é€šè¿‡è®¡æ•°å™¨æ¥ç­‰å¾…å¾ªç¯å…¨éƒ¨å®Œæˆã€‚å¦‚æœç»“åˆä¸Šé¢æåˆ°çš„FutureæŠ€æœ¯çš„è¯ï¼Œåˆ™ä¸å¿…ç­‰å¾…ã€‚å¯ä»¥ç­‰åˆ°çœŸæ­£éœ€è¦çš„ç»“æœçš„åœ°æ–¹ï¼Œå†å»æ£€æŸ¥æ•°æ®æ˜¯å¦å®Œæˆã€‚</p>
<p>é€šè¿‡å¹¶å‘å¾ªç¯å¯ä»¥æä¾›æ€§èƒ½ï¼Œåˆ©ç”¨å¤šæ ¸ï¼Œè§£å†³CPUçƒ­ç‚¹ã€‚æ­£å› ä¸ºåç¨‹å¯ä»¥å¤§é‡åˆ›å»ºï¼Œæ‰èƒ½åœ¨å¾ªç¯ä½“ä¸­å¦‚æ­¤ä½¿ç”¨ï¼Œå¦‚æœæ˜¯ä½¿ç”¨çº¿ç¨‹çš„è¯ï¼Œå°±éœ€è¦å¼•å…¥çº¿ç¨‹æ± ä¹‹ç±»çš„ä¸œè¥¿ï¼Œé˜²æ­¢åˆ›å»ºè¿‡å¤šçº¿ç¨‹ï¼Œè€Œåç¨‹åˆ™ç®€å•çš„å¤šã€‚</p>
<h4>Chain FilteræŠ€æœ¯</h4>
<p>å‰é¢æåˆ°äº†FutureæŠ€æœ¯é¦–å°¾ç›¸è¿ï¼Œå¯ä»¥å½¢æˆä¸€ä¸ªå¹¶å‘çš„pipe filterã€‚è¿™ç§æ–¹å¼å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼Œå¦‚æœæ¯ä¸ªFilteréƒ½ç”±åŒä¸€ä¸ªå‡½æ•°ç»„æˆï¼Œè¿˜å¯ä»¥æœ‰ä¸€ç§ç®€å•çš„åŠæ³•æŠŠä»–ä»¬è¿èµ·æ¥ã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221723011_9f24150b79_b.jpg"><img decoding="async" alt="" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221723011_9f24150b79_b.jpg" title="Chain" class="alignnone"></a></p>
<p>ç”±äºæ¯ä¸ªFilteråç¨‹éƒ½å¯ä»¥å¹¶å‘è¿è¡Œï¼Œè¿™æ ·çš„ç»“æ„éå¸¸æœ‰åˆ©äºå¤šæ ¸ç¯å¢ƒã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ï¼Œç”¨è¿™ç§æ¨¡å¼æ¥äº§ç”Ÿç´ æ•°ã€‚</p>
<pre>// A concurrent prime sieve

package main

// Send the sequence 2, 3, 4, ... to channel 'ch'.
func Generate(ch chan
<p>ä¸Šé¢çš„ç¨‹åºåˆ›å»ºäº†10ä¸ªFilterï¼Œæ¯ä¸ªåˆ†åˆ«è¿‡æ»¤ä¸€ä¸ªç´ æ•°ï¼Œæ‰€ä»¥å¯ä»¥è¾“å‡ºå‰10ä¸ªç´ æ•°ã€‚</p>
<p>Chain-Filteré€šè¿‡ç®€å•çš„ä»£ç åˆ›å»ºå¹¶å‘çš„è¿‡æ»¤å™¨é“¾ã€‚è¿™ç§åŠæ³•è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯æ¯ä¸ªé€šé“åªæœ‰ä¸¤ä¸ªåç¨‹ä¼šè®¿é—®ï¼Œå°±ä¸ä¼šæœ‰æ¿€çƒˆçš„ç«äº‰ï¼Œæ€§èƒ½ä¼šæ¯”è¾ƒå¥½ã€‚</p>
<h4>å…±äº«å˜é‡</h4>
<h4></h4>
<p>&nbsp;</p>
<p>åç¨‹ä¹‹é—´çš„é€šä¿¡åªèƒ½å¤Ÿé€šè¿‡é€šé“ã€‚ä½†æ˜¯æˆ‘ä»¬ä¹ æƒ¯äºå…±äº«å˜é‡ï¼Œè€Œä¸”å¾ˆå¤šæ—¶å€™ä½¿ç”¨å…±äº«å˜é‡èƒ½è®©ä»£ç æ›´ç®€æ´ã€‚æ¯”å¦‚ä¸€ä¸ªServeræœ‰ä¸¤ä¸ªçŠ¶æ€å¼€å’Œå…³ã€‚å…¶ä»–ä»…ä»…å¸Œæœ›è·å–æˆ–æ”¹å˜å…¶çŠ¶æ€ï¼Œé‚£åˆè¯¥å¦‚ä½•åšå‘¢ã€‚å¯ä»¥å°†è¿™ä¸ªå˜é‡è‡³äº0é€šé“ä¸­ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªåç¨‹æ¥ç»´æŠ¤ã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722957_c37a8f856b_b.jpg"><img decoding="async" alt="" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722957_c37a8f856b_b.jpg" title="å…±äº«å˜é‡" class="alignnone"></a></p>
<p>ä¸‹é¢çš„ä¾‹å­æè¿°å¦‚ä½•ç”¨è¿™ä¸ªæ–¹å¼ï¼Œå®ç°ä¸€ä¸ªå…±äº«å˜é‡ã€‚</p>
<pre>//å…±äº«å˜é‡æœ‰ä¸€ä¸ªè¯»é€šé“å’Œä¸€ä¸ªå†™é€šé“ç»„æˆ
type sharded_var struct {
	reader chan int
	writer chan int
}

//å…±äº«å˜é‡ç»´æŠ¤åç¨‹
func sharded_var_whachdog(v sharded_var) {
	go func() {
		//åˆå§‹å€¼
		var value int = 0
		for {
			//ç›‘å¬è¯»å†™é€šé“ï¼Œå®ŒæˆæœåŠ¡
			select {
			case value = 
<p>è¿™æ ·ï¼Œå°±å¯ä»¥åœ¨åç¨‹å’Œé€šé“çš„åŸºç¡€ä¸Šå®ç°ä¸€ä¸ªåç¨‹å®‰å…¨çš„å…±äº«å˜é‡äº†ã€‚å®šä¹‰ä¸€ä¸ªå†™é€šé“ï¼Œéœ€è¦æ›´æ–°å˜é‡çš„æ—¶å€™ï¼Œå¾€é‡Œå†™æ–°çš„å€¼ã€‚å†å®šä¹‰ä¸€ä¸ªè¯»é€šé“ï¼Œéœ€è¦è¯»çš„æ—¶å€™ï¼Œä»é‡Œé¢è¯»ã€‚é€šè¿‡ä¸€ä¸ªå•ç‹¬çš„åç¨‹æ¥ç»´æŠ¤è¿™ä¸¤ä¸ªé€šé“ã€‚ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œåç¨‹ä¹‹é—´ä¸æ¨èä½¿ç”¨å…±äº«å˜é‡æ¥äº¤äº’ï¼Œä½†æ˜¯æŒ‰ç…§è¿™ä¸ªåŠæ³•ï¼Œåœ¨ä¸€äº›åœºåˆï¼Œä½¿ç”¨å…±äº«å˜é‡ä¹Ÿæ˜¯å¯å–çš„ã€‚å¾ˆå¤šå¹³å°ä¸Šæœ‰è¾ƒä¸ºåŸç”Ÿçš„å…±äº«å˜é‡æ”¯æŒï¼Œåˆ°åº•ç”¨é‚£ç§å®ç°æ¯”è¾ƒå¥½ï¼Œå°±è§ä»è§æ™ºäº†ã€‚å¦å¤–åˆ©ç”¨åç¨‹å’Œé€šé“ï¼Œå¯ä»¥è¿˜å®ç°å„ç§å¸¸è§çš„å¹¶å‘æ•°æ®ç»“æ„ï¼Œå¦‚é”ç­‰ç­‰ï¼Œå°±ä¸ä¸€ä¸€èµ˜è¿°ã€‚</p>
<h4>åç¨‹æ³„æ¼</h4>
<p>åç¨‹å’Œå†…å­˜ä¸€æ ·ï¼Œæ˜¯ç³»ç»Ÿçš„èµ„æºã€‚å¯¹äºå†…å­˜ï¼Œæœ‰è‡ªåŠ¨åƒåœ¾å›æ”¶ã€‚ä½†æ˜¯å¯¹äºåç¨‹ï¼Œæ²¡æœ‰ç›¸åº”çš„å›æ”¶æœºåˆ¶ã€‚ä¼šä¸ä¼šè‹¥å¹²å¹´åï¼Œåç¨‹æ™®åŠäº†ï¼Œåç¨‹æ³„æ¼å’Œå†…å­˜æ³„æ¼ä¸€æ ·æˆä¸ºç¨‹åºå‘˜æ°¸è¿œçš„ç—›å‘¢ï¼Ÿä¸€èˆ¬è€Œè¨€ï¼Œåç¨‹æ‰§è¡Œç»“æŸåå°±ä¼šé”€æ¯ã€‚åç¨‹ä¹Ÿä¼šå ç”¨å†…å­˜ï¼Œå¦‚æœå‘ç”Ÿåç¨‹æ³„æ¼ï¼Œå½±å“å’Œå†…å­˜æ³„æ¼ä¸€æ ·ä¸¥é‡ã€‚è½»åˆ™æ‹–æ…¢ç¨‹åºï¼Œé‡åˆ™å‹å®æœºå™¨ã€‚</p>
<p>Cå’ŒC++éƒ½æ˜¯æ²¡æœ‰è‡ªåŠ¨å†…å­˜å›æ”¶çš„ç¨‹åºè®¾è®¡è¯­è¨€ï¼Œä½†åªè¦æœ‰è‰¯å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Œå°±èƒ½è§£å†³è§„é¿é—®é¢˜ã€‚å¯¹äºåç¨‹æ˜¯ä¸€æ ·çš„ï¼Œåªè¦æœ‰å¥½ä¹ æƒ¯å°±å¯ä»¥äº†ã€‚</p>
<p>åªæœ‰ä¸¤ç§æƒ…å†µä¼šå¯¼è‡´åç¨‹æ— æ³•ç»“æŸã€‚ä¸€ç§æƒ…å†µæ˜¯åç¨‹æƒ³ä»ä¸€ä¸ªé€šé“è¯»æ•°æ®ï¼Œä½†æ— äººå¾€è¿™ä¸ªé€šé“å†™å…¥æ•°æ®ï¼Œæˆ–è®¸è¿™ä¸ªé€šé“å·²ç»è¢«é—å¿˜äº†ã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯ç¨‹æƒ³å¾€ä¸€ä¸ªé€šé“å†™æ•°æ®ï¼Œå¯æ˜¯ç”±äºæ— äººç›‘å¬è¿™ä¸ªé€šé“ï¼Œè¯¥åç¨‹å°†æ°¸è¿œæ— æ³•å‘ä¸‹æ‰§è¡Œã€‚ä¸‹é¢åˆ†åˆ«è®¨è®ºå¦‚ä½•é¿å…è¿™ä¸¤ç§æƒ…å†µã€‚</p>
<p>å¯¹äºåç¨‹æƒ³ä»ä¸€ä¸ªé€šé“è¯»æ•°æ®ï¼Œä½†æ— äººå¾€è¿™ä¸ªé€šé“å†™å…¥æ•°æ®è¿™ç§æƒ…å†µã€‚è§£å†³çš„åŠæ³•å¾ˆç®€å•ï¼ŒåŠ å…¥è¶…æ—¶æœºåˆ¶ã€‚å¯¹äºæœ‰ä¸ç¡®å®šä¼šä¸ä¼šè¿”å›çš„æƒ…å†µï¼Œå¿…é¡»åŠ å…¥è¶…æ—¶ï¼Œé¿å…å‡ºç°æ°¸ä¹…ç­‰å¾…ã€‚å¦å¤–ä¸ä¸€å®šè¦ä½¿ç”¨å®šæ—¶å™¨æ‰èƒ½ç»ˆæ­¢åç¨‹ã€‚ä¹Ÿå¯ä»¥å¯¹å¤–æš´éœ²ä¸€ä¸ªé€€å‡ºæé†’é€šé“ã€‚ä»»ä½•å…¶ä»–åç¨‹éƒ½å¯ä»¥é€šè¿‡è¯¥é€šé“æ¥æé†’è¿™ä¸ªåç¨‹ç»ˆæ­¢ã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722905_fbb0e6d2cb_z.jpg"><img decoding="async" alt="" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/8221722905_fbb0e6d2cb_z.jpg" title="æ³„æ¼" class="alignnone"></a></p>
<p>å¯¹äºåç¨‹æƒ³å¾€ä¸€ä¸ªé€šé“å†™æ•°æ®ï¼Œä½†é€šé“é˜»å¡æ— æ³•å†™å…¥è¿™ç§æƒ…å†µã€‚è§£å†³çš„åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ç»™é€šé“åŠ ç¼“å†²ã€‚ä½†å‰ææ˜¯è¿™ä¸ªé€šé“åªä¼šæ¥æ”¶åˆ°å›ºå®šæ•°ç›®çš„å†™å…¥ã€‚æ¯”æ–¹è¯´ï¼Œå·²çŸ¥ä¸€ä¸ªé€šé“æœ€å¤šåªä¼šæ¥æ”¶Næ¬¡æ•°æ®ï¼Œé‚£ä¹ˆå°±å°†è¿™ä¸ªé€šé“çš„ç¼“å†²è®¾ç½®ä¸ºNã€‚é‚£ä¹ˆè¯¥é€šé“å°†æ°¸è¿œä¸ä¼šå µå¡ï¼Œåç¨‹è‡ªç„¶ä¹Ÿä¸ä¼šæ³„æ¼ã€‚ä¹Ÿå¯ä»¥å°†å…¶ç¼“å†²è®¾ç½®ä¸ºæ— é™ï¼Œä¸è¿‡è¿™æ ·å°±è¦æ‰¿æ‹…å†…å­˜æ³„æ¼çš„é£é™©äº†ã€‚ç­‰åç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œè¿™éƒ¨åˆ†é€šé“å†…å­˜å°†ä¼šå¤±å»å¼•ç”¨ï¼Œä¼šè¢«è‡ªåŠ¨åƒåœ¾å›æ”¶æ‰ã€‚</p>
<pre>func never_leak(ch chan int) {
	//åˆå§‹åŒ–timeoutï¼Œç¼“å†²ä¸º1
	timeout := make(chan bool, 1)
	//å¯åŠ¨timeoutåç¨‹ï¼Œç”±äºç¼“å­˜ä¸º1ï¼Œä¸å¯èƒ½æ³„éœ²
	go func() {
		time.Sleep(1 * time.Second)
		timeout 
<p>ä¸Šé¢æ˜¯ä¸ªé¿å…æ³„æ¼ä¾‹å­ã€‚ä½¿ç”¨è¶…æ—¶é¿å…è¯»å µå¡ï¼Œä½¿ç”¨ç¼“å†²é¿å…å†™å µå¡ã€‚</p>
<p>å’Œå†…å­˜é‡Œé¢çš„å¯¹è±¡ä¸€æ ·ï¼Œå¯¹äºé•¿æœŸå­˜åœ¨çš„åç¨‹ï¼Œæˆ‘ä»¬ä¸ç”¨æ‹…å¿ƒæ³„æ¼é—®é¢˜ã€‚ä¸€æ˜¯é•¿æœŸå­˜åœ¨ï¼ŒäºŒæ˜¯æ•°é‡è¾ƒå°‘ã€‚è¦è­¦æƒ•çš„åªæœ‰é‚£äº›è¢«ä¸´æ—¶åˆ›å»ºçš„åç¨‹ï¼Œè¿™äº›åç¨‹æ•°é‡å¤§ä¸”ç”Ÿå‘½å‘¨æœŸçŸ­ï¼Œå¾€å¾€æ˜¯åœ¨å¾ªç¯ä¸­åˆ›å»ºçš„ï¼Œè¦åº”ç”¨å‰é¢æåˆ°çš„åŠæ³•ï¼Œé¿å…æ³„æ¼å‘ç”Ÿã€‚åç¨‹ä¹Ÿæ˜¯æŠŠåŒåˆƒå‰‘ï¼Œå¦‚æœå‡ºé—®é¢˜ï¼Œä¸ä½†æ²¡èƒ½æé«˜ç¨‹åºæ€§èƒ½ï¼Œåè€Œä¼šè®©ç¨‹åºå´©æºƒã€‚ä½†å°±åƒå†…å­˜ä¸€æ ·ï¼ŒåŒæ ·æœ‰æ³„æ¼çš„é£é™©ï¼Œä½†è¶Šç”¨è¶Šæºœäº†ã€‚</p>
<h3>å¹¶å‘æ¨¡å¼ä¹‹å®ç°</h3>
<p>åœ¨å¹¶å‘ç¼–ç¨‹å¤§è¡Œå…¶é“çš„ä»Šå¤©ï¼Œå¯¹åç¨‹å’Œé€šé“çš„æ”¯æŒæˆä¸ºå„ä¸ªå¹³å°æ¯”ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ã€‚è™½ç„¶å„å®¶æœ‰å„å®¶çš„å«æ³•ï¼Œä½†éƒ½èƒ½æ»¡è¶³åç¨‹çš„åŸºæœ¬è¦æ±‚â€”å¹¶å‘æ‰§è¡Œå’Œå¯å¤§é‡åˆ›å»ºã€‚ç¬”è€…å¯¹ä»–ä»¬çš„å®ç°æ–¹å¼æ€»ç»“äº†ä¸€ä¸‹ã€‚</p>
<p>ä¸‹é¢åˆ—ä¸¾ä¸€äº›å·²ç»æ”¯æŒåç¨‹çš„å¸¸è§çš„è¯­è¨€å’Œå¹³å°ã€‚</p>
<td border="1" cellspacing="0" cellpadding="0">
</td><tbody>
<tr>
<td>è¯­è¨€/å¹³å°</td>
<td>å®ç°æ—¶é—´</td>
<td>åç¨‹åç§°</td>
<td>å¤‡æ³¨</td>
</tr>
<tr>
<td>GoLang</td>
<td>åŸç”Ÿæ”¯æŒ</td>
<td>goroutines</td>
<td></td>
</tr>
<tr>
<td>Erlang</td>
<td>åŸç”Ÿæ”¯æŒ</td>
<td>process</td>
<td>å‡½æ•°å¼è¯­è¨€</td>
</tr>
<tr>
<td>Scala</td>
<td>åŸç”Ÿæ”¯æŒ</td>
<td>actor</td>
<td>å‡½æ•°å¼ç¼–ç¨‹</td>
</tr>
<tr>
<td>Python</td>
<td>2.5ç‰ˆæœ¬å</td>
<td>coroutine</td>
<td>å®˜æ–¹Pythonä¸å®Œå…¨å®ç°<br>
Stackless Pythonæ”¯æŒ</td>
</tr>
<tr>
<td>Perl</td>
<td>6.0ç‰ˆæœ¬å</td>
<td>coroutine</td>
<td></td>
</tr>
<tr>
<td>Ruby</td>
<td>1.9 ç‰ˆæœ¬å</td>
<td>fiber</td>
<td></td>
</tr>
<tr>
<td>Lua</td>
<td>åŸç”Ÿæ”¯æŒ</td>
<td>coroutine</td>
<td></td>
</tr>
<tr>
<td>C#</td>
<td>.net 2.0ç‰ˆæœ¬å</td>
<td>fiber</td>
<td></td>
</tr>
</tbody>

<p>GoLang å’ŒScalaä½œä¸ºæœ€æ–°çš„è¯­è¨€ï¼Œä¸€å‡ºç”Ÿå°±æœ‰å®Œå–„çš„åŸºäºåç¨‹å¹¶å‘åŠŸèƒ½ã€‚Erlangæœ€ä¸ºè€èµ„æ ¼çš„å¹¶å‘ç¼–ç¨‹è¯­è¨€ï¼Œè¿”è€è¿˜ç«¥ã€‚å…¶ä»–äºŒçº¿è¯­è¨€åˆ™å‡ ä¹å…¨éƒ¨åœ¨æ–°çš„ç‰ˆæœ¬ä¸­åŠ å…¥äº†åç¨‹ã€‚</p>
<p>ä»¤äººæƒŠå¥‡çš„æ˜¯C/C++å’ŒJavaè¿™ä¸‰ä¸ªä¸–ç•Œä¸Šæœ€ä¸»æµçš„å¹³å°æ²¡æœ‰åœ¨å¯¹åç¨‹æä¾›è¯­è¨€çº§åˆ«çš„åŸç”Ÿæ”¯æŒã€‚ä»–ä»¬éƒ½èƒŒè´Ÿç€åšé‡çš„å†å²ï¼Œæ— æ³•æ”¹å˜ï¼Œä¹Ÿæ— éœ€æ”¹å˜ã€‚ä½†ä»–ä»¬è¿˜æœ‰å…¶ä»–çš„åŠæ³•ä½¿ç”¨åç¨‹ã€‚</p>
<p>Javaå¹³å°æœ‰å¾ˆå¤šæ–¹æ³•å®ç°åç¨‹ï¼š</p>
</pre></pre></pre></pre></pre></pre></pre>
<ul>
<li> ä¿®æ”¹è™šæ‹Ÿæœºï¼šå¯¹JVMæ‰“è¡¥ä¸æ¥å®ç°åç¨‹ï¼Œè¿™æ ·çš„å®ç°æ•ˆæœå¥½ï¼Œä½†æ˜¯å¤±å»äº†è·¨å¹³å°çš„å¥½å¤„</li>
<li>ä¿®æ”¹å­—èŠ‚ç ï¼šåœ¨ç¼–è¯‘å®Œæˆåå¢å¼ºå­—èŠ‚ç ï¼Œæˆ–è€…ä½¿ç”¨æ–°çš„JVMè¯­è¨€ã€‚ç¨ç¨å¢åŠ äº†ç¼–è¯‘çš„éš¾åº¦ã€‚</li>
<li>ä½¿ç”¨JNIï¼šåœ¨JaråŒ…ä¸­ä½¿ç”¨JNIï¼Œè¿™æ ·æ˜“äºä½¿ç”¨ï¼Œä½†æ˜¯ä¸èƒ½è·¨å¹³å°ã€‚</li>
<li>ä½¿ç”¨çº¿ç¨‹æ¨¡æ‹Ÿåç¨‹ï¼šä½¿åç¨‹é‡é‡çº§ï¼Œå®Œå…¨ä¾èµ–JVMçš„çº¿ç¨‹å®ç°ã€‚</li>
</ul>
<p>å…¶ä¸­ä¿®æ”¹å­—èŠ‚ç çš„æ–¹å¼æ¯”è¾ƒå¸¸è§ã€‚å› ä¸ºè¿™æ ·çš„å®ç°åŠæ³•ï¼Œå¯ä»¥å¹³è¡¡æ€§èƒ½å’Œç§»æ¤æ€§ã€‚æœ€å…·ä»£è¡¨æ€§çš„JVMè¯­è¨€Scalaå°±èƒ½å¾ˆå¥½çš„æ”¯æŒåç¨‹å¹¶å‘ã€‚æµè¡Œçš„Java Actoræ¨¡å‹ç±»åº“akkaä¹Ÿæ˜¯ç”¨ä¿®æ”¹å­—èŠ‚ç çš„æ–¹å¼å®ç°çš„åç¨‹ã€‚</p>
<p>å¯¹äºCè¯­è¨€ï¼Œåç¨‹å’Œçº¿ç¨‹ä¸€æ ·ã€‚å¯ä»¥ä½¿ç”¨å„ç§å„æ ·çš„ç³»ç»Ÿè°ƒç”¨æ¥å®ç°ã€‚åç¨‹ä½œä¸ºä¸€ä¸ªæ¯”è¾ƒé«˜çº§çš„æ¦‚å¿µï¼Œå®ç°æ–¹å¼å®åœ¨å¤ªå¤šï¼Œå°±ä¸è®¨è®ºäº†ã€‚æ¯”è¾ƒä¸»æµçš„å®ç°æœ‰libpcl, coro,lthreadç­‰ç­‰ã€‚</p>
<p>å¯¹äºC++ï¼Œæœ‰Boostå®ç°ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–å¼€æºåº“ã€‚è¿˜æœ‰ä¸€é—¨åä¸ºÎ¼C++è¯­è¨€ï¼Œåœ¨C++åŸºç¡€ä¸Šæä¾›äº†å¹¶å‘æ‰©å±•ã€‚</p>
<p>å¯è§è¿™ç§ç¼–ç¨‹æ¨¡å‹åœ¨ä¼—å¤šçš„è¯­è¨€å¹³å°ä¸­å·²ç»å¾—åˆ°äº†å¹¿æ³›çš„æ”¯æŒï¼Œä¸å†å°ä¼—ã€‚å¦‚æœæƒ³ä½¿ç”¨çš„è¯ï¼Œéšæ—¶å¯ä»¥åŠ åˆ°è‡ªå·±çš„å·¥å…·ç®±ä¸­ã€‚</p>
<h3>ç»“è¯­</h3>
<p>æœ¬æ–‡æ¢è®¨äº†ä¸€ä¸ªæå…¶ç®€æ´çš„å¹¶å‘æ¨¡å‹ã€‚åœ¨åªæœ‰åç¨‹å’Œé€šé“è¿™ä¸¤ä¸ªåŸºæœ¬å…ƒä»¶çš„æƒ…å†µä¸‹ã€‚å¯ä»¥æä¾›ä¸°å¯Œçš„åŠŸèƒ½ï¼Œè§£å†³å½¢å½¢è‰²è‰²å®é™…é—®é¢˜ã€‚è€Œä¸”è¿™ä¸ªæ¨¡å‹å·²ç»è¢«å¹¿æ³›çš„å®ç°ï¼Œæˆä¸ºæ½®æµã€‚ç›¸ä¿¡è¿™ç§å¹¶å‘æ¨¡å‹çš„åŠŸèƒ½è¿œè¿œä¸åŠæ­¤ï¼Œä¸€å®šä¹Ÿä¼šæœ‰æ›´å¤šæ›´ç®€æ´çš„ç”¨æ³•å‡ºç°ã€‚æˆ–è®¸æœªæ¥CPUæ ¸å¿ƒæ•°ç›®å°†å’Œäººè„‘ç¥ç»å…ƒæ•°ç›®ä¸€æ ·å¤šï¼Œåˆ°é‚£ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬åˆè¦é‡æ–°æ€è€ƒå¹¶å‘æ¨¡å‹äº†ã€‚</p>
							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e6%8a%80%e6%9c%af/index.html" rel="category tag">è½¯ä»¶æŠ€æœ¯</a>			</span>
				<span class="sep"> | </span>
			
							<span class="taglinks">
				æ ‡ç­¾ï¼š <a href="./../../tag/golang/index.html" rel="tag">Golang</a>, <a href="./../../tag/%e5%b9%b6%e5%8f%91/index.html" rel="tag">å¹¶å‘</a>, <a href="./../../tag/%e6%a8%a1%e5%bc%8f/index.html" rel="tag">æ¨¡å¼</a>			</span>
				<span class="sep"> | </span>
			
		
						<span class="comments-link"><a href="./../../go-clear-concurreny/index.html#comments">13 è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-26525 -->

							
								
<article id="post-26514" class="post-26514 post type-post status-publish format-standard hentry category-5 tag-google tag-google-spanner tag-spanner">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../google-spanner%e5%8e%9f%e7%90%86-%e5%85%a8%e7%90%83%e7%ba%a7%e7%9a%84%e5%88%86%e5%b8%83%e5%bc%8f%e6%95%b0%e6%8d%ae%e5%ba%93/index.html" title="è¿ç»“åˆ°Google SpanneråŸç†- å…¨çƒçº§çš„åˆ†å¸ƒå¼æ•°æ®åº“" rel="bookmark">Google SpanneråŸç†- å…¨çƒçº§çš„åˆ†å¸ƒå¼æ•°æ®åº“</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../google-spanner%e5%8e%9f%e7%90%86-%e5%85%a8%e7%90%83%e7%ba%a7%e7%9a%84%e5%88%86%e5%b8%83%e5%bc%8f%e6%95%b0%e6%8d%ae%e5%ba%93/index.html" title="ä¸‹åˆ8:09" rel="bookmark">
							<time class="entry-date updated" datetime="2012-09-18T20:09:28+08:00">2012å¹´9æœˆ18æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								<h5>Google Spannerç®€ä»‹</h5>
<p>Spanner æ˜¯Googleçš„å…¨çƒçº§çš„åˆ†å¸ƒå¼æ•°æ®åº“ (Globally-Distributed Database) ã€‚Spannerçš„æ‰©å±•æ€§è¾¾åˆ°äº†ä»¤äººå’‹èˆŒçš„å…¨çƒçº§ï¼Œå¯ä»¥æ‰©å±•åˆ°æ•°ç™¾ä¸‡çš„æœºå™¨ï¼Œæ•°å·²ç™¾è®¡çš„æ•°æ®ä¸­å¿ƒï¼Œä¸Šä¸‡äº¿çš„è¡Œã€‚æ›´ç»™åŠ›çš„æ˜¯ï¼Œé™¤äº†å¤¸å¼ çš„æ‰©å±•æ€§ä¹‹å¤–ï¼Œä»–è¿˜èƒ½åŒæ—¶é€šè¿‡åŒæ­¥å¤åˆ¶å’Œå¤šç‰ˆæœ¬æ¥æ»¡è¶³å¤–éƒ¨ä¸€è‡´æ€§ï¼Œå¯ç”¨æ€§ä¹Ÿæ˜¯å¾ˆå¥½çš„ã€‚å†²ç ´CAPçš„æ·é”ï¼Œåœ¨ä¸‰è€…ä¹‹é—´å®Œç¾å¹³è¡¡ã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479630216652_f.jpg"><img loading="lazy" decoding="async" class="alignnone" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479630216652_f.jpg" alt="" width="500" height="380"></a></p>
<p>Spanneræ˜¯ä¸ªå¯æ‰©å±•ï¼Œå¤šç‰ˆæœ¬ï¼Œå…¨çƒåˆ†å¸ƒå¼è¿˜æ”¯æŒåŒæ­¥å¤åˆ¶çš„æ•°æ®åº“ã€‚ä»–æ˜¯Googleçš„ç¬¬ä¸€ä¸ªå¯ä»¥å…¨çƒæ‰©å±•å¹¶ä¸”æ”¯æŒå¤–éƒ¨ä¸€è‡´çš„äº‹åŠ¡ã€‚Spannerèƒ½åšåˆ°è¿™äº›ï¼Œç¦»ä¸å¼€ä¸€ä¸ªç”¨GPSå’ŒåŸå­é’Ÿå®ç°çš„æ—¶é—´APIã€‚è¿™ä¸ªAPIèƒ½å°†æ•°æ®ä¸­å¿ƒä¹‹é—´çš„æ—¶é—´åŒæ­¥ç²¾ç¡®åˆ°10msä»¥å†…ã€‚å› æ­¤æœ‰å‡ ä¸ªç»™åŠ›çš„åŠŸèƒ½ï¼šæ— é”è¯»äº‹åŠ¡ï¼ŒåŸå­schemaä¿®æ”¹ï¼Œè¯»å†å²æ•°æ®æ— blockã€‚</p>
<p><a href="http://qing.weibo.com/2294942122/88ca09aa3300221n.html">EMCä¸­å›½ç ”ç©¶é™¢</a>å®æ—¶ç´§ç›¯ä¸šç•ŒåŠ¨æ€ï¼ŒGoogleæœ€è¿‘å‘å¸ƒçš„ä¸€ç¯‡è®ºæ–‡ã€Š<a href="http://research.google.com/archive/spanner.html">Spanner: Google&#8217;s Globally-Distributed Database</a>ã€‹, ç¬”è€…éå¸¸æ„Ÿå…´è¶£ï¼Œå¯¹Spannerè¿›è¡Œäº†ä¸€äº›è°ƒç ”ï¼Œå¹¶åœ¨è¿™é‡Œåˆ†äº«ã€‚ç”±äºSpannerå¹¶ä¸æ˜¯å¼€æºäº§å“ï¼Œç¬”è€…çš„çŸ¥è¯†ä¸»è¦æ¥æºäºGoogleçš„å…¬å¼€èµ„æ–™ï¼Œé€šè¿‡ç°æœ‰å…¬å¼€èµ„æ–™ä»…ä»…åªèƒ½çª¥å¾—Spannerçš„æ²§æµ·ä¸€ç²Ÿï¼ŒSpannerèƒŒåè¿˜ä¾èµ–æœ‰å¤§é‡Googleçš„ä¸“æœ‰æŠ€æœ¯ã€‚ç ”ç©¶é™¢<a href="http://qing.weibo.com/2294942122/88ca09aa3300221n.html">åŸæ–‡</a>ã€‚</p>
<p>ä¸‹æ–‡ä¸»è¦æ˜¯Spannerçš„èƒŒæ™¯ï¼Œè®¾è®¡å’Œå¹¶å‘æ§åˆ¶ã€‚</p>
<h5>SpannerèƒŒæ™¯</h5>
<p>è¦ææ¸…æ¥šSpanneråŸç†ï¼Œå…ˆå¾—äº†è§£Spanneråœ¨Googleçš„å®šä½ã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479632808586_f.jpg"><img loading="lazy" decoding="async" class="alignnone" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479632808586_f.jpg" alt="" width="500" height="345"></a></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹åˆ°ã€‚Spannerä½äºF1å’ŒGFSä¹‹é—´ï¼Œæ‰¿ä¸Šå¯ä¸‹ã€‚æ‰€ä»¥å…ˆæä¸€æF1å’ŒGFSã€‚</p>
<h6>F1</h6>
<p>å’Œä¼—å¤šäº’è”ç½‘å…¬å¸ä¸€æ ·ï¼Œåœ¨æ—©æœŸGoogleå¤§é‡ä½¿ç”¨äº†Mysqlã€‚Mysqlæ˜¯å•æœºçš„ï¼Œå¯ä»¥ç”¨Master-Slaveæ¥å®¹é”™ï¼Œåˆ†åŒºæ¥æ‰©å±•ã€‚ä½†æ˜¯éœ€è¦å¤§é‡çš„æ‰‹å·¥è¿ç»´å·¥ä½œï¼Œæœ‰å¾ˆå¤šçš„é™åˆ¶ã€‚å› æ­¤Googleå¼€å‘äº†ä¸€ä¸ªå¯å®¹é”™å¯æ‰©å±•çš„RDBMSâ€”â€”F1ã€‚å’Œä¸€èˆ¬çš„åˆ†å¸ƒå¼æ•°æ®åº“ä¸åŒï¼ŒF1å¯¹åº”RDMSåº”æœ‰çš„åŠŸèƒ½ï¼Œæ¯«ä¸å¦¥åã€‚èµ·åˆF1æ˜¯åŸºäºMysqlçš„ï¼Œä¸è¿‡ä¼šé€æ¸è¿ç§»åˆ°Spannerrã€‚</p>
<p>F1æœ‰å¦‚ä¸‹ç‰¹ç‚¹ï¼š</p>
<ul>
<li>7Ã—24é«˜å¯ç”¨ã€‚å“ªæ€•æŸä¸€ä¸ªæ•°æ®ä¸­å¿ƒåœæ­¢è¿è½¬ï¼Œä»ç„¶å¯ç”¨ã€‚</li>
<li>å¯ä»¥åŒæ—¶æä¾›å¼ºä¸€è‡´æ€§å’Œå¼±ä¸€è‡´ã€‚</li>
<li>å¯æ‰©å±•</li>
<li>æ”¯æŒSQL</li>
<li>äº‹åŠ¡æäº¤å»¶è¿Ÿ50-100msï¼Œè¯»å»¶è¿Ÿ5-10msï¼Œé«˜åå</li>
</ul>
<div>
<p>ä¼—æ‰€å‘¨çŸ¥Google BigTableæ˜¯é‡è¦çš„Nosqläº§å“ï¼Œæä¾›å¾ˆå¥½çš„æ‰©å±•æ€§ï¼Œå¼€æºä¸–ç•Œæœ‰HBaseä¸ä¹‹å¯¹åº”ã€‚ä¸ºä»€ä¹ˆGoogleè¿˜éœ€è¦F1ï¼Œè€Œä¸æ˜¯éƒ½ä½¿ç”¨BigTableå‘¢ï¼Ÿå› ä¸ºBigTableæä¾›çš„æœ€ç»ˆä¸€è‡´æ€§ï¼Œä¸€äº›éœ€è¦äº‹åŠ¡çº§åˆ«çš„åº”ç”¨æ— æ³•ä½¿ç”¨ã€‚åŒæ—¶BigTableè¿˜æ˜¯NoSqlï¼Œè€Œå¤§é‡çš„åº”ç”¨åœºæ™¯éœ€è¦æœ‰å…³ç³»æ¨¡å‹ã€‚å°±åƒç°åœ¨å¤§é‡çš„äº’è”ç½‘ä¼ä¸šéƒ½ä½¿ç”¨Mysqlè€Œä¸æ„¿æ„ä½¿ç”¨HBaseï¼Œå› æ­¤Googleæ‰æœ‰è¿™ä¸ªå¯æ‰©å±•æ•°æ®åº“çš„F1ã€‚è€ŒSpannerå°±æ˜¯F1çš„è‡³å…³é‡è¦çš„åº•å±‚å­˜å‚¨æŠ€æœ¯ã€‚</p>
<h6>Colossusï¼ˆGFS IIï¼‰</h6>
<p>Colossusä¹Ÿæ˜¯ä¸€ä¸ªä¸å¾—ä¸æèµ·çš„æŠ€æœ¯ã€‚ä»–æ˜¯ç¬¬äºŒä»£GFSï¼Œå¯¹åº”å¼€æºä¸–ç•Œçš„æ–°HDFSã€‚GFSæ˜¯è‘—åçš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479636073852_f.jpg"><img loading="lazy" decoding="async" class="alignnone" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479636073852_f.jpg" alt="" width="500" height="229"></a></p>
<p>åˆä»£GFSæ˜¯ä¸ºæ‰¹å¤„ç†è®¾è®¡çš„ã€‚å¯¹äºå¤§æ–‡ä»¶å¾ˆå‹å¥½ï¼Œååé‡å¾ˆå¤§ï¼Œä½†æ˜¯å»¶è¿Ÿè¾ƒé«˜ã€‚æ‰€ä»¥ä½¿ç”¨ä»–çš„ç³»ç»Ÿä¸å¾—ä¸å¯¹GFSåšå„ç§ä¼˜åŒ–ï¼Œæ‰èƒ½è·å¾—è‰¯å¥½çš„æ€§èƒ½ã€‚é‚£ä¸ºä»€ä¹ˆGoogleæ²¡æœ‰è€ƒè™‘åˆ°è¿™äº›é—®é¢˜ï¼Œè®¾è®¡å‡ºæ›´å®Œç¾çš„GFS ? å› ä¸ºé‚£ä¸ªæ—¶å€™æ˜¯2001å¹´ï¼ŒHadoopå‡ºç”Ÿæ˜¯åœ¨2007å¹´ã€‚å¦‚æœHadoopæ˜¯ä¸–ç•Œé¢†å…ˆæ°´å¹³çš„è¯ï¼ŒGFSæ¯”ä¸–ç•Œé¢†å…ˆæ°´å¹³è¿˜é¢†å…ˆäº†6å¹´ã€‚åŒæ ·çš„Spannerå‡ºç”Ÿå¤§æ¦‚æ˜¯2009å¹´ï¼Œç°åœ¨æˆ‘ä»¬çœ‹åˆ°äº†è®ºæ–‡ï¼Œä¼°è®¡Spanneråœ¨Googleå·²ç»å¾ˆå®Œå–„ï¼ŒåŒæ—¶Googleå†…éƒ¨å·²ç»æœ‰æ›´å…ˆè¿›çš„æ›¿ä»£æŠ€æœ¯åœ¨é…é…¿äº†ã€‚ç¬”è€…é¢„æµ‹ï¼Œæœ€æ—©åœ¨2015å¹´æ‰ä¼šå‡ºç°Spannerå’ŒF1çš„å±±å¯¨å¼€æºäº§å“ã€‚</p>
<p>Colossusæ˜¯ç¬¬äºŒä»£GFSã€‚Colossusæ˜¯Googleé‡è¦çš„åŸºç¡€è®¾æ–½ï¼Œå› ä¸ºä»–å¯ä»¥æ»¡è¶³ä¸»æµåº”ç”¨å¯¹FSçš„è¦æ±‚ã€‚Colossusçš„é‡è¦æ”¹è¿›æœ‰ï¼š</p>
<ul>
<li>ä¼˜é›…Masterå®¹é”™å¤„ç† (ä¸å†æœ‰2sçš„åœæ­¢æœåŠ¡æ—¶é—´)</li>
<li>Chunkå¤§å°åªæœ‰1MB (å¯¹å°æ–‡ä»¶å¾ˆå‹å¥½)</li>
<li>Masterå¯ä»¥å­˜å‚¨æ›´å¤šçš„Metadata(å½“Chunkä»64MBå˜ä¸º1MBåï¼ŒMetadataä¼šæ‰©å¤§64å€ï¼Œä½†æ˜¯Googleä¹Ÿè§£å†³äº†)</li>
</ul>
<div>
<p>Colossuså¯ä»¥è‡ªåŠ¨åˆ†åŒºMetadataã€‚ä½¿ç”¨Reed-Solomonç®—æ³•æ¥å¤åˆ¶ï¼Œå¯ä»¥å°†åŸå…ˆçš„3ä»½å‡å°åˆ°1.5ä»½ï¼Œæé«˜å†™çš„æ€§èƒ½ï¼Œé™ä½å»¶è¿Ÿã€‚å®¢æˆ·ç«¯æ¥å¤åˆ¶æ•°æ®ã€‚å…·ä½“ç»†èŠ‚ç¬”è€…ä¹ŸçŒœä¸å‡ºã€‚</p>
<h6>ä¸BigTableï¼Œ Megastoreå¯¹æ¯”</h6>
<p>Spannerä¸»è¦è‡´åŠ›äºè·¨æ•°æ®ä¸­å¿ƒçš„æ•°æ®å¤åˆ¶ä¸Šï¼ŒåŒæ—¶ä¹Ÿèƒ½æä¾›æ•°æ®åº“åŠŸèƒ½ã€‚åœ¨Googleç±»ä¼¼çš„ç³»ç»Ÿæœ‰BigTableå’ŒMegastoreã€‚å’Œè¿™ä¸¤è€…ç›¸æ¯”ï¼ŒSpanneråˆæœ‰ä»€ä¹ˆä¼˜åŠ¿å‘¢ã€‚</p>
<p>BigTableåœ¨Googleå¾—åˆ°äº†å¹¿æ³›çš„ä½¿ç”¨ï¼Œä½†æ˜¯ä»–ä¸èƒ½æä¾›è¾ƒä¸ºå¤æ‚çš„Schemaï¼Œè¿˜æœ‰åœ¨è·¨æ•°æ®ä¸­å¿ƒç¯å¢ƒä¸‹çš„å¼ºä¸€è‡´æ€§ã€‚Megastoreæœ‰ç±»RDBMSçš„æ•°æ®æ¨¡å‹ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒåŒæ­¥å¤åˆ¶ï¼Œä½†æ˜¯ä»–çš„ååé‡å¤ªå·®ï¼Œä¸èƒ½é€‚åº”åº”ç”¨è¦æ±‚ã€‚Spannerä¸å†æ˜¯ç±»ä¼¼BigTableçš„ç‰ˆæœ¬åŒ– key-valueå­˜å‚¨ï¼Œè€Œæ˜¯ä¸€ä¸ªâ€œä¸´æ—¶å¤šç‰ˆæœ¬â€çš„æ•°æ®åº“ã€‚ä½•ä¸ºâ€œä¸´æ—¶å¤šç‰ˆæœ¬â€ï¼Œæ•°æ®æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªç‰ˆæœ¬åŒ–çš„å…³ç³»è¡¨é‡Œé¢ï¼Œå­˜å‚¨çš„æ—¶é—´æ•°æ®ä¼šæ ¹æ®å…¶æäº¤çš„æ—¶é—´æ‰“ä¸Šæ—¶é—´æˆ³ï¼Œåº”ç”¨å¯ä»¥è®¿é—®åˆ°è¾ƒè€çš„ç‰ˆæœ¬ï¼Œå¦å¤–è€çš„ç‰ˆæœ¬ä¹Ÿä¼šè¢«åƒåœ¾å›æ”¶æ‰ã€‚</p>
<p>Googleå®˜æ–¹è®¤ä¸º Spanneræ˜¯ä¸‹ä¸€ä»£BigTableï¼Œä¹Ÿæ˜¯Megastoreçš„ç»§ä»»è€…ã€‚</p>
<h5>Google Spannerè®¾è®¡</h5>
<h6>åŠŸèƒ½</h6>
<p>ä»é«˜å±‚çœ‹Spanneræ˜¯é€šè¿‡PaxosçŠ¶æ€æœºå°†åˆ†åŒºå¥½çš„æ•°æ®åˆ†å¸ƒåœ¨å…¨çƒçš„ã€‚æ•°æ®å¤åˆ¶å…¨çƒåŒ–çš„ï¼Œç”¨æˆ·å¯ä»¥æŒ‡å®šæ•°æ®å¤åˆ¶çš„ä»½æ•°å’Œå­˜å‚¨çš„åœ°ç‚¹ã€‚Spannerå¯ä»¥åœ¨é›†ç¾¤æˆ–è€…æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™å°†æ•°æ®è¿ç§»åˆ°åˆé€‚çš„åœ°ç‚¹ï¼Œåšè´Ÿè½½å‡è¡¡ã€‚ç”¨æˆ·å¯ä»¥æŒ‡å®šå°†æ•°æ®åˆ†å¸ƒåœ¨å¤šä¸ªæ•°æ®ä¸­å¿ƒï¼Œä¸è¿‡æ›´å¤šçš„æ•°æ®ä¸­å¿ƒå°†é€ æˆæ›´å¤šçš„å»¶è¿Ÿã€‚ç”¨æˆ·éœ€è¦åœ¨å¯é æ€§å’Œå»¶è¿Ÿä¹‹é—´åšæƒè¡¡ï¼Œä¸€èˆ¬æ¥è¯´å¤åˆ¶1ï¼Œ2ä¸ªæ•°æ®ä¸­å¿ƒè¶³ä»¥ä¿è¯å¯é æ€§ã€‚</p>
<p>ä½œä¸ºä¸€ä¸ªå…¨çƒåŒ–åˆ†å¸ƒå¼ç³»ç»Ÿï¼ŒSpanneræä¾›ä¸€äº›æœ‰è¶£çš„ç‰¹æ€§ã€‚</p>
<ul>
<li>åº”ç”¨å¯ä»¥ç»†ç²’åº¦çš„æŒ‡å®šæ•°æ®åˆ†å¸ƒçš„ä½ç½®ã€‚ç²¾ç¡®çš„æŒ‡å®šæ•°æ®ç¦»ç”¨æˆ·æœ‰å¤šè¿œï¼Œå¯ä»¥æœ‰æ•ˆçš„æ§åˆ¶è¯»å»¶è¿Ÿ(è¯»å»¶è¿Ÿå–å†³äºæœ€è¿‘çš„æ‹·è´)ã€‚æŒ‡å®šæ•°æ®æ‹·è´ä¹‹é—´æœ‰å¤šè¿œï¼Œå¯ä»¥æ§åˆ¶å†™çš„å»¶è¿Ÿ(å†™å»¶è¿Ÿå–å†³äºæœ€è¿œçš„æ‹·è´)ã€‚è¿˜è¦æ•°æ®çš„å¤åˆ¶ä»½æ•°ï¼Œå¯ä»¥æ§åˆ¶æ•°æ®çš„å¯é æ€§å’Œè¯»æ€§èƒ½ã€‚(å¤šå†™å‡ ä»½ï¼Œå¯ä»¥æŠµå¾¡æ›´å¤§çš„äº‹æ•…)</li>
<li>Spannerè¿˜æœ‰ä¸¤ä¸ªä¸€èˆ¬åˆ†å¸ƒå¼æ•°æ®åº“ä¸å…·å¤‡çš„ç‰¹æ€§ï¼šè¯»å†™çš„å¤–éƒ¨ä¸€è‡´æ€§ï¼ŒåŸºäºæ—¶é—´æˆ³çš„å…¨å±€çš„è¯»ä¸€è‡´ã€‚è¿™ä¸¤ä¸ªç‰¹æ€§å¯ä»¥è®©Spanneræ”¯æŒä¸€è‡´çš„å¤‡ä»½ï¼Œä¸€è‡´çš„MapReduceï¼Œè¿˜æœ‰åŸå­çš„Schemaä¿®æ”¹ã€‚</li>
</ul>
<div>
<p>è¿™å†™ç‰¹æ€§éƒ½å¾—ç›Šæœ‰Spanneræœ‰ä¸€ä¸ªå…¨çƒæ—¶é—´åŒæ­¥æœºåˆ¶ï¼Œå¯ä»¥åœ¨æ•°æ®æäº¤çš„æ—¶å€™ç»™å‡ºä¸€ä¸ªæ—¶é—´æˆ³ã€‚å› ä¸ºæ—¶é—´æ˜¯ç³»åˆ—åŒ–çš„ï¼Œæ‰€ä»¥æ‰æœ‰å¤–éƒ¨ä¸€è‡´æ€§ã€‚è¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œå¦‚æœæœ‰ä¸¤ä¸ªæäº¤ï¼Œä¸€ä¸ªåœ¨T1,ä¸€ä¸ªåœ¨T2ã€‚é‚£æœ‰æ›´æ™šçš„æ—¶é—´æˆ³é‚£ä¸ªæäº¤æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>è¿™ä¸ªå…¨çƒæ—¶é—´åŒæ­¥æœºåˆ¶æ˜¯ç”¨ä¸€ä¸ªå…·æœ‰GPSå’ŒåŸå­é’Ÿçš„TrueTime APIæä¾›äº†ã€‚è¿™ä¸ªTrueTime APIèƒ½å¤Ÿå°†ä¸åŒæ•°æ®ä¸­å¿ƒçš„æ—¶é—´åå·®ç¼©çŸ­åœ¨10mså†…ã€‚è¿™ä¸ªAPIå¯ä»¥æä¾›ä¸€ä¸ªç²¾ç¡®çš„æ—¶é—´ï¼ŒåŒæ—¶ç»™å‡ºè¯¯å·®èŒƒå›´ã€‚Googleå·²ç»æœ‰äº†ä¸€ä¸ªTrueTime APIçš„å®ç°ã€‚ç¬”è€…è§‰å¾—è¿™ä¸ªTrueTime API éå¸¸æœ‰æ„ä¹‰ï¼Œå¦‚æœèƒ½å•ç‹¬å¼€æºè¿™éƒ¨åˆ†çš„è¯ï¼Œå¾ˆå¤šæ•°æ®åº“å¦‚MongoDBéƒ½å¯ä»¥ä»ä¸­å—ç›Šã€‚</p>
<h6>ä½“ç³»ç»“æ„</h6>
<p>Spannerç”±äºæ˜¯å…¨çƒåŒ–çš„ï¼Œæ‰€ä»¥æœ‰ä¸¤ä¸ªå…¶ä»–åˆ†å¸ƒå¼æ•°æ®åº“æ²¡æœ‰çš„æ¦‚å¿µã€‚</p>
<ul>
<li>Universeã€‚ä¸€ä¸ªSpanneréƒ¨ç½²å®ä¾‹ç§°ä¹‹ä¸ºä¸€ä¸ªUniverseã€‚ç›®å‰å…¨ä¸–ç•Œæœ‰3ä¸ªã€‚ä¸€ä¸ªå¼€å‘ï¼Œä¸€ä¸ªæµ‹è¯•ï¼Œä¸€ä¸ªçº¿ä¸Šã€‚å› ä¸ºä¸€ä¸ªUniverseå°±èƒ½è¦†ç›–å…¨çƒï¼Œä¸éœ€è¦å¤šä¸ªã€‚</li>
<li>Zones. æ¯ä¸ªZoneç›¸å½“äºä¸€ä¸ªæ•°æ®ä¸­å¿ƒï¼Œä¸€ä¸ªZoneå†…éƒ¨ç‰©ç†ä¸Šå¿…é¡»åœ¨ä¸€èµ·ã€‚è€Œä¸€ä¸ªæ•°æ®ä¸­å¿ƒå¯èƒ½æœ‰å¤šä¸ªZoneã€‚å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ ç§»é™¤Zoneã€‚ä¸€ä¸ªZoneå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªBigTableéƒ¨ç½²å®ä¾‹</li>
</ul>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479636669121_f.jpg"><img loading="lazy" decoding="async" class="alignnone" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479636669121_f.jpg" alt="" width="500" height="373"></a></p>
<p>å¦‚å›¾æ‰€ç¤ºã€‚ä¸€ä¸ªSpanneræœ‰ä¸Šé¢ä¸€äº›ç»„ä»¶ã€‚å®é™…çš„ç»„ä»¶è‚¯å®šä¸æ­¢è¿™äº›ï¼Œæ¯”å¦‚TrueTime API Serverã€‚å¦‚æœä»…ä»…çŸ¥é“è¿™äº›çŸ¥è¯†ï¼Œæ¥æ„å»ºSpanneræ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚ä½†Googleéƒ½ç•¥å»äº†ã€‚é‚£ç¬”è€…å°±ç®€è¦ä»‹ç»ä¸€ä¸‹ã€‚</p>
<ul>
<li>Universemaster: ç›‘æ§è¿™ä¸ªuniverseé‡Œzoneçº§åˆ«çš„çŠ¶æ€ä¿¡æ¯</li>
<li>Placement driverï¼šæä¾›è·¨åŒºæ•°æ®è¿ç§»æ—¶ç®¡ç†åŠŸèƒ½</li>
<li>Zonemasterï¼šç›¸å½“äºBigTableçš„Masterã€‚ç®¡ç†Spanserverä¸Šçš„æ•°æ®ã€‚</li>
<li>Location proxyï¼šå­˜å‚¨æ•°æ®çš„Locationä¿¡æ¯ã€‚å®¢æˆ·ç«¯è¦å…ˆè®¿é—®ä»–æ‰çŸ¥é“æ•°æ®åœ¨é‚£ä¸ªSpanserverä¸Šã€‚</li>
<li>Spanserverï¼šç›¸å½“äºBigTableçš„ThunkServerã€‚ç”¨äºå­˜å‚¨æ•°æ®ã€‚</li>
</ul>
<p>&nbsp;</p>
<div>?å¯ä»¥çœ‹å‡ºæ¥è¿™é‡Œæ¯ä¸ªç»„ä»¶éƒ½å¾ˆæœ‰æ–™ï¼Œä½†æ˜¯Googleçš„è®ºæ–‡é‡Œåªå…·ä½“ä»‹ç»äº†Spanserverçš„è®¾è®¡ï¼Œç¬”è€…ä¹Ÿåªèƒ½ä»‹ç»åˆ°è¿™é‡Œã€‚ä¸‹é¢è¯¦ç»†é˜è¿°Spanserverçš„è®¾è®¡ã€‚</div>
<h6>Spanserver</h6>
<p>æœ¬ç« è¯¦ç»†ä»‹ç»Spanserverçš„è®¾è®¡å®ç°ã€‚Spanserverçš„è®¾è®¡å’ŒBigTableéå¸¸çš„ç›¸ä¼¼ã€‚å‚ç…§ä¸‹å›¾</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479637559889_f.jpg"><img loading="lazy" decoding="async" class="alignnone" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479637559889_f.jpg" alt="" width="480" height="442"></a></p>
<p>ä»ä¸‹å¾€ä¸Šçœ‹ã€‚æ¯ä¸ªæ•°æ®ä¸­å¿ƒä¼šè¿è¡Œä¸€å¥—Colossus (GFS II) ã€‚æ¯ä¸ªæœºå™¨æœ‰100-1000ä¸ªtabletã€‚Tabletæ¦‚å¿µä¸Šå°†ç›¸å½“äºæ•°æ®åº“ä¸€å¼ è¡¨é‡Œçš„ä¸€äº›è¡Œï¼Œç‰©ç†ä¸Šæ˜¯æ•°æ®æ–‡ä»¶ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œä¸€å¼ 1000è¡Œçš„è¡¨ï¼Œæœ‰10ä¸ªtabletï¼Œç¬¬1-100è¡Œæ˜¯ä¸€ä¸ªtabletï¼Œç¬¬101-200æ˜¯ä¸€ä¸ªtabletã€‚ä½†å’ŒBigTableä¸åŒçš„æ˜¯BigTableé‡Œé¢çš„tabletå­˜å‚¨çš„æ˜¯Key-Valueéƒ½æ˜¯stringï¼ŒSpannerå­˜å‚¨çš„Keyå¤šäº†ä¸€ä¸ªæ—¶é—´æˆ³ï¼š</p>
<p>(Key: string, timestamp: int64) -&gt; stringã€‚</p>
<p>å› æ­¤spannerå¤©ç”Ÿå°±æ”¯æŒå¤šç‰ˆæœ¬ï¼Œtabletåœ¨æ–‡ä»¶ç³»ç»Ÿä¸­æ˜¯ä¸€ä¸ªB-tree-likeçš„æ–‡ä»¶å’Œä¸€ä¸ªwrite-aheadæ—¥å¿—ã€‚</p>
<p>æ¯ä¸ªTabletä¸Šä¼šæœ‰ä¸€ä¸ªPaxosçŠ¶æ€æœºã€‚Paxosæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ä¸€è‡´æ€§åè®®ã€‚Tableçš„å…ƒæ•°æ®å’Œlogéƒ½å­˜å‚¨åœ¨ä¸Šé¢ã€‚Paxosä¼šé€‰å‡ºä¸€ä¸ªreplicaåšleaderï¼Œè¿™ä¸ªleaderçš„å¯¿å‘½é»˜è®¤æ˜¯10s,10såé‡é€‰ã€‚Leaderå°±ç›¸å½“äºå¤åˆ¶æ•°æ®çš„masterï¼Œå…¶ä»–replicaçš„æ•°æ®éƒ½æ˜¯ä»ä»–é‚£é‡Œå¤åˆ¶çš„ã€‚è¯»è¯·æ±‚å¯ä»¥èµ°ä»»æ„çš„replicaï¼Œä½†æ˜¯å†™è¯·æ±‚åªæœ‰å»leaderã€‚è¿™äº›replicaç»Ÿç§°ä¸ºä¸€ä¸ªpaxos groupã€‚</p>
<p>æ¯ä¸ªleader replicaçš„spanserverä¸Šä¼šå®ç°ä¸€ä¸ªlock tableè¿˜ç®¡ç†å¹¶å‘ã€‚Lock tableè®°å½•äº†ä¸¤é˜¶æ®µæäº¤éœ€è¦çš„é”ä¿¡æ¯ã€‚ä½†æ˜¯ä¸è®ºæ˜¯åœ¨Spannerè¿˜æ˜¯åœ¨BigTableä¸Šï¼Œä½†é‡åˆ°å†²çªçš„æ—¶å€™é•¿æ—¶é—´äº‹åŠ¡ä¼šå°†æ€§èƒ½å¾ˆå·®ã€‚æ‰€ä»¥æœ‰ä¸€äº›æ“ä½œï¼Œå¦‚äº‹åŠ¡è¯»å¯ä»¥èµ°lock tableï¼Œå…¶ä»–çš„æ“ä½œå¯ä»¥ç»•å¼€lock tableã€‚</p>
<p>æ¯ä¸ªleader replicaçš„spanserverä¸Šè¿˜æœ‰ä¸€ä¸ªtransaction managerã€‚å¦‚æœäº‹åŠ¡åœ¨ä¸€ä¸ªpaxos groupé‡Œé¢ï¼Œå¯ä»¥ç»•è¿‡transaction managerã€‚ä½†æ˜¯ä¸€æ—¦äº‹åŠ¡è·¨å¤šä¸ªpaxos groupï¼Œå°±éœ€è¦transaction manageræ¥åè°ƒã€‚å…¶ä¸­ä¸€ä¸ªTransaction managerè¢«é€‰ä¸ºleaderï¼Œå…¶ä»–çš„æ˜¯slaveå¬ä»–æŒ‡æŒ¥ã€‚è¿™æ ·å¯ä»¥ä¿è¯äº‹åŠ¡ã€‚</p>
<h6>Directories and Placement</h6>
<p>ä¹‹æ‰€ä»¥Spanneræ¯”BigTableæœ‰æ›´å¼ºçš„æ‰©å±•æ€§ï¼Œåœ¨äºSpannerè¿˜æœ‰ä¸€å±‚æŠ½è±¡çš„æ¦‚å¿µdirectory, directoryæ˜¯ä¸€äº›key-valueçš„é›†åˆï¼Œä¸€ä¸ªdirectoryé‡Œé¢çš„keyæœ‰ä¸€æ ·çš„å‰ç¼€ã€‚æ›´å¦¥å½“çš„å«æ³•æ˜¯bucketingã€‚Directoryæ˜¯åº”ç”¨æ§åˆ¶æ•°æ®ä½ç½®çš„æœ€å°å•å…ƒï¼Œå¯ä»¥é€šè¿‡è°¨æ…çš„é€‰æ‹©Keyçš„å‰ç¼€æ¥æ§åˆ¶ã€‚æ®æ­¤ç¬”è€…å¯ä»¥çŒœå‡ºï¼Œåœ¨è®¾è®¡åˆæœŸï¼ŒSpanneræ˜¯ä½œä¸ºF1çš„å­˜å‚¨ç³»ç»Ÿè€Œè®¾ç«‹ï¼Œç”šè‡³è¿˜è®¾è®¡æœ‰ç±»ä¼¼directoryçš„å±‚æ¬¡ç»“æ„ï¼Œè¿™æ ·çš„å±‚æ¬¡æœ‰å¾ˆå¤šå¥½å¤„ï¼Œä½†æ˜¯å®ç°å¤ªå¤æ‚è¢«æ‘’å¼ƒäº†ã€‚</p>
<p>Directoryä½œä¸ºæ•°æ®æ”¾ç½®çš„æœ€å°å•å…ƒï¼Œå¯ä»¥åœ¨paxos groupé‡Œé¢ç§»æ¥ç§»å»ã€‚Spannerç§»åŠ¨ä¸€ä¸ªdirectoryä¸€èˆ¬å‡ºäºå¦‚ä¸‹å‡ ä¸ªåŸå› ï¼š</p>
<ul>
<li>ä¸€ä¸ªpaxos groupçš„è´Ÿè½½å¤ªå¤§ï¼Œéœ€è¦åˆ‡åˆ†</li>
<li>å°†æ•°æ®ç§»åŠ¨åˆ°accessæ›´è¿‘çš„åœ°æ–¹</li>
<li>å°†ç»å¸¸åŒæ—¶è®¿é—®çš„directoryæ”¾åˆ°ä¸€ä¸ªpaxos groupé‡Œé¢</li>
</ul>
<p>Directoryå¯ä»¥åœ¨ä¸å½±å“clientçš„å‰æä¸‹ï¼Œåœ¨åå°ç§»åŠ¨ã€‚ç§»åŠ¨ä¸€ä¸ª50MBçš„directoryå¤§æ¦‚éœ€è¦çš„å‡ ç§’é’Ÿã€‚</p>
<p>é‚£ä¹ˆdirectoryå’Œtabletåˆæ˜¯ä»€ä¹ˆå…³ç³»å‘¢ã€‚å¯ä»¥ç†è§£ä¸ºDirectoryæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µï¼Œç®¡ç†æ•°æ®çš„å•å…ƒï¼›è€Œtabletæ˜¯ç‰©ç†çš„ä¸œè¥¿ï¼Œæ•°æ®æ–‡ä»¶ã€‚ç”±äºä¸€ä¸ªPaxos groupå¯èƒ½ä¼šæœ‰å¤šä¸ªdirectoryï¼Œæ‰€ä»¥spannerçš„tabletå®ç°å’ŒBigTableçš„tabletå®ç°æœ‰äº›ä¸åŒã€‚BigTableçš„tabletæ˜¯å•ä¸ªé¡ºåºæ–‡ä»¶ã€‚Googleæœ‰ä¸ªé¡¹ç›®ï¼Œåä¸ºLevel DBï¼Œæ˜¯BigTableçš„åº•å±‚ï¼Œå¯ä»¥çœ‹åˆ°å…¶å®ç°ç»†èŠ‚ã€‚è€ŒSpannerçš„tabletå¯ä»¥ç†è§£æ˜¯ä¸€äº›åŸºäºè¡Œçš„åˆ†åŒºçš„å®¹å™¨ã€‚è¿™æ ·å°±å¯ä»¥å°†ä¸€äº›ç»å¸¸åŒæ—¶è®¿é—®çš„directoryæ”¾åœ¨ä¸€ä¸ªtableté‡Œé¢ï¼Œè€Œä¸ç”¨å¤ªåœ¨æ„é¡ºåºå…³ç³»ã€‚</p>
<p>åœ¨paxos groupä¹‹é—´ç§»åŠ¨directoryæ˜¯åå°ä»»åŠ¡ã€‚è¿™ä¸ªæ“ä½œè¿˜è¢«ç”¨æ¥ç§»åŠ¨replicasã€‚ç§»åŠ¨æ“ä½œè®¾è®¡çš„æ—¶å€™ä¸æ˜¯äº‹åŠ¡çš„ï¼Œå› ä¸ºè¿™æ ·ä¼šé€ æˆå¤§é‡çš„è¯»å†™blockã€‚æ“ä½œçš„æ—¶å€™æ˜¯å…ˆå°†å®é™…æ•°æ®ç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ï¼Œç„¶åå†ç”¨ä¸€ä¸ªåŸå­çš„æ“ä½œæ›´æ–°å…ƒæ•°æ®ï¼Œå®Œæˆæ•´ä¸ªç§»åŠ¨è¿‡ç¨‹ã€‚</p>
<p>Directoryè¿˜æ˜¯è®°å½•åœ°ç†ä½ç½®çš„æœ€å°å•å…ƒã€‚æ•°æ®çš„åœ°ç†ä½ç½®æ˜¯ç”±åº”ç”¨å†³å®šçš„ï¼Œé…ç½®çš„æ—¶å€™éœ€è¦æŒ‡å®šå¤åˆ¶æ•°ç›®å’Œç±»å‹ï¼Œè¿˜æœ‰åœ°ç†çš„ä½ç½®ã€‚æ¯”å¦‚(ä¸Šæµ·ï¼Œå¤åˆ¶2ä»½ï¼›å—äº¬å¤åˆ¶1åˆ†) ã€‚è¿™æ ·åº”ç”¨å°±å¯ä»¥æ ¹æ®ç”¨æˆ·æŒ‡å®šç»ˆç«¯ç”¨æˆ·å®é™…æƒ…å†µå†³å®šçš„æ•°æ®å­˜å‚¨ä½ç½®ã€‚æ¯”å¦‚ä¸­å›½é˜Ÿçš„æ•°æ®åœ¨äºšæ´²æœ‰3ä»½æ‹·è´, æ—¥æœ¬é˜Ÿçš„æ•°æ®å…¨çƒéƒ½æœ‰æ‹·è´ã€‚</p>
<p>å‰é¢å¯¹directoryè¿˜æ˜¯è¢«ç®€åŒ–è¿‡çš„ï¼Œè¿˜æœ‰å¾ˆå¤šæ— æ³•è¯¦è¿°ã€‚</p>
<h6>æ•°æ®æ¨¡å‹</h6>
<p>Spannerçš„æ•°æ®æ¨¡å‹æ¥è‡ªäºGoogleå†…éƒ¨çš„å®è·µã€‚åœ¨è®¾è®¡ä¹‹åˆï¼ŒSpannerå°±å†³å¿ƒæœ‰ä»¥ä¸‹çš„ç‰¹æ€§ï¼š</p>
<ul>
<li>æ”¯æŒç±»ä¼¼å…³ç³»æ•°æ®åº“çš„schema</li>
<li>Queryè¯­å¥</li>
<li>æ”¯æŒå¹¿ä¹‰ä¸Šçš„äº‹åŠ¡</li>
</ul>
<p>ä¸ºä½•ä¼šè¿™æ ·å†³å®šå‘¢ï¼Ÿåœ¨Googleå†…éƒ¨è¿˜æœ‰ä¸€ä¸ªMegastoreï¼Œå°½ç®¡è¦å¿å—æ€§èƒ½ä¸å¤Ÿçš„æŠ˜ç£¨ï¼Œä½†æ˜¯åœ¨Googleæœ‰300å¤šä¸ªåº”ç”¨åœ¨ç”¨å®ƒï¼Œå› ä¸ºMegastoreæ”¯æŒä¸€ä¸ªç±»ä¼¼å…³ç³»æ•°æ®åº“çš„schemaï¼Œè€Œä¸”æ”¯æŒåŒæ­¥å¤åˆ¶ (BigTableåªæ”¯æŒæœ€ç»ˆä¸€è‡´çš„å¤åˆ¶) ã€‚ä½¿ç”¨Megastoreçš„åº”ç”¨æœ‰å¤§åé¼é¼çš„Gmail, Picasa, Calendar, Android Marketå’ŒAppEngineã€‚ è€Œå¿…é¡»å¯¹Queryè¯­å¥çš„æ”¯æŒï¼Œæ¥è‡ªäºå¹¿å—æ¬¢è¿çš„Dremelï¼Œç¬”è€…ä¸ä¹…å‰å†™äº†ç¯‡æ–‡ç« æ¥ä»‹ç»ä»–ã€‚ æœ€åå¯¹äº‹åŠ¡çš„æ”¯æŒæ˜¯æ¯”ä¸å¯å°‘äº†ï¼ŒBigTableåœ¨Googleå†…éƒ¨è¢«æŠ±æ€¨çš„æœ€å¤šçš„å°±æ˜¯å…¶åªèƒ½æ”¯æŒè¡Œäº‹åŠ¡ï¼Œå†å¤§ç²’åº¦çš„äº‹åŠ¡å°±æ— èƒ½ä¸ºåŠ›äº†ã€‚Spannerçš„å¼€å‘è€…è®¤ä¸ºï¼Œè¿‡åº¦ä½¿ç”¨äº‹åŠ¡é€ æˆçš„æ€§èƒ½ä¸‹é™çš„æ¶æœï¼Œåº”è¯¥ç”±åº”ç”¨çš„å¼€å‘è€…æ‰¿æ‹…ã€‚åº”ç”¨å¼€å‘è€…åœ¨ä½¿ç”¨äº‹åŠ¡çš„æ—¶å€™ï¼Œå¿…é¡»è€ƒè™‘åˆ°æ€§èƒ½é—®é¢˜ã€‚è€Œæ•°æ®åº“å¿…é¡»æä¾›äº‹åŠ¡æœºåˆ¶ï¼Œè€Œä¸æ˜¯å› ä¸ºæ€§èƒ½é—®é¢˜ï¼Œå°±å¹²è„†ä¸æä¾›äº‹åŠ¡æ”¯æŒã€‚</p>
<p>æ•°æ®æ¨¡å‹æ˜¯å»ºç«‹åœ¨directoryå’Œkey-valueæ¨¡å‹çš„æŠ½è±¡ä¹‹ä¸Šçš„ã€‚ä¸€ä¸ªåº”ç”¨å¯ä»¥åœ¨ä¸€ä¸ªuniverseä¸­å»ºç«‹ä¸€ä¸ªæˆ–å¤šä¸ªdatabaseï¼Œåœ¨æ¯ä¸ªdatabaseä¸­å»ºç«‹ä»»æ„çš„tableã€‚Tableçœ‹èµ·æ¥å°±åƒå…³ç³»å‹æ•°æ®åº“çš„è¡¨ã€‚æœ‰è¡Œï¼Œæœ‰åˆ—ï¼Œè¿˜æœ‰ç‰ˆæœ¬ã€‚Queryè¯­å¥çœ‹èµ·æ¥æ˜¯å¤šäº†ä¸€äº›æ‰©å±•çš„SQLè¯­å¥ã€‚</p>
<p>Spannerçš„æ•°æ®æ¨¡å‹ä¹Ÿä¸æ˜¯çº¯æ­£çš„å…³ç³»æ¨¡å‹ï¼Œæ¯ä¸€è¡Œéƒ½å¿…é¡»æœ‰ä¸€åˆ—æˆ–å¤šåˆ—ç»„ä»¶ã€‚çœ‹èµ·æ¥è¿˜æ˜¯Key-valueã€‚ä¸»é”®ç»„æˆKey,å…¶ä»–çš„åˆ—æ˜¯Valueã€‚ä½†è¿™æ ·çš„è®¾è®¡å¯¹åº”ç”¨ä¹Ÿæ˜¯å¾ˆæœ‰è£¨ç›Šçš„ï¼Œåº”ç”¨å¯ä»¥é€šè¿‡ä¸»é”®æ¥å®šä½åˆ°æŸä¸€è¡Œã€‚</p>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479638417129_f.jpg"><img loading="lazy" decoding="async" class="alignnone" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479638417129_f.jpg" alt="" width="500" height="438"></a></p>
<p>ä¸Šå›¾æ˜¯ä¸€ä¸ªä¾‹å­ã€‚å¯¹äºä¸€ä¸ªå…¸å‹çš„ç›¸å†Œåº”ç”¨ï¼Œéœ€è¦å­˜å‚¨å…¶ç”¨æˆ·å’Œç›¸å†Œã€‚å¯ä»¥ç”¨ä¸Šé¢çš„ä¸¤ä¸ªSQLæ¥åˆ›å»ºè¡¨ã€‚Spannerçš„è¡¨æ˜¯å±‚æ¬¡åŒ–çš„ï¼Œæœ€é¡¶å±‚çš„è¡¨æ˜¯directory tableã€‚å…¶ä»–çš„è¡¨åˆ›å»ºçš„æ—¶å€™ï¼Œå¯ä»¥ç”¨ interleave in parentæ¥ä»€ä¹ˆå±‚æ¬¡å…³ç³»ã€‚è¿™æ ·çš„ç»“æ„ï¼Œåœ¨å®ç°çš„æ—¶å€™ï¼ŒSpannerå¯ä»¥å°†åµŒå¥—çš„æ•°æ®æ”¾åœ¨ä¸€èµ·ï¼Œè¿™æ ·åœ¨åˆ†åŒºçš„æ—¶å€™æ€§èƒ½ä¼šæå‡å¾ˆå¤šã€‚å¦åˆ™Spanneræ— æ³•è·çŸ¥æœ€é‡è¦çš„è¡¨ä¹‹é—´çš„å…³ç³»ã€‚</p>
<h6>TrueTime</h6>
<p><a href="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479643368266_f.jpg"><img loading="lazy" decoding="async" class="alignnone" src="http://yankaycom-wordpress.stor.sinaapp.com/uploads/2012/12/13479643368266_f.jpg" alt="" width="500" height="188"></a></p>
<p>TrueTime API æ˜¯ä¸€ä¸ªéå¸¸æœ‰åˆ›æ„çš„ä¸œè¥¿ï¼Œå¯ä»¥åŒæ­¥å…¨çƒçš„æ—¶é—´ã€‚ä¸Šè¡¨å°±æ˜¯TrueTime APIã€‚TT.now()å¯ä»¥è·å¾—ä¸€ä¸ªç»å¯¹æ—¶é—´TTintervalï¼Œè¿™ä¸ªå€¼å’ŒUnixTimeæ˜¯ç›¸åŒçš„ï¼ŒåŒæ—¶è¿˜èƒ½å¤Ÿå¾—åˆ°ä¸€ä¸ªè¯¯å·®eã€‚TT.after(t)å’ŒTT.before(t)æ˜¯åŸºäºTT.now()å®ç°çš„ã€‚</p>
<p>é‚£è¿™ä¸ªTrueTime APIå®ç°é çš„æ˜¯GFSå’ŒåŸå­é’Ÿã€‚ä¹‹æ‰€ä»¥è¦ç”¨ä¸¤ç§æŠ€æœ¯æ¥å¤„ç†ï¼Œæ˜¯å› ä¸ºå¯¼è‡´è¿™ä¸¤ä¸ªæŠ€æœ¯çš„å¤±è´¥çš„åŸå› æ˜¯ä¸åŒçš„ã€‚GPSä¼šæœ‰ä¸€ä¸ªå¤©çº¿ï¼Œç”µæ³¢å¹²æ‰°ä¼šå¯¼è‡´å…¶å¤±çµã€‚åŸå­é’Ÿå¾ˆç¨³å®šã€‚å½“GPSå¤±çµçš„æ—¶å€™ï¼ŒåŸå­é’Ÿä»ç„¶èƒ½ä¿è¯åœ¨ç›¸å½“é•¿çš„æ—¶é—´å†…ï¼Œä¸ä¼šå‡ºç°åå·®ã€‚</p>
<p>å®é™…éƒ¨ç½²çš„æ—¶å€™ã€‚æ¯ä¸ªæ•°æ®ä¸­å¿ƒéœ€è¦éƒ¨ç½²ä¸€äº›Masteræœºå™¨ï¼Œå…¶ä»–æœºå™¨ä¸Šéœ€è¦æœ‰ä¸€ä¸ªslaveè¿›ç¨‹æ¥ä»MasteråŒæ­¥ã€‚æœ‰çš„Masterç”¨GPSï¼Œæœ‰çš„Masterç”¨åŸå­é’Ÿã€‚è¿™äº›Masterç‰©ç†ä¸Šåˆ†å¸ƒçš„æ¯”è¾ƒè¿œï¼Œæ€•å‡ºç°ç‰©ç†ä¸Šçš„å¹²æ‰°ã€‚æ¯”å¦‚å¦‚æœæ”¾åœ¨ä¸€ä¸ªæœºæ¶ä¸Šï¼Œæœºæ¶è¢«äººç¢°å€’äº†ï¼Œå°±å…¨å®•äº†ã€‚å¦å¤–åŸå­é’Ÿä¸æ˜¯å¹¶å¾ˆè´µã€‚Masterè‡ªå·±è¿˜ä¼šä¸æ–­æ¯”å¯¹ï¼Œæ–°çš„æ—¶é—´ä¿¡æ¯è¿˜ä¼šå’ŒMasterè‡ªèº«æ—¶é’Ÿçš„æ¯”å¯¹ï¼Œä¼šæ’é™¤æ‰åå·®æ¯”è¾ƒå¤§çš„ï¼Œå¹¶è·å¾—ä¸€ä¸ªä¿å®ˆçš„ç»“æœã€‚æœ€ç»ˆGPS masteræä¾›æ—¶é—´ç²¾ç¡®åº¦å¾ˆé«˜ï¼Œè¯¯å·®æ¥è¿‘äº0ã€‚</p>
<p>&nbsp;</p>
<p>æ¯ä¸ªSlaveåå°è¿›ç¨‹ä¼šæ¯ä¸ª30ç§’ä»è‹¥å¹²ä¸ªMasteræ›´æ–°è‡ªå·±çš„æ—¶é’Ÿã€‚ä¸ºäº†é™ä½è¯¯å·®ï¼Œä½¿ç”¨Marzulloç®—æ³•ã€‚æ¯ä¸ªslaveè¿˜ä¼šè®¡ç®—å‡ºè‡ªå·±çš„è¯¯å·®ã€‚è¿™é‡Œçš„è¯¯å·®åŒ…æ‹¬çš„é€šä¿¡çš„å»¶è¿Ÿï¼Œæœºå™¨çš„è´Ÿè½½ã€‚å¦‚æœä¸èƒ½è®¿é—®Masterï¼Œè¯¯å·®å°±ä¼šè¶Šèµ°è¶Šå¤§ï¼ŒçŸ¥é“é‡æ–°å¯ä»¥è®¿é—®ã€‚</p>
<h5>Google Spannerå¹¶å‘æ§åˆ¶</h5>
<p>Spannerä½¿ç”¨TrueTimeæ¥æ§åˆ¶å¹¶å‘ï¼Œå®ç°å¤–éƒ¨ä¸€è‡´æ€§ã€‚æ”¯æŒä»¥ä¸‹å‡ ç§äº‹åŠ¡ã€‚</p>
<ul>
<li>è¯»å†™äº‹åŠ¡</li>
<li>åªè¯»äº‹åŠ¡</li>
<li>å¿«ç…§è¯»ï¼Œå®¢æˆ·ç«¯æä¾›æ—¶é—´æˆ³</li>
<li>å¿«ç…§è¯»ï¼Œå®¢æˆ·ç«¯æä¾›æ—¶é—´èŒƒå›´</li>
</ul>
<p>ä¾‹å¦‚ä¸€ä¸ªè¯»å†™äº‹åŠ¡å‘ç”Ÿåœ¨æ—¶é—´tï¼Œé‚£ä¹ˆåœ¨å…¨ä¸–ç•Œä»»ä½•ä¸€ä¸ªåœ°æ–¹ï¼ŒæŒ‡å®štå¿«ç…§è¯»éƒ½å¯ä»¥è¯»åˆ°å†™å…¥çš„å€¼ã€‚</p>
<table>
<tbody>
<tr>
<td valign="top"><strong>Operation</strong></td>
<td valign="top"><strong>Concurrency Control</strong></td>
<td valign="top"><strong>Replica Required</strong></td>
</tr>
<tr>
<td valign="top"><strong>Read-Write Transaction </strong></td>
<td valign="top">pessimistic</td>
<td valign="top">leader</td>
</tr>
<tr>
<td valign="top"><strong>Read-Only Transaction</strong></td>
<td valign="top">lock-free</td>
<td valign="top">leader for timestamp; any for read</td>
</tr>
<tr>
<td valign="top" width="214"><strong>Snapshot Read, client-provided timestamp</strong></td>
<td valign="top" width="214">lock-free</td>
<td valign="top" width="214">any</td>
</tr>
<tr>
<td valign="top" width="214"><strong>Snapshot Read, client-provided bound</strong></td>
<td valign="top" width="214">lock-free</td>
<td valign="top" width="214">any</td>
</tr>
</tbody>
</table>
<p>ä¸Šè¡¨æ˜¯Spannerç°åœ¨æ”¯æŒçš„äº‹åŠ¡ã€‚å•ç‹¬çš„å†™æ“ä½œéƒ½è¢«å®ç°ä¸ºè¯»å†™äº‹åŠ¡ ï¼› å•ç‹¬çš„éå¿«ç…§è¢«å®ç°ä¸ºåªè¯»äº‹åŠ¡ã€‚äº‹åŠ¡æ€»æœ‰å¤±è´¥çš„æ—¶å€™ï¼Œå¦‚æœå¤±è´¥ï¼Œå¯¹äºè¿™ä¸¤ç§æ“ä½œä¼šè‡ªå·±é‡è¯•ï¼Œæ— éœ€åº”ç”¨è‡ªå·±å®ç°é‡è¯•å¾ªç¯ã€‚</p>
<p>æ—¶é—´æˆ³çš„è®¾è®¡å¤§å¤§æé«˜äº†åªè¯»äº‹åŠ¡çš„æ€§èƒ½ã€‚äº‹åŠ¡å¼€å§‹çš„æ—¶å€™ï¼Œè¦å£°æ˜è¿™ä¸ªäº‹åŠ¡é‡Œæ²¡æœ‰å†™æ“ä½œï¼Œåªè¯»äº‹åŠ¡å¯ä¸æ˜¯ä¸€ä¸ªç®€å•çš„æ²¡æœ‰å†™æ“ä½œçš„è¯»å†™äº‹åŠ¡ã€‚å®ƒä¼šç”¨ä¸€ä¸ªç³»ç»Ÿæ—¶é—´æˆ³å»è¯»ï¼Œæ‰€ä»¥å¯¹äºåŒæ—¶çš„å…¶ä»–çš„å†™æ“ä½œæ˜¯æ²¡æœ‰Blockçš„ã€‚è€Œä¸”åªè¯»äº‹åŠ¡å¯ä»¥åœ¨ä»»æ„ä¸€å°å·²ç»æ›´æ–°è¿‡çš„replicaä¸Šé¢è¯»ã€‚</p>
<p>å¯¹äºå¿«ç…§è¯»æ“ä½œï¼Œå¯ä»¥è¯»å–ä»¥å‰çš„æ•°æ®ï¼Œéœ€è¦å®¢æˆ·ç«¯æŒ‡å®šä¸€ä¸ªæ—¶é—´æˆ³æˆ–è€…ä¸€ä¸ªæ—¶é—´èŒƒå›´ã€‚Spannerä¼šæ‰¾åˆ°ä¸€ä¸ªå·²ç»å……åˆ†æ›´æ–°å¥½çš„replicaä¸Šè¯»å–ã€‚</p>
<p>è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„ç‰¹æ€§çš„æ˜¯ï¼Œå¯¹äºåªè¯»äº‹åŠ¡ï¼Œå¦‚æœæ‰§è¡Œåˆ°ä¸€åŠï¼Œè¯¥replicaå‡ºç°äº†é”™è¯¯ã€‚å®¢æˆ·ç«¯æ²¡æœ‰å¿…è¦åœ¨æœ¬åœ°ç¼“å­˜åˆšåˆšè¯»è¿‡çš„æ—¶é—´ï¼Œå› ä¸ºæ˜¯æ ¹æ®æ—¶é—´æˆ³è¯»å–çš„ã€‚åªè¦å†ç”¨åˆšåˆšçš„æ—¶é—´æˆ³è¯»å–ï¼Œå°±å¯ä»¥è·å¾—ä¸€æ ·çš„ç»“æœã€‚</p>
<h6>è¯»å†™äº‹åŠ¡</h6>
<p>æ­£å¦‚BigTableä¸€æ ·ï¼ŒSpannerçš„äº‹åŠ¡æ˜¯ä¼šå°†æ‰€æœ‰çš„å†™æ“ä½œå…ˆç¼“å­˜èµ·æ¥ï¼Œåœ¨Commitçš„æ—¶å€™ä¸€æ¬¡æäº¤ã€‚è¿™æ ·çš„è¯ï¼Œå°±è¯»ä¸å‡ºåœ¨åŒä¸€ä¸ªäº‹åŠ¡ä¸­å†™çš„æ•°æ®äº†ã€‚ä¸è¿‡è¿™æ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºSpannerçš„æ•°æ®éƒ½æ˜¯æœ‰ç‰ˆæœ¬çš„ã€‚</p>
<p>åœ¨è¯»å†™äº‹åŠ¡ä¸­ä½¿ç”¨wound-waitç®—æ³•æ¥é¿å…æ­»é”ã€‚å½“å®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯»å†™äº‹åŠ¡çš„æ—¶å€™ï¼Œé¦–å…ˆæ˜¯è¯»æ“ä½œï¼Œä»–å…ˆæ‰¾åˆ°ç›¸å…³æ•°æ®çš„leader replicaï¼Œç„¶ååŠ ä¸Šè¯»é”ï¼Œè¯»å–æœ€è¿‘çš„æ•°æ®ã€‚åœ¨å®¢æˆ·ç«¯äº‹åŠ¡å­˜æ´»çš„æ—¶å€™ä¼šä¸æ–­çš„å‘leaderå‘å¿ƒè·³ï¼Œé˜²æ­¢è¶…æ—¶ã€‚å½“å®¢æˆ·ç«¯å®Œæˆäº†æ‰€æœ‰çš„è¯»æ“ä½œï¼Œå¹¶ä¸”ç¼“å­˜äº†æ‰€æœ‰çš„å†™æ“ä½œï¼Œå°±å¼€å§‹äº†ä¸¤é˜¶æ®µæäº¤ã€‚å®¢æˆ·ç«¯é—²ç½®ä¸€ä¸ªcoordinator groupï¼Œå¹¶ç»™æ¯ä¸€ä¸ªleaderå‘é€coordinatorçš„idå’Œç¼“å­˜çš„å†™æ•°æ®ã€‚</p>
<p>leaderé¦–å…ˆä¼šä¸Šä¸€ä¸ªå†™é”ï¼Œä»–è¦æ‰¾ä¸€ä¸ªæ¯”ç°æœ‰äº‹åŠ¡æ™šçš„æ—¶é—´æˆ³ã€‚é€šè¿‡Paxosè®°å½•ã€‚æ¯ä¸€ä¸ªç›¸å…³çš„éƒ½è¦ç»™coordinatorå‘é€ä»–è‡ªå·±å‡†å¤‡çš„é‚£ä¸ªæ—¶é—´æˆ³ã€‚</p>
<p>Coordinator leaderä¸€å¼€å§‹ä¹Ÿä¼šä¸Šä¸ªå†™é”ï¼Œå½“å¤§å®¶å‘é€æ—¶é—´æˆ³ç»™ä»–ä¹‹åï¼Œä»–å°±é€‰æ‹©ä¸€ä¸ªæäº¤æ—¶é—´æˆ³ã€‚è¿™ä¸ªæäº¤çš„æ—¶é—´æˆ³ï¼Œå¿…é¡»æ¯”åˆšåˆšçš„æ‰€æœ‰æ—¶é—´æˆ³æ™šï¼Œè€Œä¸”è¿˜è¦æ¯”TT.now()+è¯¯å·®æ—¶é—´ è¿˜æœ‰æ™šã€‚è¿™ä¸ªCoordinatorå°†è¿™ä¸ªä¿¡æ¯è®°å½•åˆ°Paxosã€‚</p>
<p>åœ¨è®©replicaå†™å…¥æ•°æ®ç”Ÿæ•ˆä¹‹å‰ï¼Œcoordinatorè¿˜æœ‰å†ç­‰ä¸€ä¼šã€‚éœ€è¦ç­‰ä¸¤å€æ—¶é—´è¯¯å·®ã€‚è¿™æ®µæ—¶é—´ä¹Ÿåˆšå¥½è®©Paxosæ¥åŒæ­¥ã€‚å› ä¸ºç­‰å¾…ä¹‹åï¼Œåœ¨ä»»æ„æœºå™¨ä¸Šå‘èµ·çš„ä¸‹ä¸€ä¸ªäº‹åŠ¡çš„å¼€å§‹æ—¶é—´ï¼Œéƒ½æ¯”å¦‚ä¸ä¼šæ¯”è¿™ä¸ªäº‹åŠ¡çš„ç»“æŸæ—¶é—´æ—©äº†ã€‚ç„¶åcoordinatorå°†æäº¤æ—¶é—´æˆ³å‘é€ç»™å®¢æˆ·ç«¯è¿˜æœ‰å…¶ä»–çš„replicaã€‚ä»–ä»¬è®°å½•æ—¥å¿—ï¼Œå†™å…¥ç”Ÿæ•ˆï¼Œé‡Šæ”¾é”ã€‚</p>
<h6>åªè¯»äº‹åŠ¡</h6>
<p>å¯¹äºåªè¯»äº‹åŠ¡ï¼ŒSpanneré¦–å…ˆè¦æŒ‡å®šä¸€ä¸ªè¯»äº‹åŠ¡æ—¶é—´æˆ³ã€‚è¿˜éœ€è¦äº†è§£åœ¨è¿™ä¸ªè¯»æ“ä½œä¸­ï¼Œéœ€è¦è®¿é—®çš„æ‰€æœ‰çš„è¯»çš„Keyã€‚Spannerå¯ä»¥è‡ªåŠ¨ç¡®å®šKeyçš„èŒƒå›´ã€‚</p>
<p>å¦‚æœKeyçš„èŒƒå›´åœ¨ä¸€ä¸ªPaxos groupå†…ã€‚å®¢æˆ·ç«¯å¯ä»¥å‘èµ·ä¸€ä¸ªåªè¯»è¯·æ±‚ç»™group leaderã€‚leaderé€‰ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œè¿™ä¸ªæ—¶é—´æˆ³è¦æ¯”ä¸Šä¸€ä¸ªäº‹åŠ¡çš„ç»“æŸæ—¶é—´è¦å¤§ã€‚ç„¶åè¯»å–ç›¸åº”çš„æ•°æ®ã€‚è¿™ä¸ªäº‹åŠ¡å¯ä»¥æ»¡è¶³å¤–éƒ¨ä¸€è‡´æ€§ï¼Œè¯»å‡ºçš„ç»“æœæ˜¯æœ€åä¸€æ¬¡å†™çš„ç»“æœï¼Œå¹¶ä¸”ä¸ä¼šæœ‰ä¸ä¸€è‡´çš„æ•°æ®ã€‚</p>
<p>å¦‚æœKeyçš„èŒƒå›´åœ¨å¤šä¸ªPaxos groupå†…ï¼Œå°±ç›¸å¯¹å¤æ‚ä¸€äº›ã€‚å…¶ä¸­ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„ä¾‹å­æ˜¯ï¼Œå¯ä»¥éå†æ‰€æœ‰çš„group leadersï¼Œå¯»æ‰¾æœ€è¿‘çš„äº‹åŠ¡å‘ç”Ÿçš„æ—¶é—´ï¼Œå¹¶è¯»å–ã€‚å®¢æˆ·ç«¯åªè¦æ—¶é—´æˆ³åœ¨TT.now().latestä¹‹åå°±å¯ä»¥æ»¡è¶³è¦æ±‚äº†ã€‚</p>
<p>æœ€åçš„è¯</p>
<p>æœ¬æ–‡ä»‹ç»äº†Google Spannerçš„èƒŒæ™¯ï¼Œè®¾è®¡å’Œå¹¶å‘æ§åˆ¶ã€‚å¸Œæœ›ä¸ä¹…çš„å°†æ¥ï¼Œä¼šæœ‰å¼€æºäº§å“å‡ºç°ã€‚</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
</div>
</div>
							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e6%8a%80%e6%9c%af/index.html" rel="category tag">è½¯ä»¶æŠ€æœ¯</a>			</span>
				<span class="sep"> | </span>
			
							<span class="taglinks">
				æ ‡ç­¾ï¼š <a href="./../../tag/google/index.html" rel="tag">google</a>, <a href="./../../tag/google-spanner/index.html" rel="tag">google spanner</a>, <a href="./../../tag/spanner/index.html" rel="tag">spanner</a>			</span>
				<span class="sep"> | </span>
			
		
						<span class="comments-link"><a href="./../../google-spanner%e5%8e%9f%e7%90%86-%e5%85%a8%e7%90%83%e7%ba%a7%e7%9a%84%e5%88%86%e5%b8%83%e5%bc%8f%e6%95%b0%e6%8d%ae%e5%ba%93/index.html#comments">4 è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-26514 -->

							
								
<article id="post-26452" class="post-26452 post type-post status-publish format-standard hentry category-5 tag-dremel tag-drill tag-google-dremel tag-hadoop">

	<header class="entry-header">

		
		<h2 class="entry-title">
						<a href="./../../google-dremel-rationale/index.html" title="è¿ç»“åˆ°Google Dremel åŸç† &#8211; å¦‚ä½•èƒ½3ç§’åˆ†æ1PB" rel="bookmark">Google Dremel åŸç† &#8211; å¦‚ä½•èƒ½3ç§’åˆ†æ1PB</a>
			
		</h2>
					<div class="entry-meta">
				åœ¨ <a href="./../../google-dremel-rationale/index.html" title="ä¸‹åˆ9:46" rel="bookmark">
							<time class="entry-date updated" datetime="2012-08-23T21:46:45+08:00">2012å¹´8æœˆ23æ—¥</time>
						</a> ä¸Šå…¬å¸ƒ				<span class="byline"> ä½œè€…ä¸º <span class="author vcard">
								<a class="url fn n" href="./index.html" title="æŸ¥çœ‹ yankay çš„æ‰€æœ‰æ–‡ç« " rel="author">yankay</a>
							</span>
						</span>			</div>
<!-- .entry-meta -->
			</header>
	<!-- .entry-header -->

						<div class="entry-content">
								<h3>ç®€ä»‹</h3>
<p>Dremel æ˜¯Google çš„â€œäº¤äº’å¼â€æ•°æ®åˆ†æç³»ç»Ÿã€‚å¯ä»¥ç»„å»ºæˆè§„æ¨¡ä¸Šåƒçš„é›†ç¾¤ï¼Œå¤„ç†PBçº§åˆ«çš„æ•°æ®ã€‚MapReduceå¤„ç†ä¸€ä¸ªæ•°æ®ï¼Œéœ€è¦åˆ†é’Ÿçº§çš„æ—¶é—´ã€‚ä½œä¸ºMapReduceçš„å‘èµ·äººï¼ŒGoogleå¼€å‘äº†Dremelå°†å¤„ç†æ—¶é—´ç¼©çŸ­åˆ°ç§’çº§ï¼Œä½œä¸ºMapReduceçš„æœ‰åŠ›è¡¥å……ã€‚Dremelä½œä¸ºGoogle BigQueryçš„reportå¼•æ“ï¼Œè·å¾—äº†å¾ˆå¤§çš„æˆåŠŸã€‚æœ€è¿‘Apacheè®¡åˆ’æ¨å‡ºDremelçš„å¼€æºå®ç°Drillï¼Œå°†Dremelçš„æŠ€æœ¯åˆæ¨åˆ°äº†æµªå°–ä¸Šã€‚</p>
<h3>Google Dremelè®¾è®¡</h3>
<p>æ ¹æ®Googleå…¬å¼€çš„è®ºæ–‡ã€Š<a href="http://research.google.com/pubs/pub36632.html">Dremel: Interactive Analysis of WebScaleDatasets</a>ã€‹å¯ä»¥çœ‹åˆ°Dremelçš„è®¾è®¡åŸç†ã€‚è¿˜æœ‰ä¸€äº›æµ‹è¯•æŠ¥å‘Šã€‚è®ºæ–‡å†™äº2006å¹´ï¼Œå…¬å¼€äº2010å¹´ï¼ŒGoogleåœ¨å¤„ç†å¤§æ•°æ®æ–¹é¢ï¼ŒæœçœŸæœ‰å¾—å¤©ç‹¬åšçš„ä¼˜åŠ¿ã€‚ä¸‹é¢çš„å†…å®¹ï¼Œå¾ˆå¤§éƒ¨åˆ†æ¥è‡ªè¿™ç¯‡è®ºæ–‡ã€‚</p>
<p>éšç€Hadoopçš„æµè¡Œï¼Œå¤§è§„æ¨¡çš„æ•°æ®åˆ†æç³»ç»Ÿå·²ç»è¶Šæ¥è¶Šæ™®åŠã€‚æ•°æ®åˆ†æå¸ˆéœ€è¦ä¸€ä¸ªèƒ½å°†æ•°æ®â€œç©è½¬â€çš„äº¤äº’å¼ç³»ç»Ÿã€‚å¦‚æ­¤ï¼Œå°±å¯ä»¥éå¸¸æ–¹ä¾¿å¿«æ·çš„æµè§ˆæ•°æ®ï¼Œå»ºç«‹åˆ†ææ¨¡å‹ã€‚Dremelç³»ç»Ÿæœ‰ä¸‹é¢å‡ ä¸ªä¸»è¦çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>
<strong>Dremel</strong><strong>æ˜¯ä¸€ä¸ªå¤§è§„æ¨¡ç³»ç»Ÿã€‚</strong>åœ¨ä¸€ä¸ªPBçº§åˆ«çš„æ•°æ®é›†ä¸Šé¢ï¼Œå°†ä»»åŠ¡ç¼©çŸ­åˆ°ç§’çº§ï¼Œæ— ç–‘éœ€è¦å¤§é‡çš„å¹¶å‘ã€‚ç£ç›˜çš„é¡ºåºè¯»é€Ÿåº¦åœ¨100MB/Sä¸Šä¸‹ï¼Œé‚£ä¹ˆåœ¨1Så†…å¤„ç†1TBæ•°æ®ï¼Œæ„å‘³ç€è‡³å°‘éœ€è¦æœ‰1ä¸‡ä¸ªç£ç›˜çš„å¹¶å‘è¯»! Googleä¸€å‘æ˜¯ç”¨å»‰ä»·æœºå™¨åŠå¤§äº‹çš„å¥½æ‰‹ã€‚ä½†æ˜¯æœºå™¨è¶Šå¤šï¼Œå‡ºé—®é¢˜æ¦‚ç‡è¶Šå¤§ï¼Œå¦‚æ­¤å¤§çš„é›†ç¾¤è§„æ¨¡ï¼Œéœ€è¦æœ‰è¶³å¤Ÿçš„å®¹é”™è€ƒè™‘ï¼Œä¿è¯æ•´ä¸ªåˆ†æçš„é€Ÿåº¦ä¸è¢«é›†ç¾¤ä¸­çš„ä¸ªåˆ«æ…¢(å)èŠ‚ç‚¹å½±å“ã€‚</li>
<li>
<strong>Dremel</strong><strong>æ˜¯MR</strong><strong>äº¤äº’å¼æŸ¥è¯¢èƒ½åŠ›ä¸è¶³çš„è¡¥å……ã€‚</strong>å’ŒMapReduceä¸€æ ·ï¼ŒDremelä¹Ÿéœ€è¦å’Œæ•°æ®è¿è¡Œåœ¨ä¸€èµ·ï¼Œå°†è®¡ç®—ç§»åŠ¨åˆ°æ•°æ®ä¸Šé¢ã€‚æ‰€ä»¥å®ƒéœ€è¦GFSè¿™æ ·çš„æ–‡ä»¶ç³»ç»Ÿä½œä¸ºå­˜å‚¨å±‚ã€‚åœ¨è®¾è®¡ä¹‹åˆï¼ŒDremelå¹¶éæ˜¯MapReduceçš„æ›¿ä»£å“ï¼Œå®ƒåªæ˜¯å¯ä»¥æ‰§è¡Œéå¸¸å¿«çš„åˆ†æï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œå¸¸å¸¸ç”¨å®ƒæ¥å¤„ç†MapReduceçš„ç»“æœé›†æˆ–è€…ç”¨æ¥å»ºç«‹åˆ†æåŸå‹ã€‚</li>
<li>
<strong>Dremel</strong><strong>çš„æ•°æ®æ¨¡å‹æ˜¯åµŒå¥—(nested)</strong><strong>çš„ã€‚</strong>äº’è”ç½‘æ•°æ®å¸¸å¸¸æ˜¯éå…³ç³»å‹çš„ã€‚Dremelè¿˜éœ€è¦æœ‰ä¸€ä¸ªçµæ´»çš„æ•°æ®æ¨¡å‹ï¼Œè¿™ä¸ªæ•°æ®æ¨¡å‹è‡³å…³é‡è¦ã€‚Dremelæ”¯æŒä¸€ä¸ªåµŒå¥—(nested)çš„æ•°æ®æ¨¡å‹ï¼Œç±»ä¼¼äºJsonã€‚è€Œä¼ ç»Ÿçš„å…³ç³»æ¨¡å‹ï¼Œç”±äºä¸å¯é¿å…çš„æœ‰å¤§é‡çš„Joinæ“ä½œï¼Œåœ¨å¤„ç†å¦‚æ­¤å¤§è§„æ¨¡çš„æ•°æ®çš„æ—¶å€™ï¼Œå¾€å¾€æ˜¯æœ‰å¿ƒæ— åŠ›çš„ã€‚</li>
<li>
<strong>Dremel</strong><strong>ä¸­çš„æ•°æ®æ˜¯ç”¨åˆ—å¼å­˜å‚¨çš„ã€‚</strong>ä½¿ç”¨åˆ—å¼å­˜å‚¨ï¼Œåˆ†æçš„æ—¶å€™ï¼Œå¯ä»¥åªæ‰«æéœ€è¦çš„é‚£éƒ¨åˆ†æ•°æ®çš„æ—¶å€™ï¼Œå‡å°‘CPUå’Œç£ç›˜çš„è®¿é—®é‡ã€‚åŒæ—¶åˆ—å¼å­˜å‚¨æ˜¯å‹ç¼©å‹å¥½çš„ï¼Œä½¿ç”¨å‹ç¼©ï¼Œå¯ä»¥ç»¼åˆCPUå’Œç£ç›˜ï¼Œå‘æŒ¥æœ€å¤§çš„æ•ˆèƒ½ã€‚å¯¹äºå…³ç³»å‹æ•°æ®ï¼Œå¦‚æœä½¿ç”¨åˆ—å¼å­˜å‚¨ï¼Œæˆ‘ä»¬éƒ½å¾ˆæœ‰ç»éªŒã€‚ä½†æ˜¯å¯¹äºåµŒå¥—(nested)çš„ç»“æ„ï¼ŒDremelä¹Ÿå¯ä»¥ç”¨åˆ—å­˜å‚¨ï¼Œéå¸¸å€¼å¾—æˆ‘ä»¬å­¦ä¹ ã€‚</li>
<li>
<strong>Dremel</strong><strong>ç»“åˆäº†Web</strong><strong>æœç´¢ </strong><strong>å’Œå¹¶è¡ŒDBMS</strong><strong>çš„æŠ€æœ¯ã€‚</strong>é¦–å…ˆï¼Œä»–å€Ÿé‰´äº†Webæœç´¢ä¸­çš„â€œæŸ¥è¯¢æ ‘â€çš„æ¦‚å¿µï¼Œå°†ä¸€ä¸ªç›¸å¯¹å·¨å¤§å¤æ‚çš„æŸ¥è¯¢ï¼Œåˆ†å‰²æˆè¾ƒå°è¾ƒç®€å•çš„æŸ¥è¯¢ã€‚å¤§äº‹åŒ–å°ï¼Œå°äº‹åŒ–äº†ï¼Œèƒ½å¹¶å‘çš„åœ¨å¤§é‡èŠ‚ç‚¹ä¸Šè·‘ã€‚å…¶æ¬¡ï¼Œå’Œå¹¶è¡ŒDBMSç±»ä¼¼ï¼ŒDremelå¯ä»¥æä¾›äº†ä¸€ä¸ªSQL-likeçš„æ¥å£ï¼Œå°±åƒHiveå’ŒPigé‚£æ ·ã€‚</li>
</ul>
<h4>Google Dremelåº”ç”¨åœºæ™¯</h4>
<p>è®¾æƒ³ä¸€ä¸ªä½¿ç”¨åœºæ™¯ã€‚æˆ‘ä»¬çš„ç¾å¥³æ•°æ®åˆ†æå¸ˆï¼Œå¥¹æœ‰ä¸€ä¸ªæ–°çš„æƒ³æ³•è¦éªŒè¯ã€‚è¦éªŒè¯å¥¹çš„æƒ³æ³•ï¼Œéœ€è¦åœ¨ä¸€ä¸ªä¸Šäº¿æ¡æ•°æ®ä¸Šé¢ï¼Œè·‘ä¸€ä¸ªæŸ¥è¯¢ï¼Œçœ‹çœ‹ç»“æœå’Œå¥¹çš„æƒ³æ³•æ˜¯ä¸æ˜¯ä¸€æ ·ï¼Œå¥¹å¯ä¸å¸Œæœ›ç­‰å¤ªé•¿æ—¶é—´ï¼Œæœ€å¥½å‡ ç§’é’Ÿç»“æœå°±å‡ºæ¥ã€‚å½“ç„¶å¥¹çš„æƒ³æ³•ä¸ä¸€å®šå®Œå–„ï¼Œè¿˜éœ€è¦ä¸æ–­è°ƒæ•´è¯­å¥ã€‚ç„¶åå¥¹éªŒè¯äº†æƒ³æ³•ï¼Œå‘ç°äº†æ•°æ®ä¸­çš„ä»·å€¼ã€‚æœ€åï¼Œå¥¹å¯ä»¥å°†è¿™ä¸ªè¯­å¥å®Œå–„æˆä¸€ä¸ªé•¿æœŸè¿è¡Œçš„ä»»åŠ¡ã€‚</p>
<p>å¯¹äºGoogle,æ•°æ®ä¸€å¼€å§‹æ˜¯æ”¾åœ¨GFSä¸Šçš„ã€‚å¯ä»¥é€šè¿‡MapReduceå°†æ•°æ®å¯¼å…¥åˆ°Dremelä¸­å»ï¼Œåœ¨è¿™äº›MapReduceä¸­è¿˜å¯ä»¥åšä¸€äº›å¤„ç†ã€‚ç„¶ååˆ†æå¸ˆä½¿ç”¨Dremelï¼Œè½»æ¾æ„‰æ‚¦çš„åˆ†ææ•°æ®ï¼Œå»ºç«‹æ¨¡å‹ã€‚æœ€åå¯ä»¥ç¼–åˆ¶æˆä¸€ä¸ªé•¿æœŸè¿è¡Œçš„MapReduceä»»åŠ¡ã€‚</p>
<p>è¿™ç§å¤„ç†æ–¹å¼ï¼Œè®©ç¬”è€…è”æƒ³åˆ°Greenplumçš„<a href="http://www.greenplum.com/products/chorus">Chorus</a>. Chorusä¹Ÿå¯ä»¥ä¸ºåˆ†æå¸ˆæä¾›å¿«é€Ÿçš„æ•°æ®æŸ¥è¯¢ï¼Œä¸è¿‡è§£å†³æ–¹æ¡ˆæ˜¯é€šè¿‡é¢„å¤„ç†ï¼Œå¯¼å…¥éƒ¨åˆ†æ•°æ®ï¼Œå‡å°‘æ•°æ®é›†çš„å¤§å°ã€‚ç”¨çš„æ˜¯ä¸‰åå…­è®¡ï¼Œèµ°ä¸ºä¸Šè®¡ï¼Œé¿å¼€çš„ç¬æ—¶åˆ†æå¤§æ•°æ®çš„éš¾é¢˜ã€‚Chorusæœ€è¿‘å³å°†å¼€æºï¼Œå¯ä»¥å…³æ³¨ä¸‹ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹ç‰¹åˆ«çš„å°±æ˜¯æŒ‰åˆ—å­˜å‚¨çš„åµŒå¥—æ•°æ®æ ¼å¼ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œåœ¨æŒ‰è®°å½•å­˜å‚¨çš„æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªè®°å½•çš„å¤šåˆ—æ˜¯è¿ç»­çš„å†™åœ¨ä¸€èµ·çš„ã€‚åœ¨æŒ‰åˆ—å­˜å‚¨ä¸­ï¼Œå¯ä»¥å°†æ•°æ®æŒ‰åˆ—åˆ†å¼€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ä»…ä»…æ‰«æA.B.Cè€Œä¸å»è¯»A.Eæˆ–è€…A.B.Cã€‚éš¾ç‚¹åœ¨äºï¼Œæˆ‘ä»¬å¦‚ä½•èƒ½åŒæ—¶é«˜æ•ˆåœ°æ‰«æè‹¥å¹²åˆ—ï¼Œå¹¶åšä¸€äº›åˆ†æã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27246" src="http://47.100.65.109/wp-content/uploads/2012/08/2012111251-300x148.jpeg" alt="" width="300" height="148" srcset="./../../wp-content/uploads/2012/08/2012111251-300x148.jpeg 300w, ./../../wp-content/uploads/2012/08/2012111251.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<h4>Google Dremelæ•°æ®æ¨¡å‹</h4>
<p>åœ¨Google, ç”¨Protocol Bufferå¸¸å¸¸ä½œä¸ºåºåˆ—åŒ–çš„æ–¹æ¡ˆã€‚å…¶æ•°æ®æ¨¡å‹å¯ä»¥ç”¨æ•°å­¦æ–¹æ³•ä¸¥æ ¼çš„è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<p>$$!t=dom |&lt;a_1:t[*|?],&#8230;,a_n:t[*|?]&gt;$$&lt;/a_1:t[*|?],&#8230;,a_n:t[*|?]&gt;</p>
<p>å…¶ä¸­tå¯ä»¥æ˜¯ä¸€ä¸ªåŸºæœ¬ç±»å‹æˆ–è€…ç»„åˆç±»å‹ã€‚å…¶ä¸­åŸºæœ¬ç±»å‹å¯ä»¥æ˜¯integer,floatå’Œstringã€‚ç»„åˆç±»å‹å¯ä»¥æ˜¯è‹¥å¹²ä¸ªåŸºæœ¬ç±»å‹æ‹¼å‡‘ã€‚æ˜Ÿå·(*)æŒ‡çš„æ˜¯ä»»ä½•ç±»å‹éƒ½å¯ä»¥é‡å¤ï¼Œå°±æ˜¯æ•°ç»„ä¸€æ ·ã€‚é—®å·(?)æŒ‡çš„æ˜¯ä»»æ„ç±»å‹éƒ½æ˜¯å¯ä»¥æ˜¯å¯é€‰çš„ã€‚ç®€å•æ¥è¯´ï¼Œé™¤äº†æ²¡æœ‰Mapå¤–ï¼Œå’Œä¸€ä¸ªJsonå‡ ä¹æ²¡æœ‰åŒºåˆ«ã€‚</p>
<p>ä¸‹å›¾æ˜¯ä¾‹å­ï¼ŒSchemaå®šä¹‰äº†ä¸€ä¸ªç»„åˆç±»å‹Document.æœ‰ä¸€ä¸ªå¿…é€‰åˆ—DocIdï¼Œå¯é€‰åˆ—Linksï¼Œè¿˜æœ‰ä¸€ä¸ªæ•°ç»„åˆ—Nameã€‚å¯ä»¥ç”¨Name.Language.Codeæ¥è¡¨ç¤ºCodeåˆ—ã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27247" src="http://47.100.65.109/wp-content/uploads/2012/08/2012111252-300x214.jpeg" alt="" width="300" height="214" srcset="./../../wp-content/uploads/2012/08/2012111252-300x214.jpeg 300w, ./../../wp-content/uploads/2012/08/2012111252.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>è¿™ç§æ•°æ®æ ¼å¼æ˜¯è¯­è¨€æ— å…³ï¼Œå¹³å°æ— å…³çš„ã€‚å¯ä»¥ä½¿ç”¨Javaæ¥å†™MRç¨‹åºæ¥ç”Ÿæˆè¿™ä¸ªæ ¼å¼ï¼Œç„¶åç”¨C++æ¥è¯»å–ã€‚åœ¨è¿™ç§åˆ—å¼å­˜å‚¨ä¸­ï¼Œèƒ½å¤Ÿå¿«é€Ÿé€šç”¨å¤„ç†ä¹Ÿæ˜¯éå¸¸çš„é‡è¦çš„ã€‚</p>
<p>ä¸Šå›¾ï¼Œæ˜¯ä¸€ä¸ªç¤ºä¾‹æ•°æ®çš„æŠ½è±¡çš„æ¨¡å‹ï¼›ä¸‹å›¾æ˜¯è¿™ä»½æ•°æ®åœ¨Dremelå®é™…çš„å­˜å‚¨çš„æ ¼å¼ã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27249" src="http://47.100.65.109/wp-content/uploads/2012/08/2012111253-300x201.jpeg" alt="" width="300" height="201" srcset="./../../wp-content/uploads/2012/08/2012111253-300x201.jpeg 300w, ./../../wp-content/uploads/2012/08/2012111253.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>å¦‚æœæ˜¯å…³ç³»å‹æ•°æ®ï¼Œè€Œä¸æ˜¯åµŒå¥—çš„ç»“æ„ã€‚å­˜å‚¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ¯ä¸€åˆ—çš„å€¼ç›´æ¥æ’åˆ—ä¸‹æ¥ï¼Œä¸ç”¨å¼•å…¥å…¶ä»–çš„æ¦‚å¿µï¼Œä¹Ÿä¸ä¼šä¸¢å¤±æ•°æ®ã€‚å¯¹äºåµŒå¥—çš„ç»“æ„ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸¤ä¸ªå˜é‡R (Repetition Level) ,D (Definition Level) æ‰èƒ½å­˜å‚¨å…¶å®Œæ•´çš„ä¿¡æ¯ã€‚</p>
<p><strong>Repetition Level</strong>æ˜¯è®°å½•è¯¥åˆ—çš„å€¼æ˜¯åœ¨å“ªä¸€ä¸ªçº§åˆ«ä¸Šé‡å¤çš„ã€‚ä¸¾ä¸ªä¾‹å­è¯´æ˜ï¼šå¯¹äºName.Language.Code? æˆ‘ä»¬ä¸€å…±æœ‰ä¸‰æ¡éNullçš„è®°å½•ã€‚</p>
<ol>
<li>ç¬¬ä¸€ä¸ªæ˜¯â€en-usâ€ï¼Œå‡ºç°åœ¨ç¬¬ä¸€ä¸ªNameçš„ç¬¬ä¸€ä¸ªLanuageçš„ç¬¬ä¸€ä¸ªCodeé‡Œé¢ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œè¿™ä¸‰ä¸ªå…ƒç´ æ˜¯æ²¡æœ‰é‡å¤è¿‡çš„ï¼Œéƒ½æ˜¯ç¬¬ä¸€ä¸ªã€‚æ‰€ä»¥å…¶Rä¸º0ã€‚</li>
<li>ç¬¬äºŒä¸ªæ˜¯â€enâ€ï¼Œå‡ºç°åœ¨ä¸‹ä¸€ä¸ªLanuageé‡Œé¢ã€‚ä¹Ÿå°±æ˜¯è¯´Lanagueæ˜¯é‡å¤çš„å…ƒç´ ã€‚Name.Language.Codeä¸­Lanagueæ’ç¬¬äºŒä¸ªï¼Œæ‰€ä»¥å…¶Rä¸º2.</li>
<li>ç¬¬ä¸‰ä¸ªæ˜¯â€en-gbâ€ï¼Œå‡ºç°åœ¨ä¸‹ä¸€ä¸ªNameä¸­ï¼ŒNameæ˜¯é‡å¤å…ƒç´ ï¼Œæ’ç¬¬ä¸€ä¸ªï¼Œæ‰€ä»¥å…¶Rä¸º1ã€‚</li>
</ol>
<p>æˆ‘ä»¬å¯ä»¥æƒ³è±¡ï¼Œå°†æ‰€æœ‰çš„æ²¡æœ‰å€¼çš„åˆ—ï¼Œè®¾å€¼ä¸ºNULLã€‚å¦‚æœæ˜¯æ•°ç»„åˆ—ï¼Œæˆ‘ä»¬ä¹Ÿæƒ³è±¡æœ‰ä¸€ä¸ªNULLå€¼ã€‚æœ‰äº†Repetition Levelï¼Œæˆ‘ä»¬å°±å¯ä»¥å¾ˆå¥½çš„ç”¨åˆ—è¡¨ç¤ºåµŒå¥—çš„ç»“æ„äº†ã€‚ä½†æ˜¯è¿˜æœ‰ä¸€ç‚¹ä¸è¶³ã€‚å°±æ˜¯è¿˜éœ€è¦è¡¨ç¤ºä¸€ä¸ªæ•°ç»„æ˜¯ä¸æ˜¯æˆ‘ä»¬æƒ³è±¡å‡ºæ¥çš„ã€‚</p>
<p><strong>Definition Level</strong> æ˜¯å®šä¹‰çš„æ·±åº¦ï¼Œç”¨æ¥è®°å½•è¯¥åˆ—æ˜¯å¦æ˜¯â€æƒ³è±¡â€å‡ºæ¥çš„ã€‚æ‰€ä»¥å¯¹äºéNULLçš„è®°å½•ï¼Œæ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œå…¶å€¼å¿…ç„¶ä¸ºç›¸åŒã€‚åŒæ ·ä¸¾ä¸ªä¾‹å­ã€‚ä¾‹å¦‚Name.Language.Country,</p>
<ul>
<li>ç¬¬ä¸€ä¸ªâ€usâ€æ˜¯åœ¨R1é‡Œé¢ï¼Œå…¶ä¸­Name,Language,Countryæ˜¯æœ‰å®šä¹‰çš„ã€‚æ‰€ä»¥Dä¸º3ã€‚</li>
<li>ç¬¬äºŒä¸ªâ€NULLâ€ä¹Ÿæ˜¯åœ¨R1çš„é‡Œé¢ï¼Œå…¶ä¸­Name,Languageæ˜¯æœ‰å®šä¹‰çš„,å…¶ä»–æ˜¯æƒ³è±¡çš„ã€‚æ‰€ä»¥Dä¸º2ã€‚</li>
<li>ç¬¬ä¸‰ä¸ªâ€NULLâ€è¿˜æ˜¯åœ¨R1çš„é‡Œé¢ï¼Œå…¶ä¸­Nameæ˜¯æœ‰å®šä¹‰çš„,å…¶ä»–æ˜¯æƒ³è±¡çš„ã€‚æ‰€ä»¥Dä¸º1ã€‚</li>
<li>ç¬¬å››ä¸ªâ€gbâ€æ˜¯åœ¨R1é‡Œé¢ï¼Œå…¶ä¸­Name,Language,Countryæ˜¯æœ‰å®šä¹‰çš„ã€‚æ‰€ä»¥Dä¸º3ã€‚</li>
</ul>
<p>å°±æ˜¯è¿™æ ·ï¼Œå¦‚æœè·¯å¾„ä¸­æœ‰requiredï¼Œå¯ä»¥å°†å…¶å‡å»ï¼Œå› ä¸ºrequiredå¿…ç„¶ä¼šdefineï¼Œè®°å½•å…¶æ•°é‡æ²¡æœ‰æ„ä¹‰ã€‚</p>
<p>ç†è§£äº†å¦‚ä½•å­˜å‚¨è¿™ç§åµŒå¥—ç»“æ„ã€‚å†™æ²¡æœ‰éš¾åº¦ã€‚è¯»çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªè¯»å…¶ä¸­éƒ¨åˆ†å­—æ®µï¼Œæ¥æ„å»ºéƒ¨åˆ†çš„æ•°æ®æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œåªè¯»å–DocIDå’ŒName.Language.Countryã€‚æˆ‘ä»¬å¯ä»¥åŒæ—¶æ‰«æä¸¤ä¸ªå­—æ®µï¼Œå…ˆæ‰«æDocIDã€‚è®°å½•ä¸‹ç¬¬ä¸€ä¸ªï¼Œç„¶åå‘ç°ä¸‹ä¸€ä¸ªDocIDçš„Ræ˜¯0ï¼›äºæ˜¯è¯¥è¯»Name.Language.Countryï¼Œå¦‚æœä¸‹ä¸€ä¸ªRæ˜¯1æˆ–è€…2å°±ç»§ç»­è¯»ï¼Œå¦‚æœæ˜¯0å°±å¼€å§‹è¯»ä¸‹ä¸€ä¸ªDocIDã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27250" src="http://47.100.65.109/wp-content/uploads/2012/08/2012111254-300x133.jpeg" alt="" width="300" height="133" srcset="./../../wp-content/uploads/2012/08/2012111254-300x133.jpeg 300w, ./../../wp-content/uploads/2012/08/2012111254.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªæ›´ä¸ºå¤æ‚çš„è¯»å–çš„çŠ¶æ€æœºç¤ºä¾‹ã€‚åœ¨è¯»å–è¿‡ç¨‹ä¸­ä½¿ç”¨äº†Definition Levelæ¥å¿«é€ŸJump,æå‡æ€§èƒ½ã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27251" src="http://47.100.65.109/wp-content/uploads/2012/08/2012111255-300x180.jpeg" alt="" width="300" height="180" srcset="./../../wp-content/uploads/2012/08/2012111255-300x180.jpeg 300w, ./../../wp-content/uploads/2012/08/2012111255.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>åˆ°æ­¤ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“äº†Dremelçš„æ•°æ®ç»“æ„ã€‚å°±åƒå…¶ä»–æ•°æ®åˆ†æç³»ç»Ÿä¸€æ ·ï¼Œæ•°æ®ç»“æ„ç¡®å®šä¸‹æ¥ï¼ŒåŠŸèƒ½å°±å†³å®šäº†ä¸€å¤§åŠã€‚å¯¹äºDremelçš„æ•°æ®æŸ¥è¯¢ï¼Œå¿…ç„¶æ˜¯â€œå…¨è¡¨æ‰«æâ€ï¼Œä½†ç”±äºå…¶å·§å¦™çš„åˆ—å­˜å‚¨è®¾è®¡ï¼Œè‰¯å¥½çš„æ•°æ®æ¨¡å‹è®¾è®¡å¯ä»¥å›é¿æ‰å¤§éƒ¨åˆ†Joinéœ€æ±‚å’Œæ‰«ææœ€å°‘çš„åˆ—ã€‚</p>
<h4>Google DremelæŸ¥è¯¢æ–¹å¼</h4>
<p>Dremelå¯ä»¥ä½¿ç”¨ä¸€ç§SQL-likeçš„è¯­æ³•æŸ¥è¯¢åµŒå¥—æ•°æ®ã€‚ç”±äºDremelçš„æ•°æ®æ˜¯åªè¯»çš„ï¼Œå¹¶ä¸”ä¼šå¯†é›†çš„å‘èµ·å¤šæ¬¡ç±»ä¼¼çš„è¯·æ±‚ã€‚æ‰€ä»¥å¯ä»¥ä¿ç•™ä¸Šæ¬¡è¯·æ±‚çš„ä¿¡æ¯ï¼Œè¿˜ä¼˜åŒ–ä¸‹æ¬¡è¯·æ±‚çš„explainè¿‡ç¨‹ã€‚é‚£åˆæ˜¯å¦‚ä½•explainçš„å‘¢ï¼Ÿ</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27252" src="http://47.100.65.109/wp-content/uploads/2012/08/2012111256-300x191.jpeg" alt="" width="300" height="191" srcset="./../../wp-content/uploads/2012/08/2012111256-300x191.jpeg 300w, ./../../wp-content/uploads/2012/08/2012111256.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>è¿™æ˜¯ä¸€ä¸ªæ ‘çŠ¶æ¶æ„ã€‚å½“Clientå‘å…¶ä¸€ä¸ªè¯·æ±‚ï¼Œæ ¹èŠ‚ç‚¹å—åˆ°è¯·æ±‚ï¼Œæ ¹æ®metadataï¼Œå°†å…¶åˆ†è§£åˆ°æå¶ï¼Œç›´åˆ°åˆ°ä½äºæ•°æ®ä¸Šé¢çš„å¶å­Serverã€‚ä»–ä»¬æ‰«æå¤„ç†æ•°æ®ï¼Œåˆä¸æ–­æ±‡æ€»åˆ°æ ¹èŠ‚ç‚¹ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šå¯¹äºè¯·æ±‚ï¼š</p>
<pre>SELECT A, COUNT(B) FROM T GROUP BY A</pre>
<p>æ ¹èŠ‚ç‚¹æ”¶åˆ°è¯·æ±‚ï¼Œä¼šæ ¹æ®æ•°æ®çš„åˆ†åŒºè¯·æ±‚ï¼Œå°†è¯·æ±‚å˜æˆå¯ä»¥æ‹†åˆ†çš„æ ·å­ã€‚åŸæ¥çš„è¯·æ±‚ä¼šå˜ä¸ºã€‚</p>
<pre>SELECT A, SUM(c) FROM (R1 UNION ALL ... Rn) GROUP BY A</pre>
<p>R1,â€¦RNæ˜¯Tçš„åˆ†åŒºè®¡ç®—å‡ºçš„ç»“æœé›†ã€‚è¶Šå¤§çš„è¡¨æœ‰è¶Šå¤šçš„åˆ†åŒºï¼Œè¶Šå¤šçš„åˆ†åŒºå¯ä»¥è¶Šå¥½çš„æ”¯æŒå¹¶å‘ã€‚</p>
<p>ç„¶åå†å°†è¯·æ±‚åˆ‡åˆ†ï¼Œå‘é€åˆ°æ¯ä¸ªåˆ†åŒºçš„å¶å­Serverä¸Šé¢å»,å¯¹äºæ¯ä¸ªServer</p>
<pre>?Ri = SELECT A, COUNT(B) AS c FROM Ti GROUP BY A</pre>
<p>ç»“æ„é›†ä¸€å®šä¼šæ¯”åŸå§‹æ•°æ®å°å¾ˆå¤šï¼Œå¤„ç†èµ·æ¥ä¹Ÿæ›´å¿«ã€‚æ ¹æœåŠ¡å™¨å¯ä»¥å¾ˆå¿«çš„å°†æ•°æ®æ±‡æ€»ã€‚å…·ä½“çš„èšåˆæ–¹å¼ï¼Œå¯ä»¥ä½¿ç”¨ç°æœ‰çš„å¹¶è¡Œæ•°æ®åº“æŠ€æœ¯ã€‚</p>
<p>Dremelæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·çš„ç³»ç»Ÿã€‚åˆ‡å‰²åˆ†é…ä»»åŠ¡çš„æ—¶å€™ï¼Œè¿˜éœ€è¦è€ƒè™‘ç”¨æˆ·ä¼˜å…ˆçº§å’Œè´Ÿè½½å‡è¡¡ã€‚å¯¹äºå¤§å‹ç³»ç»Ÿï¼Œè¿˜éœ€è¦è€ƒè™‘å®¹é”™ï¼Œå¦‚æœä¸€ä¸ªå¶å­Serverå‡ºç°æ•…éšœæˆ–å˜æ…¢ï¼Œä¸èƒ½è®©æ•´ä¸ªæŸ¥è¯¢ä¹Ÿå—åˆ°æ˜æ˜¾å½±å“ã€‚</p>
<p>é€šå¸¸æƒ…å†µä¸‹ï¼Œæ¯ä¸ªè®¡ç®—èŠ‚ç‚¹ï¼Œæ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ä¾‹å¦‚ï¼ŒæŠ€å·§ä¸­æœ‰3000ä¸ªå¶å­Serverï¼Œæ¯ä¸ªServerä½¿ç”¨8ä¸ªçº¿ç¨‹ï¼Œæœ‰å¯ä»¥æœ‰24000ä¸ªè®¡ç®—å•å…ƒã€‚å¦‚æœä¸€å¼ è¡¨å¯ä»¥åˆ’åˆ†ä¸º100000ä¸ªåŒºï¼Œå°±æ„å‘³ç€å¤§çº¦æ¯ä¸ªè®¡ç®—å•å…ƒéœ€è¦è®¡ç®—5ä¸ªåŒºã€‚è¿™æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸€ä¸ªè®¡ç®—å•å…ƒå¤ªå¿™ï¼Œå°±ä¼šå¦å¤–å¯ä¸€ä¸ªæ¥è®¡ç®—ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯åŠ¨æ€åˆ†é…çš„ã€‚</p>
<p>å¯¹äºGFSè¿™æ ·çš„å­˜å‚¨ï¼Œä¸€ä»½æ•°æ®ä¸€èˆ¬æœ‰3ä»½æ‹·è´ï¼Œè®¡ç®—å•å…ƒå¾ˆå®¹æ˜“å°±èƒ½åˆ†é…åˆ°æ•°æ®æ‰€åœ¨çš„èŠ‚ç‚¹ä¸Šï¼Œå…¸å‹çš„æƒ…å†µå¯ä»¥åˆ°è¾¾95%çš„å‘½ä¸­ç‡ã€‚</p>
<p>Dremelè¿˜æœ‰ä¸€ä¸ªé…ç½®ï¼Œå°±æ˜¯åœ¨æ‰§è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šæ‰«æéƒ¨åˆ†åˆ†åŒºï¼Œæ¯”å¦‚å¯ä»¥æ‰«æ30%çš„åˆ†åŒºï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œç›¸å½“äºéšæœºæŠ½æ ·ï¼ŒåŠ å¿«æŸ¥è¯¢ã€‚</p>
<h3>Google Dremelæµ‹è¯•å®éªŒ</h3>
<p>å®éªŒçš„æ•°æ®æºå¦‚ä¸‹è¡¨ç¤ºã€‚å¤§éƒ¨åˆ†æ•°æ®å¤åˆ¶äº†3æ¬¡ï¼Œä¹Ÿæœ‰ä¸€ä¸ªä¸¤æ¬¡ã€‚æ¯ä¸ªè¡¨ä¼šæœ‰è‹¥å¹²åˆ†åŒºï¼Œæ¯ä¸ªåˆ†åŒºçš„å¤§å°åœ¨100Kåˆ°800Kä¹‹é—´ã€‚å¦‚æœå‹ç¼©ç‡æ˜¯25%ï¼Œå¹¶ä¸”è®¡å…¥å¤åˆ¶3ä»½çš„äº‹å®çš„è¯ã€‚T1çš„å¤§å°å·²ç»è¾¾åˆ°PBçº§åˆ«ã€‚è¿™ä¹ˆå°ä¸”å·¨é‡çš„åˆ†åŒºï¼Œå¯¹äºGFSçš„è¦æ±‚å¾ˆé«˜ï¼Œç°åœ¨çš„Hdfsç¨³å®šç‰ˆææ€•å—ä¸äº†ã€‚æ¥ä¸‹æ¥çš„æµ‹è¯•ä¼šé€æ­¥æ­ç¤ºå…¶æ˜¯å¦‚ä½•è¶…è¿‡MRï¼Œå¹¶å¯¹æ€§èƒ½ä½œå‡ºåˆ†æã€‚</p>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="106"><strong>è¡¨å</strong></td>
<td valign="top" width="106"><strong>è®°å½•æ•°</strong></td>
<td valign="top" width="106">
<strong>å¤§å°(</strong><strong>å·²å‹ç¼©)</strong>
</td>
<td valign="top" width="106"><strong>åˆ—æ•°</strong></td>
<td valign="top" width="106"><strong>æ•°æ®ä¸­å¿ƒ</strong></td>
<td valign="top" width="106"><strong>å¤åˆ¶æ•°é‡</strong></td>
</tr>
<tr>
<td valign="top" width="106">T1</td>
<td valign="top" width="106">85 billion</td>
<td valign="top" width="106">87 TB</td>
<td valign="top" width="106">270</td>
<td valign="top" width="106">A</td>
<td valign="top" width="106">3Ã—</td>
</tr>
<tr>
<td valign="top" width="106">T2</td>
<td valign="top" width="106">24 billion</td>
<td valign="top" width="106">13 TB</td>
<td valign="top" width="106">530</td>
<td valign="top" width="106">A</td>
<td valign="top" width="106">3Ã—</td>
</tr>
<tr>
<td valign="top" width="106">T3</td>
<td valign="top" width="106">4 billion</td>
<td valign="top" width="106">70 TB</td>
<td valign="top" width="106">1200</td>
<td valign="top" width="106">A</td>
<td valign="top" width="106">3Ã—</td>
</tr>
<tr>
<td valign="top" width="106">T4</td>
<td valign="top" width="106">1+ trillion</td>
<td valign="top" width="106">105 TB</td>
<td valign="top" width="106">50</td>
<td valign="top" width="106">B</td>
<td valign="top" width="106">2Ã—</td>
</tr>
<tr>
<td valign="top" width="106">T5</td>
<td valign="top" width="106">1+ trillion</td>
<td valign="top" width="106">20 TB</td>
<td valign="top" width="106">30</td>
<td valign="top" width="106">B</td>
<td valign="top" width="106">3Ã—</td>
</tr>
</tbody>
</table>
<h4>åˆ—å­˜æµ‹è¯•</h4>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æµ‹è¯•çœ‹çœ‹åˆ—å­˜çš„æ•ˆæœã€‚å¯¹äºT1è¡¨ï¼Œ1GBçš„æ•°æ®å¤§çº¦æœ‰300Kè¡Œï¼Œä½¿ç”¨åˆ—å­˜çš„è¯å‹ç¼©åå¤§çº¦åœ¨375MBã€‚è¿™å°æœºå™¨ç£ç›˜çš„åååœ¨70MB/så·¦å³ã€‚è¿™1GBçš„æ•°æ®ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ç°åœ¨çš„æµ‹è¯•æ•°æ®æºï¼Œæµ‹è¯•ç¯å¢ƒæ˜¯å•æœºã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27253" src="http://47.100.65.109/wp-content/uploads/2012/08/2012111257-300x194.jpeg" alt="" width="300" height="194" srcset="./../../wp-content/uploads/2012/08/2012111257-300x194.jpeg 300w, ./../../wp-content/uploads/2012/08/2012111257.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>è§ä¸Šå›¾ã€‚</p>
<ul>
<li>æ›²çº¿Aï¼Œæ˜¯ç”¨åˆ—å­˜è¯»å–æ•°æ®å¹¶è§£å‹çš„è€—æ—¶ã€‚</li>
<li>æ›²çº¿Bæ˜¯ä¸€æ¡ä¸€æ¡è®°å½•æŒ¨ä¸ªè¯»çš„æ—¶é—´ã€‚</li>
<li>æ›²çº¿Cæ˜¯åœ¨Bçš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Šäº†ååºåˆ—åŒ–çš„æ—¶é—´ã€‚</li>
<li>æ›²çº¿dï¼Œæ˜¯æŒ‰è¡Œå­˜è¯»å¹¶è§£å‹çš„è€—æ—¶ã€‚</li>
<li>æ›²çº¿eåŠ ä¸Šäº†ååºåˆ—åŒ–çš„æ—¶é—´ã€‚å› ä¸ºåˆ—å¾ˆå¤šï¼Œååºåˆ—åŒ–è€—æ—¶è¶…è¿‡äº†è¯»å¹¶è§£å‹çš„50%ã€‚</li>
</ul>
<p>ä»å›¾ä¸Šå¯ä»¥çœ‹å‡ºã€‚å¦‚æœéœ€è¦è¯»çš„åˆ—å¾ˆå°‘çš„è¯ï¼Œåˆ—å­˜çš„ä¼˜åŠ¿å°±ä¼šç‰¹åˆ«çš„æ˜æ˜¾ã€‚å¯¹äºåˆ—çš„å¢åŠ ï¼Œäº§ç”Ÿçš„è€—æ—¶ä¹Ÿå‡ ä¹æ˜¯çº¿æ€§çš„ã€‚è€Œä¸€æ¡ä¸€æ¡è¯¥ä¸ªè¯»å’Œååºåˆ—åŒ–çš„å¼€é”€æ˜¯å¾ˆå¤§çš„ï¼Œå‡ ä¹éƒ½åœ¨åŸæ¥åŸºç¡€ä¸Šå¢åŠ äº†ä¸€å€ã€‚è€ŒæŒ‰è¡Œè¯»ï¼Œåˆ—æ•°çš„å¢åŠ æ²¡æœ‰å½±å“ï¼Œå› ä¸ºä¸€æ¬¡æ€§è¯»äº†å…¨éƒ¨åˆ—ã€‚</p>
<h4>Dremelå’ŒMapReduceçš„å¯¹æ¯”æµ‹è¯•</h4>
<p>MRå’ŒDremelæœ€å¤§çš„åŒºåˆ«åœ¨äºè¡Œå­˜å’Œåˆ—å­˜ã€‚å¦‚æœä¸èƒ½å‡»è´¥MapReduceï¼ŒRemelå°±æ²¡æœ‰æ„ä¹‰äº†ã€‚ä½¿ç”¨æœ€å¸¸è§çš„WordCountæµ‹è¯•ï¼Œè®¡ç®—è¿™ä¸ªæ•°æ®ä¸­Wordçš„ä¸ªæ•°ã€‚</p>
<pre>Q1: SELECT SUM(CountWords(txtField)) / COUNT(*) FROM T1</pre>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27254" src="http://47.100.65.109/wp-content/uploads/2012/08/2012111258-300x136.jpeg" alt="" width="300" height="136" srcset="./../../wp-content/uploads/2012/08/2012111258-300x136.jpeg 300w, ./../../wp-content/uploads/2012/08/2012111258.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>ä¸Šå›¾æ˜¯æµ‹è¯•çš„ç»“æœã€‚ä½¿ç”¨äº†ä¸¤ä¸ªMRä»»åŠ¡ã€‚è¿™ä¸¤ä¸ªä»»åŠ¡å’ŒDremelä¸€æ ·éƒ½è¿è¡Œåœ¨3000ä¸ªèŠ‚ç‚¹ä¸Šé¢ã€‚å¦‚æœä½¿ç”¨åˆ—å­˜ï¼ŒDremelçš„æŒ‰åˆ—è¯»çš„MRåªéœ€è¦è¯»0.5TBçš„æ•°æ®ï¼Œè€ŒæŒ‰è¡Œå­˜éœ€è¦è¯»87TBã€‚ MRæä¾›äº†ä¸€ä¸ªæ–¹ä¾¿æœ‰æ•ˆçš„é€”ç»æ¥è®²æŒ‰è¡Œæ•°æ®è½¬æ¢æˆæŒ‰åˆ—çš„æ•°æ®ã€‚Dremelå¯ä»¥æ–¹ä¾¿çš„å¯¼å…¥MapReduceçš„å¤„ç†ç»“æœã€‚</p>
<h4>æ ‘çŠ¶è®¡ç®—Serveræµ‹è¯•</h4>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è¦å¯¹æ¯”åœ¨T2è¡¨ç¤ºä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„Group BYæŸ¥è¯¢ã€‚T2è¡¨æœ‰24 billion è¡Œçš„è®°å½•ã€‚æ¯ä¸ªè®°å½•æœ‰ä¸€ä¸ª itemåˆ—è¡¨ï¼Œæ¯ä¸€itemæœ‰ä¸€ä¸ªamount å­—æ®µã€‚æ€»å…±æœ‰40 billionä¸ªitem.amountã€‚è¿™ä¸¤ä¸ªQueryåˆ†åˆ«æ˜¯ã€‚</p>
<pre>Q2: SELECT country, SUM(item.amount) FROM T2 GROUP BY country

Q3: SELECT domain, SUM(item.amount) FROM T2 WHERE domain CONTAINS â€™.netâ€™ GROUP BY domain</pre>
<p>Q2éœ€è¦æ‰«æ60GBçš„å‹ç¼©æ•°æ®ï¼ŒQ3éœ€è¦æ‰«æ180GBï¼ŒåŒæ—¶è¿˜è¦è¿‡æ»¤ä¸€ä¸ªæ¡ä»¶ã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27257" src="http://47.100.65.109/wp-content/uploads/2012/08/2012111259-300x131.jpeg" alt="" width="300" height="131" srcset="./../../wp-content/uploads/2012/08/2012111259-300x131.jpeg 300w, ./../../wp-content/uploads/2012/08/2012111259.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>ä¸Šå›¾æ˜¯è¿™ä¸¤ä¸ªQueryåœ¨ä¸åŒçš„serveræ‹“æ‰‘ä¸‹çš„æ€§èƒ½ã€‚æ¯ä¸ªæµ‹è¯•éƒ½æ˜¯æœ‰2900ä¸ªå¶å­Serverã€‚åœ¨2çº§æ‹“æ‰‘ä¸­ï¼Œæ ¹serverç›´æ¥å’Œå¶å­Serveré€šä¿¡ã€‚åœ¨3çº§æ‹“æ‰‘ä¸­ï¼Œå„ä¸ªçº§åˆ«çš„æ¯”ä¾‹æ˜¯1:100:2900ï¼Œå¢åŠ äº†100ä¸ªä¸­é—´Serverã€‚åœ¨4çº§æ‹“æ‰‘ä¸­ï¼Œæ¯”ä¾‹ä¸º1:10:100:2900.</p>
<p>Q2å¯ä»¥åœ¨3çº§æ‹“æ‰‘ä¸‹3ç§’å†…æ‰§è¡Œå®Œæ¯•ï¼Œä½†æ˜¯ä¸ºä»–æä¾›æ›´é«˜çš„æ‹“æ‰‘çº§åˆ«ï¼Œå¯¹æ€§èƒ½æå‡æ²¡æœ‰è£¨ç›Šã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œä¸ºQ3æä¾›æ›´é«˜çš„æ‹“æ‰‘çº§åˆ«ï¼Œæ€§èƒ½å¯ä»¥æœ‰æ•ˆæå‡ã€‚è¿™ä¸ªæµ‹è¯•ä½“ç°äº†æ ‘çŠ¶æ‹“æ‰‘å¯¹æ€§èƒ½æå‡çš„ä½œç”¨ã€‚</p>
<h4>æ¯ä¸ªåˆ†åŒºçš„æ‰§è¡Œæƒ…å†µ</h4>
<p>å¯¹äºåˆšåˆšçš„ä¸¤ä¸ªæŸ¥è¯¢ï¼Œå…·ä½“çš„æ¯ä¸ªåˆ†åŒºçš„æ‰§è¡Œæƒ…å†µæ˜¯è¿™æ ·çš„ã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27258" src="http://47.100.65.109/wp-content/uploads/2012/08/20121112510-300x143.jpeg" alt="" width="300" height="143" srcset="./../../wp-content/uploads/2012/08/20121112510-300x143.jpeg 300w, ./../../wp-content/uploads/2012/08/20121112510.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>å¯ä»¥çœ‹åˆ°99%çš„åˆ†åŒºéƒ½åœ¨1så†…å®Œæˆäº†ã€‚Dremelä¼šè‡ªåŠ¨è°ƒåº¦ï¼Œä½¿ç”¨æ–°çš„Serverè®¡ç®—æ‹–åè…¿çš„ä»»åŠ¡ã€‚</p>
<h4>è®°å½•å†…èšåˆ</h4>
<p>ç”±äºDemelæ”¯æŒListçš„æ•°æ®ç±»å‹ï¼Œæœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ¯ä¸ªè®°å½•é‡Œé¢çš„å„ä¸ªListçš„èšåˆã€‚å¦‚</p>
<pre>Q4 : SELECT COUNT(c1 &gt; c2) FROM

(SELECT SUM(a.b.c.d) WITHIN RECORD AS c1,

SUM(a.b.p.q.r) WITHIN RECORD AS c2

FROM T3)</pre>
<p>æˆ‘ä»¬éœ€è¦countæ‰€æœ‰sum(a.b.c.d)æ¯”sum(a.b.p.q.r)ï¼Œæ‰§è¡Œè¿™æ¡è¯­å¥å®é™…åªéœ€è¦æ‰«æ13GBçš„æ•°æ®ï¼Œè€—æ—¶15sï¼Œè€Œæ•´å¼ è¡¨æœ‰70TBã€‚å¦‚æœæ²¡æœ‰è¿™æ ·çš„åµŒå¥—æ•°æ®ç»“æ„ï¼Œè¿™æ ·çš„æŸ¥è¯¢ä¼šå¾ˆå¤æ‚ã€‚</p>
<h4>æ‰©å±•æ€§æµ‹è¯•</h4>
<p>Dremelæœ‰è‰¯å¥½çš„æ‰©å±•æ€§ï¼Œå¯ä»¥é€šè¿‡å¢åŠ æœºå™¨æ¥ç¼©çŸ­æŸ¥è¯¢çš„æ—¶é—´ã€‚å¹¶ä¸”å¯ä»¥å¤„ç†æ•°ä»¥ä¸‡äº¿è®¡çš„è®°å½•ã€‚</p>
<p>å¯¹äºæŸ¥è¯¢ï¼š</p>
<pre>Q5: SELECT TOP(aid, 20), COUNT(*) FROM T4?WHERE bid = fvalue1g AND cid = fvalue2g</pre>
<p>ä½¿ç”¨ä¸åŒçš„å¶å­Serveræ•°ç›®æ¥è¿›è¡Œæµ‹è¯•ã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27260" src="http://47.100.65.109/wp-content/uploads/2012/08/20121112511-300x124.jpeg" alt="" width="300" height="124" srcset="./../../wp-content/uploads/2012/08/20121112511-300x124.jpeg 300w, ./../../wp-content/uploads/2012/08/20121112511.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>å¯ä»¥å‘ç°CPUçš„è€—æ—¶æ€»æ•°æ˜¯åŸºæœ¬ä¸å˜çš„ï¼Œåœ¨30ä¸‡ç§’å·¦å³ã€‚ä½†æ˜¯éšç€èŠ‚ç‚¹æ•°çš„å¢åŠ ï¼Œæ‰§è¡Œæ—¶é—´ä¹Ÿä¼šç›¸åº”ç¼©çŸ­ã€‚å‡ ä¹å‘ˆçº¿æ€§é€’å‡ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨é€šè¿‡CPUæ—¶é—´è®¡è´¹çš„â€œäº‘è®¡ç®—â€æœºå™¨ï¼Œæ¯ä¸ªç§Ÿæˆ·çš„æŸ¥è¯¢éƒ½å¯ä»¥å¾ˆå¿«ï¼Œæˆæœ¬ä¹Ÿä¼šéå¸¸ä½å»‰ã€‚</p>
<h3>å®¹é”™æµ‹è¯•</h3>
<p>ä¸€ä¸ªå¤§å›¢é˜Ÿé‡Œé¢ï¼Œæ€»æœ‰å‡ ä¸ªæ‹–æ²¹ç“¶ã€‚å¯¹äºæœ‰ä¸‡äº¿æ¡è®°å½•çš„T5ï¼Œæˆ‘ä»¬æ‰§è¡Œä¸‹é¢çš„è¯­å¥ã€‚</p>
<pre>Q6: SELECT COUNT(DISTINCT a) FROM T5</pre>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯T5çš„æ•°æ®åªæœ‰ä¸¤ä»½æ‹·è´ï¼Œæ‰€ä»¥æœ‰æ›´é«˜çš„æ¦‚ç‡å‡ºç°åèŠ‚ç‚¹å’Œæ‹–æ²¹ç“¶ã€‚è¿™ä¸ªæŸ¥è¯¢éœ€è¦æ‰«æå¤§çº¦1TBçš„å‹ç¼©æ•°æ®ï¼Œä½¿ç”¨2500ä¸ªèŠ‚ç‚¹ã€‚</p>
<p><img loading="lazy" decoding="async" class="alignnone size-medium wp-image-27261" src="http://47.100.65.109/wp-content/uploads/2012/08/20121112512-300x155.jpeg" alt="" width="300" height="155" srcset="./../../wp-content/uploads/2012/08/20121112512-300x155.jpeg 300w, ./../../wp-content/uploads/2012/08/20121112512.jpeg 500w" sizes="(max-width: 300px) 100vw, 300px"></p>
<p>å¯ä»¥çœ‹åˆ°99%çš„åˆ†åŒºéƒ½åœ¨5Så†…å®Œæˆçš„ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæœ‰ä¸€äº›åˆ†åŒºéœ€è¦è¾ƒé•¿çš„æ—¶é—´æ¥å¤„ç†ã€‚å°½ç®¡é€šè¿‡åŠ¨æ€è°ƒåº¦å¯ä»¥åŠ å¿«ä¸€äº›ï¼Œä½†åœ¨å¦‚æ­¤å¤§è§„æ¨¡çš„è®¡ç®—ä¸Šé¢ï¼Œå¾ˆéš¾å®Œå…¨ä¸å‡ºé—®é¢˜ã€‚å¦‚æœä¸åœ¨æ„å¤ªç²¾ç¡®çš„ç»“æœï¼Œå®Œå…¨å¯ä»¥å°å°å‡å°‘è¦†ç›–çš„æ¯”ä¾‹ï¼Œå¤§å¤§æå‡ç›¸åº”é€Ÿåº¦ã€‚</p>
<h3>Google Dremel çš„å½±å“</h3>
<p>Google Dremelçš„èƒ½åœ¨å¦‚æ­¤çŸ­çš„æ—¶é—´å†…å¤„ç†è¿™ä¹ˆå¤§çš„æ•°æ®ï¼Œçš„ç¡®æ˜¯ååˆ†æƒŠè‰³çš„ã€‚æœ‰ä¸ªä¼¯å…‹åˆ©åˆ†æ ¡çš„æ•™æˆArmando Foxè¯´è¿‡ä¸€å¥è¯â€œå¦‚æœä½ æ›¾äº‹å…ˆå‘Šè¯‰æˆ‘Dremelå£°ç§°å…¶å°†å¯åšäº›ä»€ä¹ˆï¼Œé‚£ä¹ˆæˆ‘ä¸ä¼šç›¸ä¿¡ä½ èƒ½å¼€å‘å‡ºè¿™ç§å·¥å…·â€ã€‚è¿™ä¹ˆç»™åŠ›çš„æŠ€æœ¯ï¼Œå¿…ç„¶å¯¹ä¸šç•Œé€ æˆå·¨å¤§çš„å½±å“ã€‚ç¬¬ä¸€ä¸ªè¢«æ³¢åŠåˆ°çš„å¿…ç„¶æ˜¯Hadoopã€‚</p>
<h4>Dremelä¸Hadoop</h4>
<p>Dremelçš„å…¬å¼€è®ºæ–‡é‡Œé¢å·²ç»è¯´çš„å¾ˆæ˜ç™½ï¼ŒDremelä¸æ˜¯ç”¨æ¥æ›¿ä»£MapReduceï¼Œè€Œæ˜¯å’Œå…¶æ›´å¥½çš„ç»“åˆã€‚Hadoopçš„Hiveï¼ŒPigæ— æ³•æä¾›åŠæ—¶çš„æŸ¥è¯¢ï¼Œè€ŒDremelçš„å¿«é€ŸæŸ¥è¯¢æŠ€æœ¯å¯ä»¥ç»™Hadoopæä¾›æœ‰åŠ›çš„è¡¥å……ã€‚åŒæ—¶Dremelå¯ä»¥ç”¨æ¥åˆ†æMapReduceçš„ç»“æœé›†ï¼Œåªéœ€è¦å°†MapReduceçš„OutputFormatä¿®æ”¹ä¸ºDremelçš„æ ¼å¼ï¼Œå°±å¯ä»¥å‡ ä¹ä¸å¼•å…¥é¢å¤–å¼€é”€ï¼Œå°†æ•°æ®å¯¼å…¥Dremelã€‚ä½¿ç”¨Dremelæ¥å¼€å‘æ•°æ®åˆ†ææ¨¡å‹ï¼ŒMapReduceæ¥æ‰§è¡Œæ•°æ®åˆ†ææ¨¡å‹ã€‚</p>
<p>Hadoopçš„Hive,Pigç°åœ¨ä¹Ÿæœ‰äº†åˆ—å­˜çš„æ¨¡å¼ï¼Œæ¶æ„ä¸Šå’ŒDremelä¹Ÿæ¥è¿‘ã€‚ä½†æ˜¯æ— è®ºå­˜å‚¨ç»“æ„è¿˜æ˜¯è®¡ç®—æ–¹å¼éƒ½æ²¡æœ‰Dremelç²¾è‡´ã€‚å¯¹Hadoopå®æ—¶æ€§çš„æ”¹è¿›ä¹Ÿä¸€ç›´æ˜¯ä¸ªçƒ­ç‚¹è¯é¢˜ã€‚è¦æƒ³åœ¨Hadoopä¸­å±±å¯¨ä¸€ä¸ªDremelï¼Œå¹¶ä¸”ç›¸å¯¹ç°æœ‰è§£å†³æ–¹æ¡ˆæœ‰çªç ´ï¼Œç¬”è€…è§‰å¾—Hadoopè‡ªèº«éœ€è¦ä¸€äº›æ”¹è¿›ã€‚ä¸€ä¸ªæ˜¯HDFSéœ€è¦å¯¹å¹¶å‘ç»†ç¢çš„æ•°æ®è¯»æ€§èƒ½æœ‰å¤§çš„æ”¹è¿›ï¼ŒHDFSéœ€è¦æ›´åŠ çš„ä½å»¶è¿Ÿã€‚å†è€…æ˜¯Hadoopéœ€è¦ä¸ä»…ä»…æ”¯æŒMapReduceè¿™ä¸€ç§è®¡ç®—æ¡†æ¶ã€‚å…¶ä»–éƒ¨åˆ†,Hadoopéƒ½æœ‰å¯¹åº”çš„å¼€æºç»„ä»¶ï¼Œä¸‡äº‹ä¿±å¤‡åªæ¬ ä¸œé£ã€‚</p>
<h4>Dremelçš„å¼€æºå®ç°</h4>
<p>Dremelç°åœ¨è¿˜æ²¡æœ‰ä¸€ä¸ªå¯ä»¥è¿è¡Œçš„å¼€æºå®ç°ï¼Œä¸è¿‡æˆ‘ä»¬çœ‹åˆ°å¾ˆå¤šåŠªåŠ›ã€‚ä¸€ä¸ªæ˜¯Apacheçš„Drillï¼Œä¸€ä¸ªæ˜¯OpenDremel/Dazoã€‚</p>
<p><strong>OpenDremel/Dazo</strong></p>
<p>OpenDremelæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæœ€è¿‘æ”¹åä¸ºDazoã€‚å¯ä»¥åœ¨GoogleCodeä¸Šæ‰¾åˆ°<a href="http://code.google.com/p/dremel/">http://code.google.com/p/dremel/</a>ã€‚ç›®å‰è¿˜æ²¡æœ‰å‘å¸ƒã€‚ä½œè€…å£°ç§°ä»–å·²ç»å®Œæˆäº†ä¸€ä¸ªé€šç”¨æ‰§è¡Œå¼•æ“å’ŒOpenStack Swiftçš„é›†æˆã€‚ç¬”è€…æ„Ÿè§‰å…¶è¶Šèµ°è¶Šæ­ªï¼Œç¦»Dremelè¶Šæ¥è¶Šè¿œäº†ã€‚</p>
<p><strong>Apache Drill</strong></p>
<p><a href="http://wiki.apache.org/incubator/DrillProposal">Drill </a>æ˜¯Hadoopçš„èµåŠ©å•†ä¹‹ä¸€MapRå‘èµ·çš„ã€‚Drillä½œä¸ºä¸€ä¸ªDremelçš„å±±å¯¨é¡¹ç›®ï¼Œæœ‰å’ŒDremelç›¸ä¼¼çš„æ¶æ„å’Œèƒ½åŠ›ã€‚ä»–ä»¬å¸Œæœ›Drillæœ€ç»ˆä¼šæƒ³Hive,Pigä¸€æ ·æˆä¸ºHadoopä¸Šçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚ä¸ºHadoopæä¾›å¿«é€ŸæŸ¥è¯¢çš„èƒ½åŠ›ã€‚å’ŒDremelæœ‰ä¸€ç‚¹ä¸åŒï¼Œåœ¨æ•°æ®æ¨¡å‹ä¸Šï¼Œå¼€æºçš„é¡¹ç›®éœ€è¦æ”¯æŒæ›´æ ‡å‡†çš„æ•°æ®ç»“æ„ã€‚æ¯”å¦‚CSVå’ŒJSONã€‚åŒæ—¶Drillè¿˜æœ‰æ›´å¤§çš„çµæ´»æ€§ï¼Œæ”¯æŒå¤šé‡æŸ¥è¯¢è¯­è¨€ï¼Œå¤šç§æ¥å£ã€‚</p>
<p>ç°åœ¨Drillçš„ç›®æ ‡æ˜¯å®Œæˆåˆå§‹çš„éœ€æ±‚ï¼Œæ¶æ„ã€‚å®Œæˆä¸€ä¸ªåˆå§‹çš„å®ç°ã€‚è¿™ä¸ªå®ç°åŒ…æ‹¬ä¸€ä¸ªæ‰§è¡Œå¼•æ“å’ŒDrQLã€‚DrQLæ˜¯ä¸€ä¸ªåŸºäºåˆ—çš„æ ¼å¼ï¼Œç±»ä¼¼äºDremelã€‚ç›®å‰ï¼ŒDrillå·²ç»å®Œæˆçš„éœ€æ±‚å’Œæ¶æ„è®¾è®¡ã€‚æ€»å…±åˆ†ä¸ºäº†å››ä¸ªç»„ä»¶</p>
<ul>
<li>Query language:ç±»ä¼¼Google BigQueryçš„æŸ¥è¯¢è¯­è¨€ï¼Œæ”¯æŒåµŒå¥—æ¨¡å‹ï¼Œåä¸ºDrQL.</li>
<li>Low-lantency distribute execution engine:æ‰§è¡Œå¼•æ“ï¼Œå¯ä»¥æ”¯æŒå¤§è§„æ¨¡æ‰©å±•å’Œå®¹é”™ã€‚å¯ä»¥è¿è¡Œåœ¨ä¸Šä¸‡å°æœºå™¨ä¸Šè®¡ç®—æ•°ä»¥PBçš„æ•°æ®ã€‚</li>
<li>Nested data format:åµŒå¥—æ•°æ®æ¨¡å‹ï¼Œå’ŒDremelç±»ä¼¼ã€‚ä¹Ÿæ”¯æŒCSV,JSON,YAMLç±»ä¼¼çš„æ¨¡å‹ã€‚è¿™æ ·æ‰§è¡Œå¼•æ“å°±å¯ä»¥æ”¯æŒæ›´å¤šçš„æ•°æ®ç±»å‹ã€‚</li>
<li>Scalable data source: æ”¯æŒå¤šç§æ•°æ®æºï¼Œç°é˜¶æ®µä»¥Hadoopä¸ºæ•°æ®æºã€‚</li>
</ul>
<p>ç›®å‰è¿™å››ä¸ªç»„ä»¶åœ¨åˆ†åˆ«ç§¯æçš„æ¨è¿›ï¼ŒDrillä¹Ÿéå¸¸å¸Œæœ›æœ‰ç¤¾åŒºå…¶ä»–å…¬å¸æ¥åŠ å…¥ã€‚Drillå¸Œæœ›åŠ å…¥åˆ°Hadoopç”Ÿæ€ç³»ç»Ÿä¸­å»ã€‚</p>
<h3>æœ€åçš„è¯</h3>
<p>æœ¬æ–‡ä»‹ç»äº†Google Dremelçš„ä½¿ç”¨åœºæ™¯ï¼Œè®¾è®¡å®ç°ï¼Œæµ‹è¯•å®éªŒï¼Œå’Œå¯¹å¼€æºä¸–ç•Œçš„å½±å“ã€‚ç›¸ä¿¡ä¸ä¹…çš„å°†æ¥ï¼ŒDremelçš„æŠ€æœ¯ä¼šå¾—åˆ°å¹¿æ³›çš„åº”ç”¨ã€‚</p>
							</div>
<!-- .entry-content -->
		
	
	<footer class="entry-meta">
		
							<span class="cat-links">
				æ–‡ç« åˆ†ç±» <a href="./../../category/%e6%8a%80%e6%9c%af/index.html" rel="category tag">è½¯ä»¶æŠ€æœ¯</a>			</span>
				<span class="sep"> | </span>
			
							<span class="taglinks">
				æ ‡ç­¾ï¼š <a href="./../../tag/dremel/index.html" rel="tag">Dremel</a>, <a href="./../../tag/drill/index.html" rel="tag">Drill</a>, <a href="./../../tag/google-dremel/index.html" rel="tag">Google Dremel</a>, <a href="./../../tag/hadoop/index.html" rel="tag">Hadoop</a>			</span>
				<span class="sep"> | </span>
			
		
						<span class="comments-link"><a href="./../../google-dremel-rationale/index.html#comments">15 è¯„è®º</a></span>
				<span class="sep"> | </span>
			
		
	</footer>
	<!-- #entry-meta -->

</article><!-- #post-26452 -->

							
						
								<div class="more-content">
			<div class="row-fluid">
				<div class="span6 previous-post">
									</div>
				<div class="span6 next-post">
					<a href="./page/2/index.html">ä¸‹ä¸€é¡µ &raquo;</a>				</div>
			</div>
		</div>
	
					</div>
					<!-- #content -->

					
<div id="secondary" class="widget-area span3">

	
	<div id="sidebar">
		<aside id="search-2" class="widget-container widget_search"><form method="get" id="searchform" class="navbar-search pull-right" action="http://yankay.com/" role="search">
	<input type="text" class="search-query input-medium" name="s" placeholder="Search &hellip;">
</form>
<div class="clear"></div>
</aside>
		<aside id="recent-posts-2" class="widget-container widget_recent_entries">
		<h3 class="widget-title">è¿‘æœŸæ–‡ç« </h3>
		<ul>
											<li>
					<a href="./../../containerd-will-replace-docker/index.html">å¬è¯´ Docker è¢« kubenetes æŠ›å¼ƒäº†ï¼Œæ€ä¹ˆåŠï¼Ÿcontainerd</a>
									</li>
											<li>
					<a href="./../../%e5%85%ac%e5%91%8a-%e5%8d%9a%e5%ae%a2%e9%87%8d%e5%bc%80%e4%ba%86/index.html">å…¬å‘Š &#8211; åšå®¢é‡å¼€äº†</a>
									</li>
											<li>
					<a href="./../../cloudfoundry-v2-with-microcf/index.html">CloudFoundry v2é¢é¢è°ˆï¼Œå†…èµ MicroCFv2ç¦åˆ©</a>
									</li>
											<li>
					<a href="./../../docker-paas-for-any-application/index.html">Dockerèƒ½å¤Ÿè¿è¡Œä»»ä½•åº”ç”¨çš„â€œPaaSâ€äº‘</a>
									</li>
											<li>
					<a href="./../../scala-tour-choiceness/index.html">Scala Tour &#8211; ç²¾é€‰</a>
									</li>
					</ul>

		</aside><aside id="recent-comments-2" class="widget-container widget_recent_comments"><h3 class="widget-title">è¿‘æœŸè¯„è®º</h3>
<ul id="recentcomments">
<li class="recentcomments">
<span class="comment-author-link"><a href="https://www.ccppcoding.com/archives/63098.html" class="url" rel="ugc external nofollow">[æ•´ç†]å®Œç¾å“ˆå¸Œå‡½æ•°(Perfect Hash Function) - é«˜æ€§èƒ½æ¶æ„æ¢ç´¢</a></span>å‘è¡¨åœ¨ã€Š<a href="./../../introduction-to-opmphf/index.html#comment-3101">æœ€å°å®Œç¾å“ˆå¸Œå‡½æ•°ç®€ä»‹</a>ã€‹</li>
<li class="recentcomments">
<span class="comment-author-link"><a href="https://www.javatt.com/p/284115" class="url" rel="ugc external nofollow">Scala Tour â€“ ç²¾é€‰ - Javaå¤©å ‚</a></span>å‘è¡¨åœ¨ã€Š<a href="./../../scala-tour-choiceness/index.html#comment-2781">Scala Tour &#8211; ç²¾é€‰</a>ã€‹</li>
<li class="recentcomments">
<span class="comment-author-link"><a href="https://www.zhankr.net/46292.html" class="url" rel="ugc external nofollow">Golangé€‚åˆé«˜å¹¶å‘åœºæ™¯çš„åŸå› åˆ†æ - ç«™å£³ç½‘</a></span>å‘è¡¨åœ¨ã€Š<a href="./../../go-clear-concurreny/index.html#comment-2701">Go-ç®€æ´çš„å¹¶å‘</a>ã€‹</li>
<li class="recentcomments">
<span class="comment-author-link"><a href="https://code84.com/710435.html" class="url" rel="ugc external nofollow">HBase å®˜æ–¹æ–‡æ¡£ &#8211; æºç å·´å£«</a></span>å‘è¡¨åœ¨ã€Š<a href="./../../windows%e4%b8%8beclipse%e7%9a%84-c%e7%8e%af%e5%a2%83%e9%85%8d%e7%bd%ae/index.html#comment-2679">Windowsä¸‹eclipseçš„ C++ç¯å¢ƒé…ç½®</a>ã€‹</li>
<li class="recentcomments">
<span class="comment-author-link"><a href="https://www.ideaopen.cn/98230.html" class="url" rel="ugc external nofollow">Go-ç®€æ´çš„å¹¶å‘-ç‚¹å¼€</a></span>å‘è¡¨åœ¨ã€Š<a href="./../../go-clear-concurreny/index.html#comment-1255">Go-ç®€æ´çš„å¹¶å‘</a>ã€‹</li>
</ul></aside><aside id="archives-2" class="widget-container widget_archive"><h3 class="widget-title">å½’æ¡£</h3>
			<ul>
					<li><a href="./../../2021/06/index.html">2021å¹´6æœˆ</a></li>
	<li><a href="./../../2021/03/index.html">2021å¹´3æœˆ</a></li>
	<li><a href="./../../2014/02/index.html">2014å¹´2æœˆ</a></li>
	<li><a href="./../../2013/09/index.html">2013å¹´9æœˆ</a></li>
	<li><a href="./../../2013/05/index.html">2013å¹´5æœˆ</a></li>
	<li><a href="./../../2013/01/index.html">2013å¹´1æœˆ</a></li>
	<li><a href="./../../2012/11/index.html">2012å¹´11æœˆ</a></li>
	<li><a href="./../../2012/09/index.html">2012å¹´9æœˆ</a></li>
	<li><a href="./../../2012/08/index.html">2012å¹´8æœˆ</a></li>
	<li><a href="./../../2012/03/index.html">2012å¹´3æœˆ</a></li>
	<li><a href="./../../2012/02/index.html">2012å¹´2æœˆ</a></li>
	<li><a href="./../../2012/01/index.html">2012å¹´1æœˆ</a></li>
	<li><a href="./../../2011/11/index.html">2011å¹´11æœˆ</a></li>
	<li><a href="./../../2011/10/index.html">2011å¹´10æœˆ</a></li>
	<li><a href="./../../2011/09/index.html">2011å¹´9æœˆ</a></li>
	<li><a href="./../../2010/10/index.html">2010å¹´10æœˆ</a></li>
	<li><a href="./../../2010/08/index.html">2010å¹´8æœˆ</a></li>
	<li><a href="./../../2010/07/index.html">2010å¹´7æœˆ</a></li>
	<li><a href="./../../2010/06/index.html">2010å¹´6æœˆ</a></li>
	<li><a href="./../../2010/05/index.html">2010å¹´5æœˆ</a></li>
	<li><a href="./../../2010/04/index.html">2010å¹´4æœˆ</a></li>
	<li><a href="./../../2010/03/index.html">2010å¹´3æœˆ</a></li>
	<li><a href="./../../2010/02/index.html">2010å¹´2æœˆ</a></li>
	<li><a href="./../../2010/01/index.html">2010å¹´1æœˆ</a></li>
	<li><a href="./../../2009/10/index.html">2009å¹´10æœˆ</a></li>
	<li><a href="./../../2009/09/index.html">2009å¹´9æœˆ</a></li>
	<li><a href="./../../2009/08/index.html">2009å¹´8æœˆ</a></li>
	<li><a href="./../../2009/07/index.html">2009å¹´7æœˆ</a></li>
	<li><a href="./../../2009/06/index.html">2009å¹´6æœˆ</a></li>
	<li><a href="./../../2008/10/index.html">2008å¹´10æœˆ</a></li>
	<li><a href="./../../2008/08/index.html">2008å¹´8æœˆ</a></li>
	<li><a href="./../../2008/07/index.html">2008å¹´7æœˆ</a></li>
	<li><a href="./../../2008/06/index.html">2008å¹´6æœˆ</a></li>
			</ul>

			</aside><aside id="categories-2" class="widget-container widget_categories"><h3 class="widget-title">åˆ†ç±»ç›®å½•</h3>
			<ul>
					<li class="cat-item cat-item-3">
<a href="./../../category/%e5%ae%b6%e5%ba%ad%e7%94%9f%e6%b4%bb/index.html">å®¶åº­ç”Ÿæ´»</a>
</li>
	<li class="cat-item cat-item-1">
<a href="./../../category/uncategorized/index.html">æœªåˆ†ç±»</a>
</li>
	<li class="cat-item cat-item-7">
<a href="./../../category/%e6%8a%80%e6%9c%af/%e6%af%8f%e6%97%a5%e5%bf%83%e5%be%97/index.html">æ¯æ—¥å¿ƒå¾—</a>
</li>
	<li class="cat-item cat-item-5">
<a href="./../../category/%e6%8a%80%e6%9c%af/index.html">è½¯ä»¶æŠ€æœ¯</a>
</li>
			</ul>

			</aside><aside id="nav_menu-3" class="widget-container widget_nav_menu"><h3 class="widget-title">å‹æƒ…é“¾æ¥</h3>
<div class="menu-%e5%8f%8b%e6%83%85%e9%93%be%e6%8e%a5-container"><ul id="menu-%e5%8f%8b%e6%83%85%e9%93%be%e6%8e%a5" class="menu">
<li id="menu-item-27287" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-27287"><a href="https://www.daocloud.io/dce">DaoCloud Enterprise</a></li>
<li id="menu-item-27288" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-27288"><a href="https://www.daocloud.io/dch">DaoCloud äº‘åŸç”Ÿä¸€ä½“æœº</a></li>
</ul></div></aside>	</div>
	<!-- #sidebar -->

	
</div>
<!-- #secondary .widget-area .span3 -->
				</div>
				<!-- #container .row-fluid-->

				
			</div>
			<!--container fluid -->

		</div>
		<!-- container -->

	</div>
<!-- container full width -->



	<div class="container-full-width" id="after_footer">
		<div class="container">
			<div class="container-fluid">
				<footer class="site-footer row-fluid">
					<div class="span6">
						<div id="credit">
															<a href="http://cyberchimps.com/" target="_blank" title="CyberChimps Themes">
																			<h4 class="cc-credit-text">CyberChimps WordPress Themes</h4></a>
																	
													
						</div>
					</div>
					<!-- Adds the afterfooter copyright area -->
					<div class="span6">
												<div id="copyright">
							æ²ªICPå¤‡2021008917å·-1 Â© é¢œå¼€						</div>
					</div>
				</footer>
				<!-- row-fluid -->
			</div>
			<!-- .container-fluid-->
		</div>
		<!-- .container -->
	</div>    <!-- #after_footer -->


</div>
<!-- End Sub Body -->


		<script type="text/javascript">jQuery(document).ready(function($){
			$(window).scroll(function()  {
			if ($(this).scrollTop() > 0) {
			$('#header_section').addClass("sticky-header");
                       
			}
			else{
			$('#header_section').removeClass("sticky-header");
                       
			}
			});
		});</script>
	<script type="text/javascript" src="./../../wp-content/themes/neuro/inc/js/jquery.flexslider.js?ver=1.0" id="jquery-flexslider-js"></script>
<script type="text/javascript" src="./../../wp-content/themes/neuro/cyberchimps/lib/bootstrap/js/bootstrap.min.js?ver=2.0.4" id="bootstrap-js-js"></script>
<script type="text/javascript" src="./../../wp-content/themes/neuro/cyberchimps/lib/js/retina-1.1.0.min.js?ver=1.1.0" id="retina-js-js"></script>

</body>
</html>